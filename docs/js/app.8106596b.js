(function(t){function e(e){for(var a,s,r=e[0],l=e[1],c=e[2],d=0,m=[];d<r.length;d++)s=r[d],Object.prototype.hasOwnProperty.call(i,s)&&i[s]&&m.push(i[s][0]),i[s]=0;for(a in l)Object.prototype.hasOwnProperty.call(l,a)&&(t[a]=l[a]);u&&u(e);while(m.length)m.shift()();return o.push.apply(o,c||[]),n()}function n(){for(var t,e=0;e<o.length;e++){for(var n=o[e],a=!0,r=1;r<n.length;r++){var l=n[r];0!==i[l]&&(a=!1)}a&&(o.splice(e--,1),t=s(s.s=n[0]))}return t}var a={},i={app:0},o=[];function s(e){if(a[e])return a[e].exports;var n=a[e]={i:e,l:!1,exports:{}};return t[e].call(n.exports,n,n.exports,s),n.l=!0,n.exports}s.m=t,s.c=a,s.d=function(t,e,n){s.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:n})},s.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},s.t=function(t,e){if(1&e&&(t=s(t)),8&e)return t;if(4&e&&"object"===typeof t&&t&&t.__esModule)return t;var n=Object.create(null);if(s.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var a in t)s.d(n,a,function(e){return t[e]}.bind(null,a));return n},s.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return s.d(e,"a",e),e},s.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},s.p="";var r=window["webpackJsonp"]=window["webpackJsonp"]||[],l=r.push.bind(r);r.push=e,r=r.slice();for(var c=0;c<r.length;c++)e(r[c]);var u=l;o.push([0,"chunk-vendors"]),n()})({0:function(t,e,n){t.exports=n("56d7")},"01c2":function(t,e,n){"use strict";var a=n("e0cc"),i=n.n(a);i.a},"0295":function(t,e,n){"use strict";var a=n("d4e0"),i=n.n(a);i.a},"0407":function(t,e,n){"use strict";var a=n("933c"),i=n.n(a);i.a},"092f":function(t,e,n){},"0ccc":function(t,e,n){"use strict";var a=n("a67c"),i=n.n(a);i.a},"0d1a":function(t,e,n){},"14d6":function(t,e,n){"use strict";var a=n("aca3"),i=n.n(a);i.a},"14ed":function(t,e,n){"use strict";var a=n("571c"),i=n.n(a);i.a},"193e":function(t,e,n){"use strict";var a=n("b074"),i=n.n(a);i.a},2169:function(t,e,n){"use strict";var a=n("092f"),i=n.n(a);i.a},2885:function(t,e,n){},"29c3":function(t,e,n){"use strict";var a=n("a699"),i=n.n(a);i.a},"2ab9":function(t,e,n){"use strict";var a=n("4f73"),i=n.n(a);i.a},"2f5d":function(t,e,n){},3227:function(t,e,n){"use strict";var a=n("4050"),i=n.n(a);i.a},3885:function(t,e,n){"use strict";var a=n("f7f7"),i=n.n(a);i.a},"3b41":function(t,e,n){},4050:function(t,e,n){},4701:function(t,e,n){"use strict";var a=n("4885"),i=n.n(a);i.a},"47dd":function(t,e,n){"use strict";var a=n("7de7"),i=n.n(a);i.a},4885:function(t,e,n){},"4f73":function(t,e,n){},"56d7":function(t,e,n){"use strict";n.r(e);n("e260"),n("e6cf"),n("cca6"),n("a79d");var a=n("2b0e"),i=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{attrs:{id:"app"}},[n("router-view")],1)},o=[],s=n("2877"),r={},l=Object(s["a"])(r,i,o,!1,null,null,null),c=l.exports,u=(n("b0c0"),n("96cf"),n("1da1")),d=n("8c4f"),m=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"passport-layout-web-reg web-v3-layout-box"},[t._m(0),n("div",{staticClass:"web-reg-right"},[n("div",{staticClass:"web-main-content"},[n("div",{staticClass:"register-with-account-container flex-column"},[n("div",{staticClass:"base-back-container"},[t.showBackArrow?n("div",{staticClass:"base-back-text",on:{click:t.handleGoback}},[t._v(" 返回 ")]):t._e()]),n("div",{staticClass:"base-title-container"},[n("div",{staticClass:"base-title-title"},[t._v(" "+t._s(t.formInformation[t.step].title)+" ")]),n("div",{staticClass:"base-title-subtitle"},[n("span",[t._v(t._s(t.formInformation[t.step].description))]),2===t.step?n("span",{staticStyle:{"font-weight":"600",color:"#333"}},[t._v(" +86 "+t._s(t.phone)+" ")]):t._e()])]),1===t.step?n("div",{staticClass:"base-input-container"},[n("div",{class:["mobile-input-container",{"on-error":t.mobileError}]},[n("input",{staticClass:"mobile-input-code",attrs:{id:"register_code_area",name:"register_form_items",spellcheck:"false",autocomplete:"off",autocorrect:"off",autocapitalize:"off",maxlength:"4",type:"tel",disabled:"",value:"+86"}}),n("div",{staticClass:"mobile-input-seperator-line"}),n("input",{directives:[{name:"model",rawName:"v-model",value:t.phone,expression:"phone"}],staticClass:"mobile-input-phone",attrs:{name:"register_phone",placeholder:"请输入你的手机号",spellcheck:"false",autocomplete:"off",autocorrect:"off",autocapitalize:"off",type:"tel"},domProps:{value:t.phone},on:{focus:t.handleFocus,input:function(e){e.target.composing||(t.phone=e.target.value)}}})]),t.mobileError?n("div",{staticClass:"mobile-input-error-msg"},[t._v(" 手机号码错误，请重新输入。 ")]):t._e()]):t._e(),2===t.step?n("div",{staticClass:"base-input-container"},[n("div",{staticClass:"code-box-container"},[t._l(t.code,(function(e,a){return[n("div",{key:a,staticClass:"code-box"},[n("input",{directives:[{name:"focus",rawName:"v-focus"},{name:"model",rawName:"v-model",value:t.code[a],expression:"code[index]"}],class:["code-box-input",{active:t.code[a]}],attrs:{"data-index":a,"data-focus-index":t.focusIndex,type:"tel",name:"register_form_items",spellcheck:"false",autocomplete:"off",autocorrect:"off",autocapitalize:"off",disabled:t.focusIndex!==a},domProps:{value:t.code[a]},on:{keyup:t.handleCodeboxChange,input:function(e){e.target.composing||t.$set(t.code,a,e.target.value)}}})])]}))],2),t.countDowning?n("div",{staticClass:"code-box-count"},[t._v(" "+t._s(t.count)+" 秒后可重新获取验证码 ")]):t._e(),t.countDowning?t._e():n("div",{staticClass:"code-box-resend",on:{click:t.handleSendMessage}},[t._v(" 重新获取验证码 ")])]):t._e(),n("div",{staticClass:"flex-grow"}),1===t.step?n("div",{class:["base-button",{"base-button-disabled":t.mobileInputDisabled}],on:{click:t.handleSendMessage}},[t._v(" 下一步 ")]):t._e(),2===t.step?n("div",{class:["base-button",{"base-button-disabled":t.codeInputDisabled}],on:{click:t.handleSubmit}},[t._v(" 登录 ")]):t._e()])])])])},p=[function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"web-reg-left"},[n("div",{staticClass:"left-title"},[n("div",[t._v(" 极客 · 云教育 "),n("br"),t._v(" 面向未来的技术人才教育 ")])]),n("div",{staticClass:"left-img"})])}],h=(n("a15b"),n("d81d"),n("45fc"),n("a9e3"),n("d3b7"),n("5530")),f=n("bc3a"),g=n.n(f),v=n("5c96"),b=n.n(v),_=(n("4ec9"),n("3ca3"),n("ddb0"),n("d4ec")),y=n("bee2"),k=function(){function t(){Object(_["a"])(this,t),this.prefix="pro_",this.storage=window.localStorage}return Object(y["a"])(t,[{key:"set",value:function(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:86400,a=Date.now(),i=JSON.stringify({value:e,exp:n,timestamp:a}),o=this.prefix+t;this.storage.setItem(o,i)}},{key:"get",value:function(t){var e=this.prefix+t,n=this.storage.getItem(e);if(!n)return!1;n=JSON.parse(n);var a=1e3*n.exp,i=n,o=i.timestamp,s=n,r=s.value,l=Date.now();return l>o+a?(this.delete(t),!1):r}},{key:"delete",value:function(t){var e=this.prefix+t;this.storage.removeItem(e)}}]),t}(),w=k,C=function(){function t(){Object(_["a"])(this,t),this.init()}return Object(y["a"])(t,[{key:"init",value:function(){this.map=new Map,this.storage=new w}},{key:"getToken",value:function(){return this.storage.get("token")}},{key:"setToken",value:function(t){this.storage.set("token",t)}},{key:"getUserInfo",value:function(){return this.storage.get("userInfo")}},{key:"setUserInfo",value:function(t){this.storage.set("userInfo",t)}},{key:"removeToken",value:function(){localStorage.clear()}},{key:"clear",value:function(){localStorage.clear()}}],[{key:"getInstance",value:function(){return t.instance||(t.instance=new t),t.instance}}]),t}(),x=C.getInstance(),$=g.a.create();$.defaults.timeout=2e3,$.interceptors.request.use((function(t){var e=Object(h["a"])({},t),n=x.getToken();return n&&(e["headers"]["Authorization"]="Bearer ".concat(n)),e}),(function(t){return Promise.reject(t)}));var S=function(t){var e=t.response,n=e?e.status:408;if(e){var a=e.data,i=a.message||"服务器发送错误，请稍后再试";401===n?(v["Message"].error("登录状态过期，请重新登录"),x.clear(),window.location.href="/"):403===n?v["Message"].error("没有权限，联系管理员"):v["Message"].error(i)}else v["Message"].error("网络超时")},j=function(t){switch(!0){case 0===t.data.error_code:return t.data.data;case 1===t.data.error_code:return v["Message"].error(t.data.message),Promise.reject(t.data);default:return t.data}},z=function(t){return S(t),Promise.reject(t)};$.interceptors.response.use(j,z);var E={post:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return $.post(t,e,n)},put:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return $.put(t,e,n)},get:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},a=Object.assign({params:e},n);return $.get(t,a)},delete:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},a=Object.assign({params:e},n);return $.delete(t,a)}},P="https://neon.jiker.vip/api",I=P+"/admin",D={smsSend:"".concat(I,"/sms/send"),smsLogin:"".concat(I,"/sms/login"),qiniuToken:"".concat(P,"/qiniu/token"),course:"".concat(I,"/course"),chapter:"".concat(I,"/chapter"),section:"".concat(I,"/section"),courseItem:function(t){return"".concat(I,"/course/").concat(t)},chapterItem:function(t){return"".concat(I,"/chapter/").concat(t)},sectionItem:function(t){return"".concat(I,"/section/").concat(t)},chapterSort:"".concat(I,"/chapter/sort"),sectionSort:"".concat(I,"/section/sort"),zhiye:"".concat(I,"/zhiye"),zhiyeItem:function(t){return"".concat(I,"/zhiye/").concat(t)},zhiyePath:"".concat(I,"/zhiye/path"),zhiyePathItem:function(t){return"".concat(I,"/zhiye/path/").concat(t)},zhiyePathSort:"".concat(I,"/zhiye/path/sort"),zhiyeCourse:"".concat(I,"/zhiye/course"),zhiyeCourseItem:function(t){return"".concat(I,"/zhiye/course/").concat(t)},zhiyeCourseSort:"".concat(I,"/zhiye/course/sort"),company:"".concat(I,"/company"),companyItem:function(t){return"".concat(I,"/company/").concat(t)},project:"".concat(I,"/project"),projectItem:function(t){return"".concat(I,"/project/").concat(t)},projectVersion:"".concat(I,"/version"),projectVersionItem:function(t){return"".concat(I,"/version/").concat(t)},projectStory:"".concat(I,"/story"),projectStoryItem:function(t){return"".concat(I,"/story/").concat(t)},projectTask:"".concat(I,"/task"),projectTaskItem:function(t){return"".concat(I,"/task/").concat(t)},projectVersionSort:"".concat(I,"/project/version/sort"),projectStorySort:"".concat(I,"/project/story/sort"),projectTaskSort:"".concat(I,"/project/task/sort"),stack:"".concat(I,"/stack"),stackItem:function(t){return"".concat(I,"/stack/").concat(t)},skillQuestion:"".concat(I,"/skill/question"),skillQuestionItem:function(t){return"".concat(I,"/skill/question/").concat(t)},manager:"".concat(I,"/manager"),managerItem:function(t){return"".concat(I,"/manager/").concat(t)},permission:"".concat(I,"/permission"),role:"".concat(I,"/role"),roleItem:function(t){return"".concat(I,"/role/").concat(t)}},O={smsSend:function(t){var e=t.phone;return E.post(D.smsSend,{phone:e})},smsLogin:function(t){var e=t.phone,n=t.code;return E.post(D.smsLogin,{phone:e,code:n}).then((function(t){return x.setToken(t.token),x.setUserInfo(t.manager),t}))}},q=O,T={data:function(){return{count:60,countDowning:!1,step:1,formInformation:{1:{title:"欢迎来到极客 · EDU",description:" 以企业为教学出发点，以企业为人才流向地，面向市场及职场打造“教→学→求职”全流程的创新式闭环。 "},2:{title:"验证手机号",description:"请输的 6 位验证码，有效期十分钟。如未收到，请尝试重新获取验证码。"}},showBackArrow:!1,mobileError:!1,phone:"13511111111",code:["","","","","",""],focusIndex:0}},computed:{mobileInputDisabled:function(){return 11!==this.phone.length},codeInputDisabled:function(){return this.code.some((function(t){return""===t}))}},methods:{handleSendMessage:function(){var t=this;this.isMobile(this.phone)?q.smsSend({phone:this.phone}).then((function(e){var n=e.code;n&&t.$message.success("验证码："+n,9e3),t.showBackArrow=!0,t.step=2,t.countDown()})):this.mobileError=!0},handleGoback:function(){this.showBackArrow=!1,this.step=1,this.phone="",this.countDownStop()},countDown:function(){var t=this;this.countDowning=setInterval((function(){t.count--,1===t.count&&t.countDownStop()}),1e3)},countDownStop:function(){clearInterval(this.countDowning),this.count=60,this.countDowning=!1},isMobile:function(t){return/^(1[34578]\d{9})$/.test(t)},handleFocus:function(){this.mobileError&&(this.mobileError=!1)},handleCodeboxChange:function(t){var e=this.focusIndex,n=this.code[e];if(8===t.keyCode&&0!==e)return this.focusIndex=e-1,void this.$set(this.code,e-1,"");/^\d$/.test(n)?this.focusIndex=e+1:this.$set(this.code,e,""),5===e&&this.handleSubmit()},handleSubmit:function(){var t=this,e=this.code.join("");q.smsLogin({code:e,phone:this.phone}).then((function(){t.$message.success("登录成功"),window.location.href="/"})).catch((function(){t.code=t.code.map((function(){return""})),t.focusIndex=0}))}},directives:{focus:function(t){var e=Number(t.getAttribute("data-index")),n=Number(t.getAttribute("data-focus-index"));e===n&&t.focus()}}},B=T,V=(n("0ccc"),Object(s["a"])(B,m,p,!1,null,null,null)),F=V.exports,N=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"page-wrapper"},[n("Sider",{staticClass:"page-sider"}),n("div",{staticClass:"page-mainer"},[n("Header",{staticClass:"page-header"}),n("div",{staticClass:"page-body"},[n("router-view")],1),t._e()],1)],1)},M=[],U=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"header-section"},[n("div",{staticClass:"header-hd"},[n("Breadcrumb")],1),n("div",{staticClass:"header-bd"}),n("div",{staticClass:"header-ft"},[t._m(0),n("el-dropdown",{staticStyle:{height:"100%"},on:{command:t.handleCommand}},[n("div",{staticClass:"bar-info-container"},[n("i",{staticClass:"el-icon-user-solid userInfo-avatar"}),n("span",{staticClass:"userInfo-name"},[t._v(t._s(t.userInfo.name))]),n("i",{staticClass:"el-icon-arrow-down el-icon--right"})]),n("el-dropdown-menu",{attrs:{slot:"dropdown"},slot:"dropdown"},[n("el-dropdown-item",{attrs:{command:"Logout",icon:"el-icon-video-pause"}},[t._v("退出")])],1)],1)],1)])},R=[function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"bar-info-container"},[n("i",{staticClass:"el-icon-question"})])}],A=function(){var t=this,e=t.$createElement,n=t._self._c||e;return t.breadcrumbValue.length?n("div",{staticClass:"breadcrumb-section"},[t.breadcrumbValue.length?n("el-breadcrumb",{staticClass:"breadcrumb-list"},[t._l(t.breadcrumbValue,(function(e){return[e.to?n("el-breadcrumb-item",{key:e.name,staticClass:"breadcrumb-item",attrs:{replace:!0,to:e.to}},[t._v(t._s(e.name))]):n("el-breadcrumb-item",{key:e.name,staticClass:"breadcrumb-item"},[t._v(t._s(e.name))])]}))],2):t._e()],1):t._e()},L=[],Q=(n("4de4"),n("ac1f"),n("5319"),{props:{breadcrumb:{type:Array,default:function(){return[]}}},computed:{breadcrumbValue:function(){var t=this.breadcrumb;return t.length?t:this.$route.matched.filter((function(t){return t.meta&&t.meta.breadcrumb})).map((function(t){return{name:t.meta.breadcrumb.title,to:t.meta.breadcrumb.replace?{name:t.name}:void 0}}))}}}),Z=Q,J=(n("ca0b"),Object(s["a"])(Z,A,L,!1,null,"897365ae",null)),G=J.exports,H={data:function(){return{userInfo:{}}},created:function(){},methods:{handleCommand:function(t){var e="handle".concat(t);this[e]()},handleLogout:function(){x.clear(),window.location.href="/"}},components:{Breadcrumb:G}},K=H,W=(n("a510"),Object(s["a"])(K,U,R,!1,null,"75c70171",null)),X=W.exports,Y=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("footer",{staticClass:"footer-section"},[t._v(" Copyright © 2020 ❤️ 极客学院体验技术部出品 ")])},tt=[],et={},nt=et,at=(n("2169"),Object(s["a"])(nt,Y,tt,!1,null,null,null)),it=at.exports,ot=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"sider-section"},[t._m(0),n("div",{staticClass:"sider-menu-body"},[n("el-scrollbar",{staticClass:"scrollbar-section"},[n("Menu",{staticClass:"menu-section"})],1)],1)])},st=[function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"sider-menu-header logo-section"},[a("img",{staticClass:"logo-img",attrs:{src:n("9b19"),alt:"logo"}})])}],rt=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("el-menu",{attrs:{"default-active":t.path,router:!0}},[t._l(t.filterRoutes,(function(e){return[t.hasNavChildren(e)?n("el-submenu",{key:e.path,attrs:{index:e.path}},[n("template",{slot:"title"},[e.meta.nav.icon?n("i",{class:e.meta.nav.icon}):t._e(),n("span",{attrs:{slot:"title"},slot:"title"},[t._v(t._s(e.meta.nav.title))])]),t._l(e.children,(function(e){return n("el-menu-item",{key:e.path,attrs:{index:e.path,route:{path:e.path},id:e.name}},[e.meta.nav.icon?n("i",{class:e.meta.nav.icon}):t._e(),n("span",{attrs:{slot:"title"},slot:"title"},[t._v(t._s(e.meta.nav.title))])])}))],2):n("el-menu-item",{key:e.path,attrs:{disabled:e.disabled,index:e.path,route:{path:e.path},id:e.name}},[e.meta.nav.icon?n("i",{class:e.meta.nav.icon}):t._e(),n("span",{attrs:{slot:"title"},slot:"title"},[t._v(t._s(e.meta.nav.title))])])]}))],2)},lt=[],ct=(n("4160"),n("159b"),{data:function(){return{path:this.$route.path,filterRoutes:[],PermissionArr:[]}},created:function(){this.getPermissions()},watch:{$route:function(t){this.path=t.path}},methods:{getPermissions:function(){this.getRoutes()},getRoutes:function(){this.filterRoutes=this.filterNavigator(ei)},filterNavigator:function(t){var e=this,n=[];return t.forEach((function(t){if(t.meta&&t.meta.nav){var a={path:t.path,name:t.name,meta:t.meta};t.children&&(a.children=e.filterNavigator(t.children)),n.push(a)}else t.children&&e.filterNavigator(t.children).forEach((function(t){return n.push(t)}))})),n},hasNavChildren:function(t){var e=t.children||[];return e.some((function(t){return t.meta&&t.meta.nav}))}}}),ut=ct,dt=(n("7198"),Object(s["a"])(ut,rt,lt,!1,null,null,null)),mt=dt.exports,pt={components:{Menu:mt}},ht=pt,ft=(n("9297"),Object(s["a"])(ht,ot,st,!1,null,null,null)),gt=ft.exports,vt={data:function(){return{}},components:{Header:X,Footer:it,Sider:gt}},bt=vt,_t=(n("9f55"),Object(s["a"])(bt,N,M,!1,null,null,null)),yt=_t.exports,kt=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"login-page"},[a("div",{staticClass:"page-content"},[a("img",{staticClass:"page-logo",attrs:{src:n("cf05")}}),a("div",{staticClass:"page-form_container"},[a("el-form",{ref:"passwordFrom",staticStyle:{width:"340px"},attrs:{"status-icon":"",rules:t.passwordRules,model:t.passwordFrom}},[a("span",[t._v("账号密码登陆")]),a("el-form-item",{attrs:{prop:"phone"}},[a("el-input",{staticClass:"phone-input",attrs:{type:"number","prefix-icon":"el-icon-mobile-phone",placeholder:"请输手机号",autocomplete:"off"},model:{value:t.passwordFrom.phone,callback:function(e){t.$set(t.passwordFrom,"phone",e)},expression:"passwordFrom.phone"}})],1),a("el-form-item",{attrs:{prop:"password"}},[a("el-input",{attrs:{type:"password","prefix-icon":"el-icon-lock",placeholder:"请输入密码",autocomplete:"off","show-password":""},model:{value:t.passwordFrom.password,callback:function(e){t.$set(t.passwordFrom,"password",e)},expression:"passwordFrom.password"}})],1),a("el-form-item",[a("el-button",{staticClass:"login-btn",attrs:{type:"primary"},on:{click:t.login}},[t._v("登录")])],1)],1)],1)])])},wt=[],Ct={data:function(){return{passwordFrom:{phone:"",password:""},passwordRules:{phone:[{required:!0,message:"请输入手机号",trigger:"blur"},{pattern:/^1[3456789]\d{9}$/,message:"目前只支持中国大陆的手机号码",trigger:"blur"}],password:[{required:!0,message:"请输入密码",trigger:"blur"}]}}},created:function(){},methods:{login:function(){var t=this;this.$refs["passwordFrom"].validate((function(e){e&&t.$router.push({path:"/dashboard"})}))}}},xt=Ct,$t=(n("594e"),Object(s["a"])(xt,kt,wt,!1,null,"f47376a6",null)),St=$t.exports,jt=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{directives:[{name:"loading",rawName:"v-loading",value:t.loading,expression:"loading"}],staticClass:"page-content"},[n("router-link",{attrs:{to:{name:"CourseCreate"}}},[n("el-button",{attrs:{size:"medium",type:"primary",plain:""}},[t._v("创建课程")])],1),n("el-table",{staticClass:"mt-20",attrs:{data:t.courses,size:"medium"}},[n("el-table-column",{attrs:{prop:"id",label:"id",width:"80px"}}),n("el-table-column",{attrs:{prop:"name",label:"名称"}}),n("el-table-column",{attrs:{prop:"short_name",label:"副标题"}}),n("el-table-column",{attrs:{prop:"status",label:"状态",width:"120px",align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){return[n("el-tag",{attrs:{type:e.row.status?"success":"danger",size:"small"}},[t._v(" "+t._s(e.row.status?"已完成":"未完成")+" ")])]}}])}),n("el-table-column",{attrs:{label:"操作",width:"180px",align:"right"},scopedSlots:t._u([{key:"default",fn:function(e){return[n("el-dropdown",{attrs:{trigger:"hover"},on:{command:t.handleCommand}},[n("span",{staticClass:"icon-ctrl"},[n("i",{staticClass:"el-icon-more"})]),n("el-dropdown-menu",{attrs:{slot:"dropdown"},slot:"dropdown"},[n("el-dropdown-item",{attrs:{command:"edit-"+e.row.id+"-"+e.$index}},[t._v("编辑")]),n("el-dropdown-item",{attrs:{command:"delete-"+e.row.id+"-"+e.$index}},[t._v("删除")])],1)],1)]}}])})],1),n("el-pagination",{staticClass:"mt-20",attrs:{background:"",layout:"total, prev, pager, next, jumper","current-page":t.pagination.currentPage,"page-size":t.pagination.pageSize,total:t.pagination.total,"hide-on-single-page":!0},on:{"current-change":t.getData,"update:currentPage":function(e){return t.$set(t.pagination,"currentPage",e)},"update:current-page":function(e){return t.$set(t.pagination,"currentPage",e)}}})],1)},zt=[],Et=(n("a434"),n("1276"),{create:function(t){return E.post(D.course,t)},index:function(t){return E.get(D.course,t)},show:function(t){return E.get(D.courseItem(t))},edit:function(t,e){return E.put(D.courseItem(t),e)},destory:function(t){return E.delete(D.courseItem(t))}}),Pt=Et,It={data:function(){return{loading:!0,courses:[],pagination:{currentPage:1,pageSize:10,total:0}}},created:function(){this.getData()},methods:{getData:function(){var t=this,e={page_size:this.pagination.pageSize,current_page:this.pagination.currentPage};this.loading=!0,Pt.index(e).then((function(e){t.courses=e.rows,t.pagination.currentPage=e.pagination.current_page,t.pagination.pageSize=e.pagination.page_size,t.pagination.total=e.pagination.total})).finally((function(){t.loading=!1}))},handleCommand:function(t){var e=t.split("-")[0],n=t.split("-")[1],a=t.split("-")[2];"edit"===e?this.$router.push({name:"CourseEdit",params:{id:n}}):"delete"===e&&this.delCourses(a)},delCourses:function(t){var e=this,n=this.courses[t].id;this.$confirm("确认删除吗？").then((function(){return Pt.destory(n)})).then((function(){e.$message.success("删除课程成功"),e.courses.splice(t,1)})).catch((function(){}))}}},Dt=It,Ot=(n("9b22"),Object(s["a"])(Dt,jt,zt,!1,null,null,null)),qt=Ot.exports,Tt=function(){var t=this,e=t.$createElement;t._self._c;return t._m(0)},Bt=[function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"dashboard-page"},[n("h2",[t._v("Dashboard")]),n("div",[t._v("#TBD")])])}],Vt={},Ft=Vt,Nt=Object(s["a"])(Ft,Tt,Bt,!1,null,"56be7de2",null),Mt=Nt.exports,Ut=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"page-content"},[n("div",{staticClass:"c-650"},[t._m(0),n("el-form",{attrs:{"label-position":"top","label-width":"80px",size:"mini"}},[n("el-row",{attrs:{gutter:20}},[n("el-col",{attrs:{span:12}},[n("el-form-item",{attrs:{label:"课程名称："}},[n("el-input",{model:{value:t.course.name,callback:function(e){t.$set(t.course,"name",e)},expression:"course.name"}})],1)],1),n("el-col",{attrs:{span:12}},[n("el-form-item",{attrs:{label:"副标题："}},[n("el-input",{model:{value:t.course.short_name,callback:function(e){t.$set(t.course,"short_name",e)},expression:"course.short_name"}})],1)],1)],1),n("el-form-item",{attrs:{label:"课程提示："}},[n("el-input",{model:{value:t.course.tips,callback:function(e){t.$set(t.course,"tips",e)},expression:"course.tips"}})],1),n("el-form-item",{attrs:{label:"课程描述："}},[n("el-input",{attrs:{type:"textarea"},model:{value:t.course.description,callback:function(e){t.$set(t.course,"description",e)},expression:"course.description"}})],1),n("el-form-item",{attrs:{label:"课程封面："}},[n("el-upload",{ref:"upload",staticClass:"course-image-upload",attrs:{action:"",limit:1,"file-list":t.fileList,"before-upload":t.handleBeforeUpload,accept:"image/jpg, image/jpeg, image/png"}},[t.course.image_url?t._e():n("i",{staticClass:"el-icon-plus el-uploader__icon"}),t.course.image_url?n("img",{staticClass:"course-image-upload",attrs:{src:t.course.image_url}}):t._e()])],1),n("el-form-item",[n("el-button",{attrs:{size:"medium",type:"primary",plain:""},on:{click:t.handleSubmit}},[t._v("创建课程")])],1)],1)],1)])},Rt=[function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"sub-header"},[n("div",{staticClass:"sub-header-title"},[t._v("基本信息")])])}],At=(n("99af"),n("cea2")),Lt="_for_neon_project/",Qt={token:function(){return E.get(D.qiniuToken)},upload:function(t){var e=t.file,n=t.token,a=t.mimeType,i=void 0===a?null:a,o=t.params,s=void 0===o?{}:o,r=t.progressCallback;return new Promise((function(t,a){var o=e.name,l=Lt+Date.now()+"_"+e.name,c={useCdnDomain:!0},u={fname:o,params:s,mimeType:i},d=At["upload"](e,l,n,u,c);d.subscribe({next:function(t){"function"===typeof r&&r(t)},error:function(t){a(t)},complete:function(e){t(e)}})}))},start:function(){var t=Object(u["a"])(regeneratorRuntime.mark((function t(e){var n,a,i,o,s;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,Qt.token();case 2:return n=t.sent,a=n.token,i=n.domain,t.next=7,Qt.upload({file:e,token:a});case 7:return o=t.sent,s="https://".concat(i,"/").concat(o.key),t.abrupt("return",{imageUrl:s});case 10:case"end":return t.stop()}}),t)})));function e(e){return t.apply(this,arguments)}return e}()},Zt=Qt,Jt={data:function(){return{fileList:[],course:{name:"",short_name:"",tips:"",description:"",image_url:"",status:0}}},methods:{handleSubmit:function(){var t=this;this.loading=!0,Pt.create(this.course).then((function(e){t.$message.success("创建课程成功"),t.$router.push({name:"CourseEdit",params:{id:e.id}})})).finally((function(){t.loading=!1}))},handleBeforeUpload:function(t){var e=this;return Zt.start(t).then((function(t){e.course.image_url=t.imageUrl})),Promise.reject({})}}},Gt=Jt,Ht=(n("6758"),Object(s["a"])(Gt,Ut,Rt,!1,null,"2182ba00",null)),Kt=Ht.exports,Wt=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{directives:[{name:"loading",rawName:"v-loading",value:t.loading,expression:"loading"}],staticClass:"page-content"},[n("el-row",{attrs:{gutter:60}},[n("el-col",{attrs:{lg:12}},[n("div",{staticClass:"sub-header"},[n("div",{staticClass:"sub-header-title"},[t._v("基本信息")]),n("div",{staticClass:"sub-header-fd"},[n("el-button",{attrs:{size:"medium",type:t.isEdit?"primary":""},on:{click:t.handleEdit}},[t._v(" "+t._s(t.isEdit?"保存":"修改")+" ")])],1)]),n("el-form",{attrs:{"label-position":"top",size:"mini",model:t.course}},[n("el-row",{attrs:{gutter:20}},[n("el-col",{attrs:{lg:12}},[n("el-form-item",{attrs:{label:"课程名称："}},[n("el-input",{attrs:{disabled:!t.isEdit},model:{value:t.course.name,callback:function(e){t.$set(t.course,"name",e)},expression:"course.name"}})],1)],1),n("el-col",{attrs:{lg:12}},[n("el-form-item",{attrs:{label:"副标题："}},[n("el-input",{attrs:{disabled:!t.isEdit},model:{value:t.course.short_name,callback:function(e){t.$set(t.course,"short_name",e)},expression:"course.short_name"}})],1)],1)],1),n("el-form-item",{attrs:{label:"课程提示："}},[n("el-input",{attrs:{disabled:!t.isEdit},model:{value:t.course.tips,callback:function(e){t.$set(t.course,"tips",e)},expression:"course.tips"}})],1),n("el-form-item",{attrs:{label:"课程描述："}},[n("el-input",{attrs:{type:"textarea",disabled:!t.isEdit},model:{value:t.course.description,callback:function(e){t.$set(t.course,"description",e)},expression:"course.description"}})],1),n("el-row",{attrs:{gutter:20}},[n("el-col",{attrs:{lg:12}},[n("el-form-item",{attrs:{label:"课程封面："}},[t.isEdit?n("el-upload",{ref:"upload",staticClass:"course-image-upload",attrs:{action:"",limit:1,"file-list":t.fileList,"before-upload":t.handleBeforeUpload,accept:"image/jpg, image/jpeg, image/png"}},[t.course.image_url?t._e():n("i",{staticClass:"el-icon-plus el-uploader__icon"}),t.course.image_url?n("img",{staticClass:"course-image-upload",attrs:{src:t.course.image_url}}):t._e()]):t._e(),!t.isEdit&&t.course.image_url?n("img",{staticClass:"course-image-upload",attrs:{src:t.course.image_url}}):t._e(),t.isEdit||t.course.image_url?t._e():n("span",[t._v("无")])],1)],1),n("el-col",{attrs:{lg:12}},[n("el-form-item",{attrs:{label:"课程状态："}},[n("el-switch",{attrs:{disabled:!t.isEdit,"active-value":1,"inactive-value":0},model:{value:t.course.status,callback:function(e){t.$set(t.course,"status",e)},expression:"course.status"}})],1)],1)],1)],1)],1),n("el-col",{attrs:{lg:12}},[n("div",{staticClass:"sub-header"},[n("div",{staticClass:"sub-header-title"},[t._v("课程章节")])]),n("div",{staticClass:"chapter-container"},[n("draggable",{attrs:{group:"chapter",handle:".chapter-item-draggable"},on:{change:t.handleChapterSort},model:{value:t.course.chapters,callback:function(e){t.$set(t.course,"chapters",e)},expression:"course.chapters"}},t._l(t.course.chapters,(function(e,a){return n("div",{key:e.id,staticClass:"chapter-item"},[n("div",{staticClass:"chapter-item-title"},[n("i",{staticClass:"el-icon-rank chapter-item-draggable"}),n("span",[t._v(t._s(e.name))]),n("div",{staticClass:"chapter-item-ctrl"},[n("el-dropdown",{attrs:{trigger:"hover"},on:{command:t.handleChapter}},[n("span",{staticClass:"icon-ctrl"},[n("i",{staticClass:"el-icon-more"})]),n("el-dropdown-menu",{attrs:{slot:"dropdown"},slot:"dropdown"},[n("el-dropdown-item",{attrs:{command:"1-"+a}},[t._v("编辑")]),n("el-dropdown-item",{attrs:{command:"0-"+a}},[t._v("删除")])],1)],1)],1)]),n("div",{staticClass:"chapter-item-section"},[n("draggable",{attrs:{handle:".section-item-draggable",group:"section"},on:{change:function(e){return t.handleSectionSort(e,a)}},model:{value:e.sections,callback:function(n){t.$set(e,"sections",n)},expression:"chapter.sections"}},t._l(e.sections,(function(e,i){return n("div",{key:e.id,staticClass:"section-item"},[n("div",{staticClass:"section-item-text"},[n("i",{staticClass:"el-icon-rank section-item-draggable"}),n("span",[t._v(t._s(e.name))]),n("div",{staticClass:"section-item-ctrl"},[n("el-dropdown",{attrs:{trigger:"hover"},on:{command:t.handleSection}},[n("span",{staticClass:"icon-ctrl"},[n("i",{staticClass:"el-icon-more"})]),n("el-dropdown-menu",{attrs:{slot:"dropdown"},slot:"dropdown"},[n("el-dropdown-item",{attrs:{command:"2-"+a+"-"+i}},[t._v("内容")]),n("el-dropdown-item",{attrs:{command:"1-"+a+"-"+i}},[t._v("编辑")]),n("el-dropdown-item",{attrs:{command:"0-"+a+"-"+i}},[t._v("删除")])],1)],1)],1)])])})),0),n("div",{staticClass:"section-item",on:{click:function(e){return t.handleAddSection(a)}}},[n("div",{staticClass:"section-item-create"},[t._v(" 添加节 "),n("i",{staticClass:"el-icon-circle-plus"})])])],1)])})),0),n("div",{staticClass:"chapter-item-create",on:{click:t.handleAddChapter}},[t._v(" 添加章 "),n("i",{staticClass:"el-icon-circle-plus"})])],1)])],1),n("el-drawer",{attrs:{visible:t.drawerVisible,direction:"rtl",size:"50%","before-close":t.handleCloseDrawer},on:{"update:visible":function(e){t.drawerVisible=e}}},[n("div",{staticClass:"section-content"},[n("el-form",{attrs:{"label-position":"top",size:"mini",model:t.course}},[n("el-form-item",{attrs:{label:"小节名称："}},[n("div",{staticClass:"section-title"},[t._v(t._s(t.sectionInfo.name))])]),n("el-form-item",{attrs:{label:"视频地址："}},[n("el-input",{model:{value:t.sectionInfo.video_url,callback:function(e){t.$set(t.sectionInfo,"video_url",e)},expression:"sectionInfo.video_url"}})],1),n("el-form-item",{attrs:{label:"课程内容："}},[n("mavon-editor",{ref:"md",staticClass:"md",attrs:{toolbars:t.markdownOption,subfield:!1},on:{imgAdd:t.handleImgAdd},model:{value:t.sectionInfo.content,callback:function(e){t.$set(t.sectionInfo,"content",e)},expression:"sectionInfo.content"}})],1),n("el-form-item",[n("el-button",{attrs:{size:"medium",type:"primary"},on:{click:t.handleSaveSection}},[t._v("保存")])],1)],1)],1)])],1)},Xt=[],Yt=n("b2d8"),te=(n("64e1"),n("310e")),ee=n.n(te),ne={create:function(t){return E.post(D.chapter,t)},edit:function(t,e){return E.put(D.chapterItem(t),e)},destory:function(t){return E.delete(D.chapterItem(t))},sort:function(t){return E.post(D.chapterSort,t)}},ae=ne,ie={create:function(t){return E.post(D.section,t)},edit:function(t,e){return E.put(D.sectionItem(t),e)},destory:function(t){return E.delete(D.sectionItem(t))},sort:function(t){return E.post(D.sectionSort,t)},show:function(t){return E.get(D.sectionItem(t))}},oe=ie,se={bold:!0,mark:!0,quote:!0,ol:!0,ul:!0,link:!0,imagelink:!0,code:!0,table:!0},re={data:function(){return{loading:!0,markdownOption:se,isEdit:!1,drawerVisible:!1,fileList:[],course:{id:null,name:"",short_name:"",tips:"",description:"",status:0,image_url:"",chapters:[]},sectionInfo:{name:"",video_url:"",content:"",id:null}}},created:function(){this.getData()},methods:{getData:function(){var t=this,e=this.$route.params.id;Pt.show(e).then((function(e){t.course=e.course})).finally((function(){t.loading=!1}))},handleEdit:function(){var t=this,e=this.$route.params.id;this.isEdit=!this.isEdit,this.isEdit||(this.loading=!0,Pt.edit(e,Object(h["a"])({},this.course)).then((function(){t.$message.success("编辑成功")})).finally((function(){t.loading=!1})))},handleBeforeUpload:function(t){var e=this;return Zt.start(t).then((function(t){e.course.image_url=t.imageUrl})),Promise.reject({})},handleAddChapter:function(){var t=this,e=Number(this.$route.params.id),n=this.course.chapters.length+1;this.$prompt("请输入章节名称","新增章",{confirmButtonText:"确定",cancelButtonText:"取消",inputPattern:/\S/,inputErrorMessage:"输入不能为空"}).then((function(a){var i=a.value;t.loading=!0,ae.create({sort:n,course_id:e,name:i}).then((function(e){t.$message.success("添加章节成功"),t.course.chapters.push({id:e.id,name:i,sections:[],sort:n})})).finally((function(){t.loading=!1}))}))},handleAddSection:function(t){var e=this,n=this.course.chapters[t],a=n.sections.length+1;this.$prompt("请输入节名称",n.name,{confirmButtonText:"确定",cancelButtonText:"取消",inputPattern:/\S/,inputErrorMessage:"输入不能为空"}).then((function(i){var o=i.value;e.loading=!0,oe.create({sort:a,chapter_id:n.id,name:o}).then((function(n){e.$message.success("添加节成功"),e.course.chapters[t].sections.push({id:n.id,name:o,sort:a})})).finally((function(){e.loading=!1}))}))},handleChapter:function(t){var e=this,n=t.split("-"),a=n[0],i=n[1],o=this.course.chapters[i];"1"===a?this.$prompt("请编辑章名称","编辑章",{confirmButtonText:"确定",cancelButtonText:"取消",inputPattern:/\S/,inputErrorMessage:"输入不能为空",inputValue:o.name}).then((function(t){var n=t.value;e.loading=!0,ae.edit(o.id,{name:n}).then((function(){e.$message.success("编辑章节成功"),o.name=n})).finally((function(){e.loading=!1}))})):(this.loading=!0,this.$confirm("确认删除「"+o.name+"」吗？").then((function(){return ae.destory(o.id)})).then((function(){e.course.chapters.splice(i,1)})).finally((function(){e.loading=!1})))},handleSection:function(t){var e=t.split("-"),n=e[0],a=e[1],i=e[2];"1"===n?this.handleEditSection(a,i):"2"===n?this.handleOpenDrawer(a,i):this.handleDelSection(a,i)},handleEditSection:function(t,e){var n=this,a=this.course.chapters[t],i=a.sections[e];this.$prompt("请编辑节名称",a.name,{confirmButtonText:"确定",cancelButtonText:"取消",inputPattern:/\S/,inputErrorMessage:"输入不能为空",inputValue:i.name}).then((function(t){var e=t.value;n.loading=!0,oe.edit(i.id,{name:e}).then((function(){n.$message.success("编辑节成功"),i.name=e})).finally((function(){n.loading=!1}))}))},handleDelSection:function(t,e){var n=this.course.chapters[t],a=n.sections[e].name,i=n.sections[e].id;this.$confirm("确认删除「"+a+"」吗？").then((function(){return oe.destory(i)})).then((function(){n.sections.splice(e,1)}))},handleChapterSort:function(){var t=this,e=this.course.chapters.map((function(t){return t.id}));ae.sort({chapters:e}).then((function(){t.$message.success("章节排序成功")}))},handleSectionSort:function(t,e){var n=this;if(t.added||t.moved){var a=this.course.chapters[e].sections.map((function(t){return t.id})),i=this.course.chapters[e].id;oe.sort({sections:a,chapter_id:i}).then((function(){n.$message.success("节排序成功")}))}},handleOpenDrawer:function(t,e){var n=this,a=this.course.chapters[t],i=a.sections[e].name,o=a.sections[e].id;this.drawerVisible=!0,this.drawerTitle=i,this.loading=!0,oe.show(o).then((function(t){n.sectionInfo=t.section})).finally((function(){n.loading=!1}))},handleSaveSection:function(){var t=this,e=this.sectionInfo,n=e.id,a=e.name,i=e.video_url,o=e.content;this.loading=!0,oe.edit(n,{name:a,video_url:i,content:o}).then((function(){t.$message.success("保存成功"),t.drawerVisible=!1})).finally((function(){t.loading=!1}))},handleCloseDrawer:function(t){this.$confirm("确认关闭？").then((function(){t()})).catch((function(){}))},handleImgAdd:function(t,e){var n=this;Zt.start(e).then((function(e){n.$refs.md.$img2Url(t,e.imageUrl)}))}},components:{draggable:ee.a,mavonEditor:Yt["mavonEditor"]}},le=re,ce=(n("f432"),Object(s["a"])(le,Wt,Xt,!1,null,"5730bfc5",null)),ue=ce.exports,de=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{directives:[{name:"loading",rawName:"v-loading",value:t.loading,expression:"loading"}],staticClass:"page-content"},[n("router-link",{attrs:{to:{name:"ZhiyeCreate"}}},[n("el-button",{attrs:{size:"medium",type:"primary",plain:""}},[t._v("创建职业")])],1),n("el-table",{staticClass:"mt-20",attrs:{data:t.zhiyes,size:"medium"}},[n("el-table-column",{attrs:{prop:"id",label:"id",width:"80px"}}),n("el-table-column",{attrs:{prop:"name",label:"名称"}}),n("el-table-column",{attrs:{prop:"status",label:"状态",width:"120px",align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){return[n("el-tag",{attrs:{type:e.row.status?"success":"danger",size:"small"}},[t._v(" "+t._s(e.row.status?"已完成":"未完成")+" ")])]}}])}),n("el-table-column",{attrs:{label:"操作",width:"180px",align:"right"},scopedSlots:t._u([{key:"default",fn:function(e){return[n("el-dropdown",{attrs:{trigger:"hover"},on:{command:t.handleCommand}},[n("span",{staticClass:"icon-ctrl"},[n("i",{staticClass:"el-icon-more"})]),n("el-dropdown-menu",{attrs:{slot:"dropdown"},slot:"dropdown"},[n("el-dropdown-item",{attrs:{command:"edit-"+e.row.id+"-"+e.$index}},[t._v("编辑")]),n("el-dropdown-item",{attrs:{command:"delete-"+e.row.id+"-"+e.$index}},[t._v("删除")])],1)],1)]}}])})],1),n("el-pagination",{staticClass:"mt-20",attrs:{background:"",layout:"total, prev, pager, next, jumper","current-page":t.pagination.currentPage,"page-size":t.pagination.pageSize,total:t.pagination.total,"hide-on-single-page":!0},on:{"current-change":t.getData,"update:currentPage":function(e){return t.$set(t.pagination,"currentPage",e)},"update:current-page":function(e){return t.$set(t.pagination,"currentPage",e)}}})],1)},me=[],pe={create:function(t){return E.post(D.zhiye,t)},index:function(t){return E.get(D.zhiye,t)},show:function(t){return E.get(D.zhiyeItem(t))},edit:function(t,e){return E.put(D.zhiyeItem(t),e)},destory:function(t){return E.delete(D.zhiyeItem(t))},createPath:function(t){return E.post(D.zhiyePath,t)},editPath:function(t,e){return E.put(D.zhiyePathItem(t),e)},destoryPath:function(t){return E.delete(D.zhiyePathItem(t))},sortPath:function(t){return E.post(D.zhiyePathSort,t)},createCourse:function(t){return E.post(D.zhiyeCourse,t)},destoryCourse:function(t){return E.delete(D.zhiyeCourseItem(t))},sortCourse:function(t){return E.post(D.zhiyeCourseSort,t)}},he=pe,fe={data:function(){return{loading:!0,zhiyes:[],pagination:{currentPage:1,pageSize:10,total:0}}},created:function(){this.getData()},methods:{getData:function(){var t=this,e={page_size:this.pagination.pageSize,current_page:this.pagination.currentPage};this.loading=!0,he.index(e).then((function(e){t.zhiyes=e.rows,t.pagination.currentPage=e.pagination.current_page,t.pagination.pageSize=e.pagination.page_size,t.pagination.total=e.pagination.total})).finally((function(){t.loading=!1}))},handleCommand:function(t){var e=t.split("-")[0],n=t.split("-")[1],a=t.split("-")[2];"edit"===e?this.$router.push({name:"ZhiyeEdit",params:{id:n}}):"delete"===e&&this.delZhiyes(a)},delZhiyes:function(t){var e=this,n=this.zhiyes[t].id;this.$confirm("确认删除吗？").then((function(){return he.destory(n)})).then((function(){e.$message.success("删除课程成功"),e.zhiyes.splice(t,1)})).catch((function(){}))}}},ge=fe,ve=(n("4701"),Object(s["a"])(ge,de,me,!1,null,null,null)),be=ve.exports,_e=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"page-content"},[n("div",{staticClass:"c-650"},[t._m(0),n("el-form",{attrs:{"label-position":"top","label-width":"80px",size:"mini"}},[n("el-form-item",{attrs:{label:"职业名称："}},[n("el-input",{model:{value:t.zhiye.name,callback:function(e){t.$set(t.zhiye,"name",e)},expression:"zhiye.name"}})],1),n("el-form-item",{attrs:{label:"职业描述："}},[n("el-input",{attrs:{type:"textarea"},model:{value:t.zhiye.description,callback:function(e){t.$set(t.zhiye,"description",e)},expression:"zhiye.description"}})],1),n("el-form-item",{attrs:{label:"职业封面："}},[n("el-upload",{ref:"upload",staticClass:"zhiye-image-upload",attrs:{action:"",limit:1,"file-list":t.fileList,"before-upload":t.handleBeforeUpload,accept:"image/jpg, image/jpeg, image/png"}},[t.zhiye.image_url?t._e():n("i",{staticClass:"el-icon-plus el-uploader__icon"}),t.zhiye.image_url?n("img",{staticClass:"zhiye-image-upload",attrs:{src:t.zhiye.image_url}}):t._e()])],1),n("el-form-item",[n("el-button",{attrs:{size:"medium",type:"primary",plain:""},on:{click:t.handleSubmit}},[t._v("创建职业")])],1)],1)],1)])},ye=[function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"sub-header"},[n("div",{staticClass:"sub-header-title"},[t._v("基本信息")])])}],ke={data:function(){return{fileList:[],zhiye:{name:"",description:"",image_url:"",status:0}}},methods:{handleSubmit:function(){var t=this;this.loading=!0,he.create(this.zhiye).then((function(e){t.$message.success("创建职业成功"),t.$router.push({name:"ZhiyeEdit",params:{id:e.id}})})).finally((function(){t.loading=!1}))},handleBeforeUpload:function(t){var e=this;return Zt.start(t).then((function(t){e.zhiye.image_url=t.imageUrl})),Promise.reject({})}}},we=ke,Ce=(n("8e17"),Object(s["a"])(we,_e,ye,!1,null,"c0e31e66",null)),xe=Ce.exports,$e=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{directives:[{name:"loading",rawName:"v-loading",value:t.loading,expression:"loading"}],staticClass:"page-content"},[n("el-row",{attrs:{gutter:60}},[n("el-col",{attrs:{lg:12}},[n("div",{staticClass:"sub-header"},[n("div",{staticClass:"sub-header-title"},[t._v("基本信息")]),n("div",{staticClass:"sub-header-fd"},[n("el-button",{attrs:{size:"medium",type:t.isEdit?"primary":""},on:{click:t.handleZhiyeEdit}},[t._v(" "+t._s(t.isEdit?"保存":"修改")+" ")])],1)]),n("el-form",{attrs:{"label-position":"top",size:"mini",model:t.zhiye}},[n("el-form-item",{attrs:{label:"职业名称："}},[n("el-input",{attrs:{disabled:!t.isEdit},model:{value:t.zhiye.name,callback:function(e){t.$set(t.zhiye,"name",e)},expression:"zhiye.name"}})],1),n("el-form-item",{attrs:{label:"职业描述："}},[n("el-input",{attrs:{type:"textarea",disabled:!t.isEdit},model:{value:t.zhiye.description,callback:function(e){t.$set(t.zhiye,"description",e)},expression:"zhiye.description"}})],1),n("el-row",{attrs:{gutter:20}},[n("el-col",{attrs:{lg:12}},[n("el-form-item",{attrs:{label:"职业封面："}},[t.isEdit?n("el-upload",{ref:"upload",staticClass:"el-image-upload",attrs:{action:"",limit:1,"file-list":t.fileList,"before-upload":t.handleBeforeUpload,accept:"image/jpg, image/jpeg, image/png"}},[t.zhiye.image_url?t._e():n("i",{staticClass:"el-icon-plus el-uploader__icon"}),t.zhiye.image_url?n("img",{staticClass:"el-image-upload",attrs:{src:t.zhiye.image_url}}):t._e()]):t._e(),!t.isEdit&&t.zhiye.image_url?n("img",{staticClass:"el-image-upload",attrs:{src:t.zhiye.image_url}}):t._e(),t.isEdit||t.zhiye.image_url?t._e():n("span",[t._v("无")])],1)],1),n("el-col",{attrs:{lg:12}},[n("el-form-item",{attrs:{label:"职业状态："}},[n("el-switch",{attrs:{disabled:!t.isEdit,"active-value":1,"inactive-value":0},model:{value:t.zhiye.status,callback:function(e){t.$set(t.zhiye,"status",e)},expression:"zhiye.status"}})],1)],1)],1)],1)],1),n("el-col",{attrs:{lg:12}},[n("div",{staticClass:"sub-header"},[n("div",{staticClass:"sub-header-title"},[t._v("职业路径")])]),n("div",{staticClass:"path-container"},[n("draggable",{attrs:{group:"path",handle:".path-item-draggable"},on:{change:t.handleSortPath},model:{value:t.paths,callback:function(e){t.paths=e},expression:"paths"}},t._l(t.paths,(function(e,a){return n("div",{key:e.id,staticClass:"path-item"},[n("div",{staticClass:"path-item-title"},[n("i",{staticClass:"el-icon-rank path-item-draggable"}),n("span",[t._v(t._s(e.name))]),n("div",{staticClass:"path-item-ctrl"},[n("el-dropdown",{attrs:{trigger:"hover"},on:{command:t.handleCommandPath}},[n("span",{staticClass:"icon-ctrl"},[n("i",{staticClass:"el-icon-more"})]),n("el-dropdown-menu",{attrs:{slot:"dropdown"},slot:"dropdown"},[n("el-dropdown-item",{attrs:{command:"1-"+a}},[t._v("编辑")]),n("el-dropdown-item",{attrs:{command:"0-"+a}},[t._v("删除")])],1)],1)],1)]),n("div",{staticClass:"path-item-course"},[n("draggable",{attrs:{handle:".course-item-draggable",group:"course"},on:{change:function(e){return t.handleSortCourse(e,a)}},model:{value:e.courses,callback:function(n){t.$set(e,"courses",n)},expression:"path.courses"}},t._l(e.courses,(function(e,i){return n("div",{key:i,staticClass:"course-item"},[n("div",{staticClass:"course-item-text"},[n("i",{staticClass:"el-icon-rank course-item-draggable"}),n("span",[t._v(t._s(e.name))]),n("div",{staticClass:"course-item-ctrl"},[n("el-dropdown",{attrs:{trigger:"hover"},on:{command:t.handleCommandCourse}},[n("span",{staticClass:"icon-ctrl"},[n("i",{staticClass:"el-icon-more"})]),n("el-dropdown-menu",{attrs:{slot:"dropdown"},slot:"dropdown"},[n("el-dropdown-item",{attrs:{command:"0-"+a+"-"+i}},[t._v("删除")])],1)],1)],1)])])})),0),n("div",{staticClass:"course-item",on:{click:function(e){return t.handleAddCourse(a)}}},[n("div",{staticClass:"course-item-create"},[t._v(" 添加关联课程 "),n("i",{staticClass:"el-icon-circle-plus"})])])],1)])})),0),n("div",{staticClass:"path-item-create",on:{click:t.handletoCreatePath}},[t._v(" 添加路径 "),n("i",{staticClass:"el-icon-circle-plus"})])],1)])],1),n("el-dialog",{attrs:{title:"create"===t.dialogFormType?"添加职业路径":"修改职业路径",visible:t.dialogFormVisible},on:{"update:visible":function(e){t.dialogFormVisible=e}}},[n("el-form",{attrs:{model:t.dialogForm}},[n("el-form-item",{attrs:{label:"路径名称"}},[n("el-input",{model:{value:t.dialogForm.name,callback:function(e){t.$set(t.dialogForm,"name",e)},expression:"dialogForm.name"}})],1),n("el-form-item",{attrs:{label:"路径描述"}},[n("el-input",{attrs:{type:"textarea"},model:{value:t.dialogForm.description,callback:function(e){t.$set(t.dialogForm,"description",e)},expression:"dialogForm.description"}})],1)],1),n("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[n("el-button",{on:{click:function(e){t.dialogFormVisible=!1}}},[t._v("取 消")]),n("el-button",{attrs:{type:"primary"},on:{click:t.handlePathSubimt}},[t._v("确 定")])],1)],1)],1)},Se=[],je=(n("a4d3"),n("e01a"),{data:function(){return{loading:!0,isEdit:!1,dialogFormType:"create",dialogFormVisible:!1,dialogForm:{id:null,name:"",description:"",pathIndex:null},drawerVisible:!1,fileList:[],zhiye:{id:null,name:"",description:"",status:0,image_url:""},paths:[]}},created:function(){this.getData()},methods:{getData:function(){var t=this,e=this.$route.params.id;he.show(e).then((function(e){t.zhiye=e.zhiye,t.paths=e.zhiye.zhiye_paths})).finally((function(){t.loading=!1}))},handleZhiyeEdit:function(){var t=this,e=this.$route.params.id;this.isEdit=!this.isEdit,this.isEdit||(this.loading=!0,he.edit(e,Object(h["a"])({},this.zhiye)).then((function(){t.$message.success("编辑成功")})).finally((function(){t.loading=!1})))},handleBeforeUpload:function(t){var e=this;return Zt.start(t).then((function(t){e.zhiye.image_url=t.imageUrl})),Promise.reject({})},handletoCreatePath:function(){this.dialogFormType="create",this.dialogFormVisible=!0,this.dialogForm.id="",this.dialogForm.name="",this.dialogForm.description="",this.dialogForm.pathIndex=""},handlePathSubimt:function(){"create"===this.dialogFormType?this.handleCreatePath():this.handleEditPath()},handleCreatePath:function(){var t=this,e=Number(this.$route.params.id),n=this.paths.length+1,a=this.dialogForm.name,i=this.dialogForm.description;this.loading=!0,he.createPath({sort:n,zhiye_id:e,name:a,description:i}).then((function(e){t.$message.success("添加路径成功"),t.paths.push({id:e.id,name:a,description:i,sort:n,courses:[]})})).finally((function(){t.loading=!1,t.dialogFormVisible=!1}))},handleEditPath:function(){var t=this,e=Number(this.$route.params.id),n=this.dialogForm.id,a=this.dialogForm.name,i=this.dialogForm.description,o=this.dialogForm.pathIndex;this.loading=!0,he.editPath(n,{zhiye_id:e,name:a,description:i}).then((function(){t.$message.success("编辑成功"),t.paths[o].name=a,t.paths[o].description=i})).finally((function(){t.loading=!1,t.dialogFormVisible=!1}))},handleDestoryPath:function(t){var e=this,n=this.paths[t];this.loading=!0,this.$confirm("确认删除「"+n.name+"」吗？").then((function(){return he.destoryPath(n.id)})).then((function(){e.paths.splice(t,1)})).finally((function(){e.loading=!1}))},handleCommandPath:function(t){var e=t.split("-"),n=e[0],a=e[1],i=this.paths[a];"1"===n?(this.dialogFormType="edit",this.dialogFormVisible=!0,this.dialogForm.name=i.name,this.dialogForm.description=i.description,this.dialogForm.id=i.id,this.dialogForm.pathIndex=a):this.handleDestoryPath(a)},handleSortPath:function(){var t=this,e=this.paths.map((function(t){return t.id}));he.sortPath({paths:e}).then((function(){t.$message.success("路径排序成功")}))},handleSortCourse:function(t,e){var n=this;if(t.added||t.moved){var a=this.paths[e].courses.map((function(t){return t.zhiye_course.id})),i=this.paths[e].id;he.sortCourse({courses:a,path_id:i}).then((function(){n.$message.success("关联课程排序成功")}))}},handleImgAdd:function(t,e){var n=this;Zt.start(e).then((function(e){n.$refs.md.$img2Url(t,e.imageUrl)}))},handleAddCourse:function(t){var e=this,n=this.paths[t].id,a=Number(this.$route.params.id),i=this.paths[t].courses.length+1;this.$prompt("请输入课程 ID","关联课程",{confirmButtonText:"确定",cancelButtonText:"取消",inputPattern:/^\d+$/,inputErrorMessage:"输入课程 ID，课程 ID 为数字"}).then((function(t){var o=t.value;e.loading=!0,he.createCourse({path_id:n,zhiye_id:a,sort:i,course_id:Number(o)}).then((function(){e.$message.success("添加课程成功"),e.getData()})).finally((function(){e.loading=!1}))}))},handleCommandCourse:function(t){var e=this,n=t.split("-"),a=Number(n[0]),i=n[1],o=n[2],s=this.paths[i],r=s.courses[o],l=r.zhiye_course.id;a||(this.loading=!0,this.$confirm("确认删除「"+r.name+"」吗？").then((function(){return he.destoryCourse(l)})).then((function(){e.paths[i].courses.splice(o,1)})).finally((function(){e.loading=!1})))}},components:{draggable:ee.a}}),ze=je,Ee=(n("3227"),Object(s["a"])(ze,$e,Se,!1,null,"b5a3146e",null)),Pe=Ee.exports,Ie=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{directives:[{name:"loading",rawName:"v-loading",value:t.loading,expression:"loading"}],staticClass:"page-content"},[n("router-link",{attrs:{to:{name:"CompanyCreate"}}},[n("el-button",{attrs:{size:"medium",type:"primary",plain:""}},[t._v("创建企业")])],1),n("el-table",{staticClass:"mt-20",attrs:{data:t.companies,size:"medium"}},[n("el-table-column",{attrs:{prop:"id",label:"id",width:"80px"}}),n("el-table-column",{attrs:{prop:"name",label:"名称"}}),n("el-table-column",{attrs:{label:"操作",width:"180px",align:"right"},scopedSlots:t._u([{key:"default",fn:function(e){return[n("el-dropdown",{attrs:{trigger:"hover"},on:{command:t.handleCommand}},[n("span",{staticClass:"icon-ctrl"},[n("i",{staticClass:"el-icon-more"})]),n("el-dropdown-menu",{attrs:{slot:"dropdown"},slot:"dropdown"},[n("el-dropdown-item",{attrs:{command:"edit-"+e.row.id+"-"+e.$index}},[t._v("编辑")]),n("el-dropdown-item",{attrs:{command:"delete-"+e.row.id+"-"+e.$index}},[t._v("删除")])],1)],1)]}}])})],1),n("el-pagination",{staticClass:"mt-20",attrs:{background:"",layout:"total, prev, pager, next, jumper","current-page":t.pagination.currentPage,"page-size":t.pagination.pageSize,total:t.pagination.total,"hide-on-single-page":!0},on:{"current-change":t.getData,"update:currentPage":function(e){return t.$set(t.pagination,"currentPage",e)},"update:current-page":function(e){return t.$set(t.pagination,"currentPage",e)}}})],1)},De=[],Oe={create:function(t){return E.post(D.company,t)},index:function(t){return E.get(D.company,t)},show:function(t){return E.get(D.companyItem(t))},edit:function(t,e){return E.put(D.companyItem(t),e)},destory:function(t){return E.delete(D.companyItem(t))}},qe=Oe,Te={data:function(){return{loading:!0,companies:[],pagination:{currentPage:1,pageSize:10,total:0}}},created:function(){this.getData()},methods:{getData:function(){var t=this,e={page_size:this.pagination.pageSize,current_page:this.pagination.currentPage};this.loading=!0,qe.index(e).then((function(e){t.companies=e.rows,t.pagination.currentPage=e.pagination.current_page,t.pagination.pageSize=e.pagination.page_size,t.pagination.total=e.pagination.total})).finally((function(){t.loading=!1}))},handleCommand:function(t){var e=t.split("-")[0],n=t.split("-")[1],a=t.split("-")[2];"edit"===e?this.$router.push({name:"CompanyEdit",params:{id:n}}):"delete"===e&&this.companyDestory(a)},companyDestory:function(t){var e=this,n=this.companies[t].id,a=this.companies[t].name;this.$confirm("确认删除企业「".concat(a,"」吗？")).then((function(){return qe.destory(n)})).then((function(){e.$message.success("删除企业成功"),e.companies.splice(t,1)})).catch((function(){}))}}},Be=Te,Ve=(n("01c2"),Object(s["a"])(Be,Ie,De,!1,null,null,null)),Fe=Ve.exports,Ne=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"page-content"},[n("div",{staticClass:"c-650"},[t._m(0),n("el-form",{attrs:{"label-position":"top","label-width":"80px",size:"mini"}},[n("el-row",{attrs:{gutter:20}},[n("el-col",{attrs:{span:12}},[n("el-form-item",{attrs:{label:"企业全称:"}},[n("el-input",{model:{value:t.company.name,callback:function(e){t.$set(t.company,"name",e)},expression:"company.name"}})],1)],1),n("el-col",{attrs:{span:12}},[n("el-form-item",{attrs:{label:"企业短称:"}},[n("el-input",{model:{value:t.company.short_name,callback:function(e){t.$set(t.company,"short_name",e)},expression:"company.short_name"}})],1)],1)],1),n("el-row",{attrs:{gutter:20}},[n("el-col",{attrs:{span:12}},[n("el-form-item",{attrs:{label:"企业口号:"}},[n("el-input",{model:{value:t.company.slogan,callback:function(e){t.$set(t.company,"slogan",e)},expression:"company.slogan"}})],1)],1),n("el-col",{attrs:{span:12}},[n("el-form-item",{attrs:{label:"社会编号:"}},[n("el-input",{model:{value:t.company.code,callback:function(e){t.$set(t.company,"code",e)},expression:"company.code"}})],1)],1)],1),n("el-row",{attrs:{gutter:20}},[n("el-col",{attrs:{span:12}},[n("el-form-item",{attrs:{label:"联系人名称:"}},[n("el-input",{model:{value:t.company.contact_name,callback:function(e){t.$set(t.company,"contact_name",e)},expression:"company.contact_name"}})],1)],1),n("el-col",{attrs:{span:12}},[n("el-form-item",{attrs:{label:"联系人电话:"}},[n("el-input",{model:{value:t.company.contact_phone,callback:function(e){t.$set(t.company,"contact_phone",e)},expression:"company.contact_phone"}})],1)],1)],1),n("el-form-item",{attrs:{label:"企业介绍："}},[n("el-input",{attrs:{type:"textarea"},model:{value:t.company.introduction,callback:function(e){t.$set(t.company,"introduction",e)},expression:"company.introduction"}})],1),n("el-form-item",{attrs:{label:"企业封面："}},[n("el-upload",{ref:"upload",staticClass:"el-image-upload",attrs:{action:"",limit:1,"file-list":t.fileList,"before-upload":t.handleBeforeUpload,accept:"image/jpg, image/jpeg, image/png"}},[t.company.image_url?t._e():n("i",{staticClass:"el-icon-plus el-uploader__icon"}),t.company.image_url?n("img",{staticClass:"el-image-upload",attrs:{src:t.company.image_url}}):t._e()])],1),n("el-form-item",[n("el-button",{attrs:{size:"medium",type:"primary",plain:""},on:{click:t.handleSubmit}},[t._v("创建")])],1)],1)],1)])},Me=[function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"sub-header"},[n("div",{staticClass:"sub-header-title"},[t._v("基本信息")])])}],Ue={data:function(){return{fileList:[],company:{name:"",short_name:"",slogan:"",code:"",introduction:"",contact_name:"",contact_phone:"",image_url:""}}},methods:{handleSubmit:function(){var t=this;this.loading=!0,qe.create(this.company).then((function(){t.$message.success("创建企业成功"),t.$router.push({name:"Company"})})).finally((function(){t.loading=!1}))},handleBeforeUpload:function(t){var e=this;return Zt.start(t).then((function(t){e.company.image_url=t.imageUrl})),Promise.reject({})}}},Re=Ue,Ae=(n("2ab9"),Object(s["a"])(Re,Ne,Me,!1,null,"ec51d53a",null)),Le=Ae.exports,Qe=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"page-content"},[n("div",{staticClass:"c-650"},[t._m(0),n("el-form",{attrs:{"label-position":"top","label-width":"80px",size:"mini"}},[n("el-row",{attrs:{gutter:20}},[n("el-col",{attrs:{span:12}},[n("el-form-item",{attrs:{label:"企业全称:"}},[n("el-input",{model:{value:t.company.name,callback:function(e){t.$set(t.company,"name",e)},expression:"company.name"}})],1)],1),n("el-col",{attrs:{span:12}},[n("el-form-item",{attrs:{label:"企业短称:"}},[n("el-input",{model:{value:t.company.short_name,callback:function(e){t.$set(t.company,"short_name",e)},expression:"company.short_name"}})],1)],1)],1),n("el-row",{attrs:{gutter:20}},[n("el-col",{attrs:{span:12}},[n("el-form-item",{attrs:{label:"企业口号:"}},[n("el-input",{model:{value:t.company.slogan,callback:function(e){t.$set(t.company,"slogan",e)},expression:"company.slogan"}})],1)],1),n("el-col",{attrs:{span:12}},[n("el-form-item",{attrs:{label:"社会编号:"}},[n("el-input",{model:{value:t.company.code,callback:function(e){t.$set(t.company,"code",e)},expression:"company.code"}})],1)],1)],1),n("el-row",{attrs:{gutter:20}},[n("el-col",{attrs:{span:12}},[n("el-form-item",{attrs:{label:"联系人名称:"}},[n("el-input",{model:{value:t.company.contact_name,callback:function(e){t.$set(t.company,"contact_name",e)},expression:"company.contact_name"}})],1)],1),n("el-col",{attrs:{span:12}},[n("el-form-item",{attrs:{label:"联系人电话:"}},[n("el-input",{model:{value:t.company.contact_phone,callback:function(e){t.$set(t.company,"contact_phone",e)},expression:"company.contact_phone"}})],1)],1)],1),n("el-form-item",{attrs:{label:"企业介绍："}},[n("el-input",{attrs:{type:"textarea"},model:{value:t.company.introduction,callback:function(e){t.$set(t.company,"introduction",e)},expression:"company.introduction"}})],1),n("el-form-item",{attrs:{label:"企业封面："}},[n("el-upload",{ref:"upload",staticClass:"el-image-upload",attrs:{action:"",limit:1,"file-list":t.fileList,"before-upload":t.handleBeforeUpload,accept:"image/jpg, image/jpeg, image/png"}},[t.company.image_url?t._e():n("i",{staticClass:"el-icon-plus el-uploader__icon"}),t.company.image_url?n("img",{staticClass:"el-image-upload",attrs:{src:t.company.image_url}}):t._e()])],1),n("el-form-item",[n("el-button",{attrs:{size:"medium",type:"primary",plain:""},on:{click:t.handleSubmit}},[t._v("保存")])],1)],1)],1)])},Ze=[function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"sub-header"},[n("div",{staticClass:"sub-header-title"},[t._v("基本信息")])])}],Je={data:function(){return{fileList:[],company:{name:"",short_name:"",slogan:"",code:"",introduction:"",contact_name:"",contact_phone:"",image_url:""}}},created:function(){var t=this,e=this.$route.params.id;qe.show(e).then((function(e){t.company=e.company}))},methods:{handleSubmit:function(){var t=this;this.loading=!0;var e=this.$route.params.id;qe.edit(e,this.company).then((function(){t.$message.success("修改企业成功"),t.$router.push({name:"Company"})})).finally((function(){t.loading=!1}))},handleBeforeUpload:function(t){var e=this;return Zt.start(t).then((function(t){e.company.image_url=t.imageUrl})),Promise.reject({})}}},Ge=Je,He=(n("7d3c"),Object(s["a"])(Ge,Qe,Ze,!1,null,"438307f0",null)),Ke=He.exports,We=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{directives:[{name:"loading",rawName:"v-loading",value:t.loading,expression:"loading"}],staticClass:"page-content"},[n("router-link",{attrs:{to:{name:"ProjectCreate"}}},[n("el-button",{attrs:{size:"medium",type:"primary",plain:""}},[t._v("创建项目")])],1),n("el-table",{staticClass:"mt-20",attrs:{data:t.projects,size:"medium"}},[n("el-table-column",{attrs:{prop:"id",label:"id",width:"80px"}}),n("el-table-column",{attrs:{prop:"name",label:"名称"}}),n("el-table-column",{attrs:{label:"操作",width:"180px",align:"right"},scopedSlots:t._u([{key:"default",fn:function(e){return[n("el-dropdown",{attrs:{trigger:"hover"},on:{command:t.handleCommand}},[n("span",{staticClass:"icon-ctrl"},[n("i",{staticClass:"el-icon-more"})]),n("el-dropdown-menu",{attrs:{slot:"dropdown"},slot:"dropdown"},[n("el-dropdown-item",{attrs:{command:"detail-"+e.row.id+"-"+e.$index}},[t._v("内容")]),n("el-dropdown-item",{attrs:{command:"edit-"+e.row.id+"-"+e.$index}},[t._v("编辑")]),n("el-dropdown-item",{attrs:{command:"delete-"+e.row.id+"-"+e.$index}},[t._v("删除")])],1)],1)]}}])})],1),n("el-pagination",{staticClass:"mt-20",attrs:{background:"",layout:"total, prev, pager, next, jumper","current-page":t.pagination.currentPage,"page-size":t.pagination.pageSize,total:t.pagination.total,"hide-on-single-page":!0},on:{"current-change":t.getData,"update:currentPage":function(e){return t.$set(t.pagination,"currentPage",e)},"update:current-page":function(e){return t.$set(t.pagination,"currentPage",e)}}})],1)},Xe=[],Ye={create:function(t){return E.post(D.project,t)},index:function(t){return E.get(D.project,t)},show:function(t){return E.get(D.projectItem(t))},edit:function(t,e){return E.put(D.projectItem(t),e)},destory:function(t){return E.delete(D.projectItem(t))},createVersion:function(t){return E.post(D.projectVersion,t)},editVersion:function(t,e){return E.put(D.projectVersionItem(t),e)},destoryVersion:function(t){return E.delete(D.projectVersionItem(t))},sortVersion:function(t){return E.post(D.projectVersionSort,t)},createStory:function(t){return E.post(D.projectStory,t)},editStory:function(t,e){return E.put(D.projectStoryItem(t),e)},destoryStory:function(t){return E.delete(D.projectStoryItem(t))},sortStory:function(t){return E.post(D.projectStorySort,t)},showTask:function(t){return E.get(D.projectTaskItem(t))},createTask:function(t){return E.post(D.projectTask,t)},editTask:function(t,e){return E.put(D.projectTaskItem(t),e)},destoryTask:function(t){return E.delete(D.projectTaskItem(t))},sortTask:function(t){return E.post(D.projectTaskSort,t)}},tn=Ye,en={data:function(){return{loading:!0,projects:[],pagination:{currentPage:1,pageSize:10,total:0}}},created:function(){this.getData()},methods:{getData:function(){var t=this,e={page_size:this.pagination.pageSize,current_page:this.pagination.currentPage};this.loading=!0,tn.index(e).then((function(e){t.projects=e.rows,t.pagination.currentPage=e.pagination.current_page,t.pagination.pageSize=e.pagination.page_size,t.pagination.total=e.pagination.total})).finally((function(){t.loading=!1}))},handleCommand:function(t){var e=t.split("-")[0],n=t.split("-")[1],a=t.split("-")[2];"edit"===e?this.$router.push({name:"ProjectEdit",params:{id:n}}):"delete"===e?this.projectDestory(a):"detail"===e&&this.$router.push({name:"ProjectItem",params:{id:n}})},projectDestory:function(t){var e=this,n=this.projects[t].id,a=this.projects[t].name;this.$confirm("确认删除项目「".concat(a,"」吗？")).then((function(){return tn.destory(n)})).then((function(){e.$message.success("删除项目成功"),e.projects.splice(t,1)})).catch((function(){}))}}},nn=en,an=(n("14ed"),Object(s["a"])(nn,We,Xe,!1,null,null,null)),on=an.exports,sn=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{directives:[{name:"loading",rawName:"v-loading",value:t.loading,expression:"loading"}],staticClass:"page-content"},[n("h2",{staticClass:"project-title"},[t._v(t._s(t.project.name))]),n("div",{staticClass:"project-description"},[t._v(t._s(t.project.description))]),n("el-divider"),n("el-row",{attrs:{gutter:40}},[n("el-col",{attrs:{lg:8}},[n("h3",[t._v("版本")]),n("div",{staticClass:"version-container"},[n("draggable",{attrs:{group:"version",handle:".version-item-draggable"},on:{change:t.handleVersionSort},model:{value:t.versions,callback:function(e){t.versions=e},expression:"versions"}},t._l(t.versions,(function(e,a){return n("div",{key:e.id,class:["version-item",{active:t.versionId===e.id}],on:{click:function(n){return t.handleVersionCheckout(e.id,a)}}},[n("div",{staticClass:"version-item-title"},[n("i",{staticClass:"el-icon-rank version-item-draggable"}),n("span",[t._v(t._s(e.name))]),n("div",{staticClass:"version-item-ctrl"},[n("el-dropdown",{attrs:{trigger:"hover"},on:{command:t.handleVersionCommand}},[n("span",{staticClass:"icon-ctrl"},[n("i",{staticClass:"el-icon-more"})]),n("el-dropdown-menu",{attrs:{slot:"dropdown"},slot:"dropdown"},[n("el-dropdown-item",{attrs:{command:"1-"+a}},[t._v("编辑")]),n("el-dropdown-item",{attrs:{command:"0-"+a}},[t._v("删除")])],1)],1)],1)])])})),0),n("div",{staticClass:"version-item-create",on:{click:t.handleVersionCreate}},[t._v(" 添加版本 "),n("i",{staticClass:"el-icon-circle-plus"})])],1)]),n("el-col",{attrs:{lg:16}},[n("h3",[t._v("故事")]),t.versionId?n("div",{staticClass:"story-container"},[n("draggable",{attrs:{group:"story",handle:".story-item-draggable"},on:{change:t.handleStorySort},model:{value:t.stories,callback:function(e){t.stories=e},expression:"stories"}},t._l(t.stories,(function(e,a){return n("div",{key:e.id,staticClass:"story-item"},[n("div",{staticClass:"story-item-title"},[n("i",{staticClass:"el-icon-rank story-item-draggable"}),n("span",[t._v(t._s(e.name))]),n("div",{staticClass:"story-item-ctrl"},[n("el-dropdown",{attrs:{trigger:"hover"},on:{command:t.handleStoryCommand}},[n("span",{staticClass:"icon-ctrl"},[n("i",{staticClass:"el-icon-more"})]),n("el-dropdown-menu",{attrs:{slot:"dropdown"},slot:"dropdown"},[n("el-dropdown-item",{attrs:{command:"1-"+a}},[t._v("编辑")]),n("el-dropdown-item",{attrs:{command:"0-"+a}},[t._v("删除")])],1)],1)],1)]),n("div",{staticClass:"story-item-task"},[n("draggable",{attrs:{handle:".task-item-draggable",group:"task"},model:{value:e.tasks,callback:function(n){t.$set(e,"tasks",n)},expression:"story.tasks"}},t._l(e.tasks,(function(e,i){return n("div",{key:e.id,staticClass:"task-item"},[n("div",{staticClass:"task-item-text"},[n("i",{staticClass:"el-icon-rank task-item-draggable"}),n("span",[t._v(t._s(e.name))]),n("div",{staticClass:"task-item-ctrl"},[n("el-dropdown",{attrs:{trigger:"hover"},on:{command:t.handleTaskCommand}},[n("span",{staticClass:"icon-ctrl"},[n("i",{staticClass:"el-icon-more"})]),n("el-dropdown-menu",{attrs:{slot:"dropdown"},slot:"dropdown"},[n("el-dropdown-item",{attrs:{command:"1-"+a+"-"+i}},[t._v("内容")]),n("el-dropdown-item",{attrs:{command:"0-"+a+"-"+i}},[t._v("删除")])],1)],1)],1)])])})),0),n("div",{staticClass:"task-item",on:{click:function(e){return t.handleAddtask(a)}}},[n("div",{staticClass:"task-item-create"},[t._v(" 添加任务 "),n("i",{staticClass:"el-icon-circle-plus"})])])],1)])})),0),n("div",{staticClass:"story-item-create",on:{click:t.handleStoryCreate}},[t._v(" 添加故事 "),n("i",{staticClass:"el-icon-circle-plus"})])],1):t._e(),t.versionId?t._e():n("div",[t._v("👈 请点击选择版本")])])],1),n("el-drawer",{attrs:{visible:t.drawerVisible,direction:"rtl",size:"50%","before-close":t.handleCloseDrawer},on:{"update:visible":function(e){t.drawerVisible=e}}},[n("div",{staticClass:"task-content"},[n("el-form",{attrs:{"label-position":"top",size:"mini",model:t.task}},[n("el-form-item",{attrs:{label:"任务名称："}},[n("el-input",{model:{value:t.task.name,callback:function(e){t.$set(t.task,"name",e)},expression:"task.name"}})],1),n("el-row",{attrs:{gutter:40}},[n("el-col",{attrs:{lg:12}},[n("el-form-item",{attrs:{label:"任务难度："}},[n("el-select",{attrs:{placeholder:"请选择难度"},model:{value:t.task.level,callback:function(e){t.$set(t.task,"level",e)},expression:"task.level"}},[n("el-option",{attrs:{label:"入门",value:1}}),n("el-option",{attrs:{label:"初级",value:2}}),n("el-option",{attrs:{label:"中级",value:3}}),n("el-option",{attrs:{label:"高级",value:4}})],1)],1)],1),n("el-col",{attrs:{lg:12}},[n("el-form-item",{attrs:{label:"任务平台："}},[n("el-select",{attrs:{placeholder:"请选择平台"},model:{value:t.task.platform,callback:function(e){t.$set(t.task,"platform",e)},expression:"task.platform"}},[n("el-option",{attrs:{label:"API",value:1}}),n("el-option",{attrs:{label:"前台",value:2}}),n("el-option",{attrs:{label:"后台",value:3}}),n("el-option",{attrs:{label:"小程序",value:4}})],1)],1)],1)],1),n("el-form-item",{attrs:{label:"课任务内容："}},[n("mavon-editor",{ref:"md",staticClass:"md",attrs:{toolbars:t.markdownOption,subfield:!1},on:{imgAdd:t.handleImgAdd},model:{value:t.task.content,callback:function(e){t.$set(t.task,"content",e)},expression:"task.content"}})],1),n("el-form-item",[n("el-button",{attrs:{size:"medium",type:"primary"},on:{click:t.handleTaskSave}},[t._v("保存")])],1)],1)],1)])],1)},rn=[],ln=(n("7db0"),{bold:!0,mark:!0,quote:!0,ol:!0,ul:!0,link:!0,imagelink:!0,code:!0,table:!0}),cn={components:{draggable:ee.a,mavonEditor:Yt["mavonEditor"]},data:function(){return{markdownOption:ln,loading:!0,project:{name:"",description:""},versionId:null,versionIndex:null,versions:[],stories:[],drawerVisible:!1,taskId:null,task:{name:"",content:"",level:"",platform:""}}},created:function(){this.getData()},watch:{versionId:function(t){var e=this.versions.find((function(e){return e.id===t}));this.stories=e.stories}},methods:{handleImgAdd:function(t,e){var n=this;Zt.start(e).then((function(e){n.$refs.md.$img2Url(t,e.imageUrl)}))},getData:function(){var t=this,e=this.$route.params.id;tn.show(e).then((function(e){t.project=e.project,t.versions=e.project.versions,t.versions.length&&(t.versionId=t.versions[0].id)})).finally((function(){t.loading=!1}))},handleVersionCheckout:function(t,e){this.versionId=t,this.versionIndex=e},handleVersionSort:function(){var t=this,e=this.versions.map((function(t){return t.id}));tn.sortVersion({versions:e}).then((function(){t.$message.success("版本排序成功")}))},handleVersionCreate:function(){var t=this,e=Number(this.$route.params.id),n=this.versions.length+1;this.$prompt("请输入版本名称","新版本",{confirmButtonText:"确定",cancelButtonText:"取消",inputPattern:/\S/,inputErrorMessage:"输入不能为空"}).then((function(a){var i=a.value;t.loading=!0,tn.createVersion({sort:n,project_id:e,name:i}).then((function(e){t.$message.success("添加章节成功"),t.versions.push({id:e.id,name:i,stories:[],sort:n})})).finally((function(){t.loading=!1}))}))},handleVersionCommand:function(t){var e=this,n=t.split("-"),a=n[0],i=n[1],o=this.versions[i];"1"===a?this.$prompt("请编辑章名称","编辑章",{confirmButtonText:"确定",cancelButtonText:"取消",inputPattern:/\S/,inputErrorMessage:"输入不能为空",inputValue:o.name}).then((function(t){var n=t.value;e.handleVersionEdit(o.id,{name:n},(function(){e.versions[i].name=n}))})):this.handleVersionDestory(o.id,i)},handleVersionEdit:function(t,e,n){var a=this;this.loading=!0,tn.editVersion(t,e).then((function(){a.$message.success("编辑版本成功"),n()})).finally((function(){a.loading=!1}))},handleVersionDestory:function(t,e){var n=this;this.$confirm("确认删除「"+name+"」吗？").then((function(){return n.loading=!0,n.loading=!0,tn.destoryVersion(t)})).then((function(){n.$message.success("版本删除成功"),n.versions.splice(e,1)})).finally((function(){n.loading=!1}))},handleStoryCreate:function(){var t=this,e=Number(this.$route.params.id),n=this.versionId,a=this.versionIndex,i=this.stories.length+1;this.$prompt("请输入故事名称","新故事",{confirmButtonText:"确定",cancelButtonText:"取消",inputPattern:/\S/,inputErrorMessage:"输入不能为空"}).then((function(o){var s=o.value;t.loading=!0,tn.createStory({sort:i,project_id:e,version_id:n,name:s}).then((function(e){t.$message.success("添加故事成功"),t.versions[a].stories.push({sort:i,id:e.id,name:s,tasks:[]})})).finally((function(){t.loading=!1}))}))},handleStorySort:function(){var t=this,e=this.stories.map((function(t){return t.id}));tn.sortStory({stories:e}).then((function(){t.$message.success("故事排序成功")}))},handleStoryCommand:function(t){var e=this,n=t.split("-"),a=n[0],i=n[1],o=this.stories[i];"1"===a?this.$prompt("请编辑章名称","编辑章",{confirmButtonText:"确定",cancelButtonText:"取消",inputPattern:/\S/,inputErrorMessage:"输入不能为空",inputValue:o.name}).then((function(t){var n=t.value;e.handleStoryEdit(o.id,{name:n},(function(){e.stories[i].name=n}))})):this.handleStoryDestory(o.id,i)},handleStoryEdit:function(t,e,n){var a=this;this.loading=!0,tn.editStory(t,e).then((function(){a.$message.success("编辑故事成功"),n()})).finally((function(){a.loading=!1}))},handleStoryDestory:function(t,e){var n=this,a=this.stories[e].name;this.$confirm("确认删除「"+a+"」吗？").then((function(){return n.loading=!0,tn.destoryStory(t)})).then((function(){n.$message.success("故事删除成功"),n.stories.splice(e,1)})).finally((function(){n.loading=!1}))},handleAddtask:function(t){var e=this,n=Number(this.$route.params.id),a=this.versionId,i=this.stories[t],o=i.id,s=i.tasks.length+1;this.$prompt("请输入任务名称","新任务",{confirmButtonText:"确定",cancelButtonText:"取消",inputPattern:/\S/,inputErrorMessage:"输入不能为空"}).then((function(i){var r=i.value;e.loading=!0,tn.createTask({sort:s,project_id:n,version_id:a,story_id:o,name:r}).then((function(n){e.stories[t].tasks.push({id:n.id,name:r,sort:s}),e.$message.success("添加任务成功")})).finally((function(){e.loading=!1}))}))},handleTaskCommand:function(t){var e=t.split("-"),n=e[0],a=e[1],i=e[2],o=this.stories[a],s=o.tasks[i].id;"1"===n?this.handleOpenDrawer(s):this.handleTaskDestory(s,a,i)},handleOpenDrawer:function(t){var e=this;this.loading=!0,tn.showTask(t).then((function(n){e.drawerVisible=!0,e.task=n.task,e.taskId=t})).finally((function(){e.loading=!1}))},handleTaskDestory:function(t,e,n){var a=this,i=this.stories[e].tasks[n].name;this.$confirm("确认删除「"+i+"」吗？").then((function(){return a.loading=!0,tn.destoryTask(t)})).then((function(){a.$message.success("任务删除成功"),a.stories[e].tasks.splice(n,1)})).finally((function(){a.loading=!1}))},handleCloseDrawer:function(t){this.$confirm("确认关闭？").then((function(){t()})).catch((function(){}))},handleTaskSave:function(){var t=this,e=this.taskId,n=this.task;this.loading=!0,tn.editTask(e,n).then((function(){t.$message.success("保存成功"),t.drawerVisible=!1})).finally((function(){t.loading=!1}))}}},un=cn,dn=(n("fcd9"),Object(s["a"])(un,sn,rn,!1,null,"4d2a6b9c",null)),mn=dn.exports,pn=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"page-content"},[n("div",{staticClass:"c-650"},[t._m(0),n("el-form",{attrs:{"label-position":"top","label-width":"80px",size:"mini"}},[n("el-form-item",{attrs:{label:"项目名称："}},[n("el-input",{model:{value:t.project.name,callback:function(e){t.$set(t.project,"name",e)},expression:"project.name"}})],1),n("el-form-item",{attrs:{label:"项目介绍："}},[n("el-input",{attrs:{type:"textarea"},model:{value:t.project.description,callback:function(e){t.$set(t.project,"description",e)},expression:"project.description"}})],1),n("el-form-item",{attrs:{label:"项目封面："}},[n("el-upload",{ref:"upload",staticClass:"el-image-upload",attrs:{action:"",limit:1,"file-list":t.fileList,"before-upload":t.handleBeforeUpload,accept:"image/jpg, image/jpeg, image/png"}},[t.project.image_url?t._e():n("i",{staticClass:"el-icon-plus el-uploader__icon"}),t.project.image_url?n("img",{staticClass:"el-image-upload",attrs:{src:t.project.image_url}}):t._e()])],1),n("el-form-item",[n("el-button",{attrs:{size:"medium",type:"primary",plain:""},on:{click:t.handleSubmit}},[t._v("创建")])],1)],1)],1)])},hn=[function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"sub-header"},[n("div",{staticClass:"sub-header-title"},[t._v("基本信息")])])}],fn={data:function(){return{fileList:[],project:{name:"",description:"",image_url:""}}},created:function(){this.getData()},methods:{handleSubmit:function(){var t=this;this.loading=!0,tn.create(this.project).then((function(){t.$message.success("创建项目成功"),t.$router.push({name:"Project"})})).finally((function(){t.loading=!1}))},handleBeforeUpload:function(t){var e=this;return Zt.start(t).then((function(t){e.project.image_url=t.imageUrl})),Promise.reject({})}}},gn=fn,vn=(n("47dd"),Object(s["a"])(gn,pn,hn,!1,null,"29800090",null)),bn=vn.exports,_n=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"page-content"},[n("div",{staticClass:"c-650"},[t._m(0),n("el-form",{attrs:{"label-position":"top","label-width":"80px",size:"mini"}},[n("el-form-item",{attrs:{label:"项目名称："}},[n("el-input",{model:{value:t.project.name,callback:function(e){t.$set(t.project,"name",e)},expression:"project.name"}})],1),n("el-form-item",{attrs:{label:"项目介绍："}},[n("el-input",{attrs:{type:"textarea"},model:{value:t.project.description,callback:function(e){t.$set(t.project,"description",e)},expression:"project.description"}})],1),n("el-form-item",{attrs:{label:"项目封面："}},[n("el-upload",{ref:"upload",staticClass:"el-image-upload",attrs:{action:"",limit:1,"file-list":t.fileList,"before-upload":t.handleBeforeUpload,accept:"image/jpg, image/jpeg, image/png"}},[t.project.image_url?t._e():n("i",{staticClass:"el-icon-plus el-uploader__icon"}),t.project.image_url?n("img",{staticClass:"el-image-upload",attrs:{src:t.project.image_url}}):t._e()])],1),n("el-form-item",[n("el-button",{attrs:{size:"medium",type:"primary",plain:""},on:{click:t.handleSubmit}},[t._v("保存")])],1)],1)],1)])},yn=[function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"sub-header"},[n("div",{staticClass:"sub-header-title"},[t._v("基本信息")])])}],kn={data:function(){return{fileList:[],project:{name:"",description:"",image_url:""}}},created:function(){this.getData()},methods:{getData:function(){var t=this,e=this.$route.params.id;tn.show(e).then((function(e){t.project=e.project})).finally((function(){t.loading=!1}))},handleSubmit:function(){var t=this,e=this.$route.params.id;this.loading=!0,tn.edit(e,this.project).then((function(){t.$message.success("项目编辑成功"),t.$router.push({name:"Project"})})).finally((function(){t.loading=!1}))},handleBeforeUpload:function(t){var e=this;return Zt.start(t).then((function(t){e.project.image_url=t.imageUrl})),Promise.reject({})}}},wn=kn,Cn=(n("b56f"),Object(s["a"])(wn,_n,yn,!1,null,"10904834",null)),xn=Cn.exports,$n=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{directives:[{name:"loading",rawName:"v-loading",value:t.loading,expression:"loading"}],staticClass:"page-content"},[n("router-link",{attrs:{to:{name:"StackCreate"}}},[n("el-button",{attrs:{size:"medium",type:"primary",plain:""}},[t._v("创建")])],1),n("el-table",{staticClass:"mt-20",attrs:{data:t.stacks,size:"medium"}},[n("el-table-column",{attrs:{prop:"id",label:"id",width:"80px"}}),n("el-table-column",{attrs:{prop:"name",label:"名称"}}),n("el-table-column",{attrs:{label:"操作",width:"180px",align:"right"},scopedSlots:t._u([{key:"default",fn:function(e){return[n("el-dropdown",{attrs:{trigger:"hover"},on:{command:t.handleCommand}},[n("span",{staticClass:"icon-ctrl"},[n("i",{staticClass:"el-icon-more"})]),n("el-dropdown-menu",{attrs:{slot:"dropdown"},slot:"dropdown"},[n("el-dropdown-item",{attrs:{command:"edit-"+e.row.id+"-"+e.$index}},[t._v("编辑")]),n("el-dropdown-item",{attrs:{command:"delete-"+e.row.id+"-"+e.$index}},[t._v("删除")])],1)],1)]}}])})],1),n("el-pagination",{staticClass:"mt-20",attrs:{background:"",layout:"total, prev, pager, next, jumper","current-page":t.pagination.currentPage,"page-size":t.pagination.pageSize,total:t.pagination.total,"hide-on-single-page":!0},on:{"current-change":t.getData,"update:currentPage":function(e){return t.$set(t.pagination,"currentPage",e)},"update:current-page":function(e){return t.$set(t.pagination,"currentPage",e)}}})],1)},Sn=[],jn={create:function(t){return E.post(D.stack,t)},index:function(t){return E.get(D.stack,t)},show:function(t){return E.get(D.stackItem(t))},edit:function(t,e){return E.put(D.stackItem(t),e)},destory:function(t){return E.delete(D.stackItem(t))}},zn=jn,En={data:function(){return{loading:!0,stacks:[],pagination:{currentPage:1,pageSize:10,total:0}}},created:function(){this.getData()},methods:{getData:function(){var t=this,e={page_size:this.pagination.pageSize,current_page:this.pagination.currentPage};this.loading=!0,zn.index(e).then((function(e){t.stacks=e.rows,t.pagination.currentPage=e.pagination.current_page,t.pagination.pageSize=e.pagination.page_size,t.pagination.total=e.pagination.total})).finally((function(){t.loading=!1}))},handleCommand:function(t){var e=t.split("-")[0],n=t.split("-")[1],a=t.split("-")[2];"edit"===e?this.$router.push({name:"StackEdit",params:{id:n}}):"delete"===e&&this.StackDestory(a)},StackDestory:function(t){var e=this,n=this.stacks[t].id,a=this.stacks[t].name;this.$confirm("确认删除企业「".concat(a,"」吗？")).then((function(){return zn.destory(n)})).then((function(){e.$message.success("删除企业成功"),e.stacks.splice(t,1)})).catch((function(){}))}}},Pn=En,In=(n("3885"),Object(s["a"])(Pn,$n,Sn,!1,null,null,null)),Dn=In.exports,On=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"page-content"},[n("div",{staticClass:"c-650"},[t._m(0),n("el-form",{attrs:{"label-position":"top","label-width":"80px",size:"mini"}},[n("el-row",{attrs:{gutter:20}},[n("el-col",{attrs:{span:12}},[n("el-form-item",{attrs:{label:"技能全称:"}},[n("el-input",{model:{value:t.stack.name,callback:function(e){t.$set(t.stack,"name",e)},expression:"stack.name"}})],1)],1),n("el-col",{attrs:{span:12}},[n("el-form-item",{attrs:{label:"技能标示:"}},[n("el-input",{model:{value:t.stack.slug,callback:function(e){t.$set(t.stack,"slug",e)},expression:"stack.slug"}})],1)],1)],1),n("el-form-item",{attrs:{label:"技能介绍："}},[n("el-input",{attrs:{type:"textarea"},model:{value:t.stack.description,callback:function(e){t.$set(t.stack,"description",e)},expression:"stack.description"}})],1),n("el-form-item",{attrs:{label:"技能封面："}},[n("el-upload",{ref:"upload",staticClass:"el-image-upload",attrs:{action:"",limit:1,"file-list":t.fileList,"before-upload":t.handleBeforeUpload,accept:"image/jpg, image/jpeg, image/png"}},[t.stack.image_url?t._e():n("i",{staticClass:"el-icon-plus el-uploader__icon"}),t.stack.image_url?n("img",{staticClass:"el-image-upload",attrs:{src:t.stack.image_url}}):t._e()])],1),n("el-form-item",[n("el-button",{attrs:{size:"medium",type:"primary",plain:""},on:{click:t.handleSubmit}},[t._v("创建")])],1)],1)],1)])},qn=[function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"sub-header"},[n("div",{staticClass:"sub-header-title"},[t._v("基本信息")])])}],Tn={data:function(){return{fileList:[],stack:{name:"",slug:"",description:"",image_url:""}}},methods:{handleSubmit:function(){var t=this;this.loading=!0,zn.create(this.stack).then((function(){t.$message.success("创建技能成功"),t.$router.push({name:"Stack"})})).finally((function(){t.loading=!1}))},handleBeforeUpload:function(t){var e=this;return Zt.start(t).then((function(t){e.stack.image_url=t.imageUrl})),Promise.reject({})}}},Bn=Tn,Vn=(n("0407"),Object(s["a"])(Bn,On,qn,!1,null,"5de3fb20",null)),Fn=Vn.exports,Nn=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"page-content"},[n("div",{staticClass:"c-650"},[t._m(0),n("el-form",{attrs:{"label-position":"top","label-width":"80px",size:"mini"}},[n("el-row",{attrs:{gutter:20}},[n("el-col",{attrs:{span:12}},[n("el-form-item",{attrs:{label:"技能全称:"}},[n("el-input",{model:{value:t.stack.name,callback:function(e){t.$set(t.stack,"name",e)},expression:"stack.name"}})],1)],1),n("el-col",{attrs:{span:12}},[n("el-form-item",{attrs:{label:"技能标示:"}},[n("el-input",{model:{value:t.stack.slug,callback:function(e){t.$set(t.stack,"slug",e)},expression:"stack.slug"}})],1)],1)],1),n("el-form-item",{attrs:{label:"技能介绍："}},[n("el-input",{attrs:{type:"textarea"},model:{value:t.stack.description,callback:function(e){t.$set(t.stack,"description",e)},expression:"stack.description"}})],1),n("el-form-item",{attrs:{label:"技能封面："}},[n("el-upload",{ref:"upload",staticClass:"el-image-upload",attrs:{action:"",limit:1,"file-list":t.fileList,"before-upload":t.handleBeforeUpload,accept:"image/jpg, image/jpeg, image/png"}},[t.stack.image_url?t._e():n("i",{staticClass:"el-icon-plus el-uploader__icon"}),t.stack.image_url?n("img",{staticClass:"el-image-upload",attrs:{src:t.stack.image_url}}):t._e()])],1),n("el-form-item",[n("el-button",{attrs:{size:"medium",type:"primary",plain:""},on:{click:t.handleSubmit}},[t._v("保存")])],1)],1)],1)])},Mn=[function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"sub-header"},[n("div",{staticClass:"sub-header-title"},[t._v("基本信息")])])}],Un={data:function(){return{fileList:[],stack:{name:"",slug:"",description:"",image_url:""}}},created:function(){this.getData()},methods:{getData:function(){var t=this,e=this.$route.params.id;zn.show(e).then((function(e){t.stack=e.stack}))},handleSubmit:function(){var t=this;this.loading=!0;var e=this.$route.params.id;zn.edit(e,this.stack).then((function(){t.$message.success("编辑技能成功"),t.$router.push({name:"Stack"})})).finally((function(){t.loading=!1}))},handleBeforeUpload:function(t){var e=this;return Zt.start(t).then((function(t){e.stack.image_url=t.imageUrl})),Promise.reject({})}}},Rn=Un,An=(n("14d6"),Object(s["a"])(Rn,Nn,Mn,!1,null,"c35e2546",null)),Ln=An.exports,Qn=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{directives:[{name:"loading",rawName:"v-loading",value:t.loading,expression:"loading"}],staticClass:"page-content"},[n("router-link",{attrs:{to:{name:"SkillQuestionCreate"}}},[n("el-button",{attrs:{size:"medium",type:"primary",plain:""}},[t._v("创建")])],1),n("el-table",{staticClass:"mt-20",attrs:{data:t.questions,size:"medium"}},[n("el-table-column",{attrs:{prop:"id",label:"id",width:"80px"}}),n("el-table-column",{attrs:{prop:"stem",label:"名称"}}),n("el-table-column",{attrs:{label:"技能"},scopedSlots:t._u([{key:"default",fn:function(e){return[n("span",[t._v(t._s(e.row.stack?e.row.stack.name:"-"))])]}}])}),n("el-table-column",{attrs:{label:"操作",width:"180px",align:"right"},scopedSlots:t._u([{key:"default",fn:function(e){return[n("el-dropdown",{attrs:{trigger:"hover"},on:{command:t.handleCommand}},[n("span",{staticClass:"icon-ctrl"},[n("i",{staticClass:"el-icon-more"})]),n("el-dropdown-menu",{attrs:{slot:"dropdown"},slot:"dropdown"},[n("el-dropdown-item",{attrs:{command:"edit-"+e.row.id+"-"+e.$index}},[t._v("编辑")]),n("el-dropdown-item",{attrs:{command:"delete-"+e.row.id+"-"+e.$index}},[t._v("删除")])],1)],1)]}}])})],1),n("el-pagination",{staticClass:"mt-20",attrs:{background:"",layout:"total, prev, pager, next, jumper","current-page":t.pagination.currentPage,"page-size":t.pagination.pageSize,total:t.pagination.total,"hide-on-single-page":!0},on:{"current-change":t.getData,"update:currentPage":function(e){return t.$set(t.pagination,"currentPage",e)},"update:current-page":function(e){return t.$set(t.pagination,"currentPage",e)}}})],1)},Zn=[],Jn={create:function(t){return E.post(D.skillQuestion,t)},index:function(t){return E.get(D.skillQuestion,t)},show:function(t){return E.get(D.skillQuestionItem(t))},edit:function(t,e){return E.put(D.skillQuestionItem(t),e)},destory:function(t){return E.delete(D.skillQuestionItem(t))}},Gn=Jn,Hn={data:function(){return{loading:!0,questions:[],pagination:{currentPage:1,pageSize:10,total:0}}},created:function(){this.getData()},methods:{getData:function(){var t=this,e={page_size:this.pagination.pageSize,current_page:this.pagination.currentPage};this.loading=!0,Gn.index(e).then((function(e){t.questions=e.rows,t.pagination.currentPage=e.pagination.current_page,t.pagination.pageSize=e.pagination.page_size,t.pagination.total=e.pagination.total})).finally((function(){t.loading=!1}))},handleCommand:function(t){var e=t.split("-")[0],n=t.split("-")[1],a=t.split("-")[2];"edit"===e?this.$router.push({name:"SkillQuestionEdit",params:{id:n}}):"delete"===e&&this.StackDestory(a)},StackDestory:function(t){var e=this,n=this.questions[t].id,a=this.questions[t].stem;this.$confirm("确认删除题目「".concat(a,"」吗？")).then((function(){return Gn.destory(n)})).then((function(){e.$message.success("删除题目成功"),e.questions.splice(t,1)})).catch((function(){}))}}},Kn=Hn,Wn=(n("0295"),Object(s["a"])(Kn,Qn,Zn,!1,null,null,null)),Xn=Wn.exports,Yn=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{directives:[{name:"loading",rawName:"v-loading",value:t.loading,expression:"loading"}],staticClass:"page-content"},[n("div",{staticClass:"c-650"},[t._m(0),n("el-form",{attrs:{"label-position":"top","label-width":"80px",size:"mini"}},[n("el-form-item",{attrs:{label:"题目："}},[n("el-input",{attrs:{type:"textarea"},model:{value:t.question.stem,callback:function(e){t.$set(t.question,"stem",e)},expression:"question.stem"}})],1),n("el-row",{attrs:{gutter:20}},[n("el-col",{attrs:{span:12}},[n("el-form-item",{attrs:{label:"技能："}},[n("el-select",{attrs:{placeholder:"请选择技能分类"},model:{value:t.question.stack_id,callback:function(e){t.$set(t.question,"stack_id",e)},expression:"question.stack_id"}},t._l(t.stacks,(function(t){return n("el-option",{key:t.id,attrs:{label:t.name,value:t.id}})})),1)],1)],1),n("el-col",{attrs:{span:12}},[n("el-form-item",{attrs:{label:"等级："}},[n("el-select",{attrs:{placeholder:"请选择题目难度"},model:{value:t.question.level,callback:function(e){t.$set(t.question,"level",e)},expression:"question.level"}},t._l(t.levelOption,(function(t,e){return n("el-option",{key:e,attrs:{label:t,value:e}})})),1)],1)],1)],1),n("el-form-item",{attrs:{label:"选项："}},[n("el-row",{attrs:{gutter:20}},t._l(t.question.option,(function(e,a){return n("div",{key:a},[n("el-col",{staticStyle:{"margin-bottom":"8px"},attrs:{span:22}},[n("el-input",{attrs:{type:"textarea"},model:{value:t.question.option[a],callback:function(e){t.$set(t.question.option,a,e)},expression:"question.option[index]"}})],1),n("el-col",{attrs:{span:2}},[n("el-button",{attrs:{size:"mini",plain:"",type:"danger"},on:{click:function(e){return t.handleOptionDestory(a)}}},[t._v("x")])],1)],1)})),0),n("el-button",{directives:[{name:"show",rawName:"v-show",value:t.showAddButton,expression:"showAddButton"}],staticStyle:{"margin-top":"8px"},attrs:{size:"mini",plain:""},on:{click:t.handleOptionCreate}},[t._v("+")])],1),n("el-form-item",{attrs:{label:"答案："}},[n("el-radio-group",{model:{value:t.question.currect,callback:function(e){t.$set(t.question,"currect",e)},expression:"question.currect"}},t._l(t.question.option,(function(e,a){return n("el-radio",{key:a,attrs:{label:a}},[t._v(t._s(t.currectOption[a]))])})),1)],1),n("el-form-item",[n("el-button",{attrs:{size:"medium",type:"primary",plain:""},on:{click:t.handleSubmit}},[t._v("创建")])],1)],1)],1)])},ta=[function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"sub-header"},[n("div",{staticClass:"sub-header-title"},[t._v("基本信息")])])}],ea={data:function(){return{loading:!0,fileList:[],stacks:[],question:{stem:"",stack_id:null,level:null,option:["","","",""],current:""},currectOption:{0:"A",1:"B",2:"C",3:"D"},levelOption:{1:"入门",2:"初阶",3:"进阶",4:"高阶"}}},computed:{showAddButton:function(){return this.question.option.length<4}},created:function(){this.getData()},methods:{getData:function(){var t=this,e={page_size:50,current_page:1};this.loading=!0,zn.index(e).then((function(e){t.stacks=e.rows})).finally((function(){t.loading=!1}))},handleOptionCreate:function(){this.question.option.push("")},handleOptionDestory:function(t){this.question.option.splice(t,1)},handleSubmit:function(){var t=this;this.loading=!0;var e=Object(h["a"])({},this.question);e.level=Number(this.question.level),e.option=JSON.stringify(this.question.option),Gn.create(e).then((function(){t.$message.success("创建技能成功"),t.$router.push({name:"SkillQuestion"})})).finally((function(){t.loading=!1}))}}},na=ea,aa=(n("193e"),Object(s["a"])(na,Yn,ta,!1,null,"2a78f9ce",null)),ia=aa.exports,oa=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{directives:[{name:"loading",rawName:"v-loading",value:t.loading,expression:"loading"}],staticClass:"page-content"},[n("div",{staticClass:"c-650"},[t._m(0),n("el-form",{attrs:{"label-position":"top","label-width":"80px",size:"mini"}},[n("el-form-item",{attrs:{label:"题目："}},[n("el-input",{attrs:{type:"textarea"},model:{value:t.question.stem,callback:function(e){t.$set(t.question,"stem",e)},expression:"question.stem"}})],1),n("el-row",{attrs:{gutter:20}},[n("el-col",{attrs:{span:12}},[n("el-form-item",{attrs:{label:"技能："}},[n("el-select",{attrs:{placeholder:"请选择技能分类"},model:{value:t.question.stack_id,callback:function(e){t.$set(t.question,"stack_id",e)},expression:"question.stack_id"}},t._l(t.stacks,(function(t){return n("el-option",{key:t.id,attrs:{label:t.name,value:t.id}})})),1)],1)],1),n("el-col",{attrs:{span:12}},[n("el-form-item",{attrs:{label:"等级："}},[n("el-select",{attrs:{placeholder:"请选择题目难度"},model:{value:t.question.level,callback:function(e){t.$set(t.question,"level",e)},expression:"question.level"}},t._l(t.levelOption,(function(t,e){return n("el-option",{key:e,attrs:{label:t,value:e}})})),1)],1)],1)],1),n("el-form-item",{attrs:{label:"选项："}},[n("el-row",{attrs:{gutter:20}},t._l(t.question.option,(function(e,a){return n("div",{key:a},[n("el-col",{staticStyle:{"margin-bottom":"8px"},attrs:{span:22}},[n("el-input",{attrs:{type:"textarea"},model:{value:t.question.option[a],callback:function(e){t.$set(t.question.option,a,e)},expression:"question.option[index]"}})],1),n("el-col",{attrs:{span:2}},[n("el-button",{attrs:{size:"mini",plain:"",type:"danger"},on:{click:function(e){return t.handleOptionDestory(a)}}},[t._v("x")])],1)],1)})),0),n("el-button",{directives:[{name:"show",rawName:"v-show",value:t.showAddButton,expression:"showAddButton"}],staticStyle:{"margin-top":"8px"},attrs:{size:"mini",plain:""},on:{click:t.handleOptionCreate}},[t._v("+")])],1),n("el-form-item",{attrs:{label:"答案："}},[n("el-radio-group",{model:{value:t.question.currect,callback:function(e){t.$set(t.question,"currect",e)},expression:"question.currect"}},t._l(t.question.option,(function(e,a){return n("el-radio",{key:a,attrs:{label:a}},[t._v(t._s(t.currectOption[a]))])})),1)],1),n("el-form-item",[n("el-button",{attrs:{size:"medium",type:"primary",plain:""},on:{click:t.handleSubmit}},[t._v("保存")])],1)],1)],1)])},sa=[function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"sub-header"},[n("div",{staticClass:"sub-header-title"},[t._v("基本信息")])])}],ra=n("3835"),la={data:function(){return{loading:!0,fileList:[],stacks:[],question:{stem:"",stack_id:null,level:null,option:[],current:""},currectOption:{0:"A",1:"B",2:"C",3:"D"},levelOption:{1:"入门",2:"初阶",3:"进阶",4:"高阶"}}},computed:{showAddButton:function(){return(this.question.option||[]).length<4}},created:function(){this.getData()},methods:{getData:function(){var t=this,e={page_size:50,current_page:1};this.loading=!0;var n=this.$route.params.id;Promise.all([zn.index(e),Gn.show(n)]).then((function(e){var n=Object(ra["a"])(e,2),a=n[0],i=n[1];t.stacks=a.rows;var o=Object(h["a"])({},i.question);o.option=o.option?JSON.parse(o.option):[],t.question=o})).finally((function(){t.loading=!1}))},handleOptionCreate:function(){this.question.option.push("")},handleOptionDestory:function(t){this.question.option.splice(t,1)},handleSubmit:function(){var t=this;this.loading=!0;var e=Object(h["a"])({},this.question);e.level=Number(this.question.level),e.option=JSON.stringify(this.question.option);var n=this.$route.params.id;Gn.edit(n,e).then((function(){t.$message.success("保存成功"),t.$router.push({name:"SkillQuestion"})})).finally((function(){t.loading=!1}))}}},ca=la,ua=(n("29c3"),Object(s["a"])(ca,oa,sa,!1,null,"00b85982",null)),da=ua.exports,ma=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"page-content"},[n("router-link",{attrs:{to:{name:"SettingRoleCreate"}}},[n("el-button",{attrs:{size:"medium",type:"primary",plain:""}},[t._v("添加角色")])],1),n("el-table",{staticClass:"mt-20",attrs:{data:t.roles}},[n("el-table-column",{attrs:{prop:"id",label:"ID",width:"60"}}),n("el-table-column",{attrs:{prop:"name",label:"姓名",width:"120"}}),n("el-table-column",{attrs:{prop:"description",label:"描述"}}),n("el-table-column",{attrs:{label:"操作",align:"right"},scopedSlots:t._u([{key:"default",fn:function(e){return[n("el-dropdown",{attrs:{trigger:"hover"},on:{command:t.handleCommand}},[n("span",{staticClass:"icon-ctrl"},[n("i",{staticClass:"el-icon-more"})]),n("el-dropdown-menu",{attrs:{slot:"dropdown"},slot:"dropdown"},[n("el-dropdown-item",{attrs:{command:"edit-"+e.row.id+"-"+e.$index}},[t._v("编辑")]),n("el-dropdown-item",{attrs:{command:"delete-"+e.row.id+"-"+e.$index}},[t._v("删除")])],1)],1)]}}])})],1)],1)},pa=[],ha={create:function(t){return E.post(D.role,t)},index:function(t){return E.get(D.role,t)},show:function(t){return E.get(D.roleItem(t))},update:function(t,e){return E.put(D.roleItem(t),e)},destory:function(t){return E.delete(D.roleItem(t))},permission:function(){return E.get(D.permission)}},fa=ha,ga={data:function(){return{dialogFormVisible:!1,roles:[]}},created:function(){this.getData()},methods:{getData:function(){var t=this;fa.index().then((function(e){t.roles=e}))},handleCommand:function(t){var e=t.split("-")[0],n=t.split("-")[1],a=t.split("-")[2];"edit"===e?this.$router.push({name:"SettingRoleEdit",params:{id:n}}):"delete"===e&&this.delRole(a,n)},delRole:function(t,e){var n=this;this.$confirm("确认删除吗？").then((function(){return n.loading=!0,fa.destory(e)})).then((function(){n.roles.splice(t,1),n.$message.success("删除成功")})).catch((function(){})).finally((function(){n.loading=!1}))}}},va=ga,ba=Object(s["a"])(va,ma,pa,!1,null,"5e314ffc",null),_a=ba.exports,ya=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"page-content"},[n("div",{staticClass:"c-650"},[t._m(0),n("el-form",{ref:"roleRoot",attrs:{"label-position":"left","label-width":"120px",model:t.role}},[n("el-form-item",{attrs:{label:"名称：",prop:"name",rules:t.rules.name}},[n("el-input",{directives:[{name:"show",rawName:"v-show",value:t.editShow,expression:"editShow"}],model:{value:t.role.name,callback:function(e){t.$set(t.role,"name",e)},expression:"role.name"}}),n("span",{directives:[{name:"show",rawName:"v-show",value:!t.editShow,expression:"!editShow"}]},[t._v(t._s(t.role.name))])],1),n("el-form-item",{attrs:{label:"描述：",prop:"description",rules:t.rules.description}},[n("el-input",{directives:[{name:"show",rawName:"v-show",value:t.editShow,expression:"editShow"}],attrs:{type:"textarea",rows:"3",resize:"none",placeholder:"请输入描述"},model:{value:t.role.description,callback:function(e){t.$set(t.role,"description",e)},expression:"role.description"}}),n("span",{directives:[{name:"show",rawName:"v-show",value:!t.editShow,expression:"!editShow"}]},[t._v(t._s(t.role.description?t.role.description:"暂无描述"))])],1),n("div",{staticClass:"sub-header"},[n("div",{staticClass:"sub-header-title"},[t._v("权限信息")])]),t._l(t.permissions,(function(e){return[n("el-form-item",{key:e.slug,attrs:{label:e.name}},[n("el-checkbox-group",{model:{value:t.role.permissions,callback:function(e){t.$set(t.role,"permissions",e)},expression:"role.permissions"}},[t._l(e.permissions,(function(a){return[n("el-checkbox",{key:a.slug,attrs:{label:a.slug,name:e.name,disabled:!t.editShow}},[t._v(" "+t._s(a.name)+" ")])]}))],2)],1)]})),n("el-form-item",[n("el-button",{directives:[{name:"show",rawName:"v-show",value:!t.editShow,expression:"!editShow"}],attrs:{type:"primary",plain:""},on:{click:function(e){t.editShow=!0}}},[t._v("编辑")]),n("el-button",{directives:[{name:"show",rawName:"v-show",value:t.editShow,expression:"editShow"}],attrs:{type:"primary"},on:{click:t.editData}},[t._v("保存")])],1)],2)],1)])},ka=[function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"sub-header"},[n("div",{staticClass:"sub-header-title"},[t._v("基本信息")])])}],wa={index:function(){return E.get(D.permission)}},Ca=wa,xa={data:function(){return{editShow:!1,permissions:[],role:{id:1,name:"",description:"",permissions:[]},rules:{name:{required:!0,message:"请输入角色名称",trigger:"blur"},description:{required:!0,message:"请输入角色描述",trigger:"blur"}}}},created:function(){this.getData()},methods:{getData:function(){var t=this,e=this.$route.params.id;Promise.all([fa.show(e),Ca.index()]).then((function(e){var n=Object(ra["a"])(e,2),a=n[0],i=n[1];t.role=a,t.permissions=i}))},editData:function(){var t=this,e=this.$route.params.id;this.$refs["roleRoot"].validate((function(n){n&&(t.loading=!0,fa.update(e,t.role).then((function(){t.$router.push({name:"SettingRoles"}),t.$message.success("编辑成功")})).finally((function(){return t.loading=!1})))}))}}},$a=xa,Sa=Object(s["a"])($a,ya,ka,!1,null,"287068c8",null),ja=Sa.exports,za=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"page-content"},[n("div",{staticClass:"c-650"},[t._m(0),n("el-form",{ref:"roleRoot",attrs:{"label-position":"left","label-width":"120px",model:t.role}},[n("el-form-item",{attrs:{label:"名称：",prop:"name",rules:t.rules.name}},[n("el-input",{model:{value:t.role.name,callback:function(e){t.$set(t.role,"name",e)},expression:"role.name"}})],1),n("el-form-item",{attrs:{label:"描述：",prop:"description",rules:t.rules.description}},[n("el-input",{attrs:{type:"textarea",rows:"3",resize:"none",placeholder:"请输入描述"},model:{value:t.role.description,callback:function(e){t.$set(t.role,"description",e)},expression:"role.description"}})],1),n("div",{staticClass:"sub-header"},[n("div",{staticClass:"sub-header-title"},[t._v("权限信息")])]),t._l(t.permissions,(function(e){return[n("el-form-item",{key:e.slug,attrs:{label:e.name}},[n("el-checkbox-group",{model:{value:t.role.permissions,callback:function(e){t.$set(t.role,"permissions",e)},expression:"role.permissions"}},[t._l(e.permissions,(function(a){return[n("el-checkbox",{key:a.slug,attrs:{label:a.slug,name:e.name}},[t._v(" "+t._s(a.name)+" ")])]}))],2)],1)]})),n("el-form-item",[n("el-button",{attrs:{type:"primary"},on:{click:t.handleRoleCreate}},[t._v("创建")])],1)],2)],1)])},Ea=[function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"sub-header"},[n("div",{staticClass:"sub-header-title"},[t._v("基本信息")])])}],Pa={data:function(){return{permissions:[],role:{id:1,name:"",description:"",permissions:[]},rules:{name:{required:!0,message:"请输入角色名称",trigger:"blur"},description:{required:!0,message:"请输入角色描述",trigger:"blur"}}}},created:function(){this.getData()},methods:{getData:function(){var t=this;Promise.all([Ca.index()]).then((function(e){var n=Object(ra["a"])(e,1),a=n[0];t.permissions=a}))},handleRoleCreate:function(){var t=this;this.$refs["roleRoot"].validate((function(e){e&&(t.loading=!0,fa.create(t.role).then((function(){t.$router.push({name:"SettingRoles"}),t.$message.success("创建成功")})).finally((function(){return t.loading=!1})))}))}}},Ia=Pa,Da=Object(s["a"])(Ia,za,Ea,!1,null,"3223a16e",null),Oa=Da.exports,qa=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"page-content"},[n("router-link",{attrs:{to:{name:"SettingManagerCreate"}}},[n("el-button",{attrs:{size:"medium",type:"primary",plain:""},on:{click:function(e){t.dialogFormVisible=!0}}},[t._v("创建管理员")])],1),n("el-table",{staticClass:"mt-20",attrs:{data:t.managers}},[n("el-table-column",{attrs:{prop:"id",label:"ID"}}),n("el-table-column",{attrs:{prop:"name",label:"姓名"}}),n("el-table-column",{attrs:{prop:"phone",label:"手机号码"}}),n("el-table-column",{attrs:{label:"角色"},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v(" "+t._s(e.row.role?e.row.role.name:"-")+" ")]}}])}),n("el-table-column",{attrs:{label:"操作",width:"180px",align:"right"},scopedSlots:t._u([{key:"default",fn:function(e){return[n("el-dropdown",{attrs:{trigger:"hover"},on:{command:t.handleCommand}},[n("span",{staticClass:"icon-ctrl"},[n("i",{staticClass:"el-icon-more"})]),n("el-dropdown-menu",{attrs:{slot:"dropdown"},slot:"dropdown"},[n("el-dropdown-item",{attrs:{command:"edit-"+e.row.id+"-"+e.$index}},[t._v("编辑")]),n("el-dropdown-item",{attrs:{command:"delete-"+e.row.id+"-"+e.$index}},[t._v("删除")])],1)],1)]}}])})],1),n("el-pagination",{staticClass:"mt-20",attrs:{background:"",layout:"total, prev, pager, next, jumper","current-page":t.pagination.currentPage,"page-size":t.pagination.pageSize,total:t.pagination.total,"hide-on-single-page":!0},on:{"current-change":t.getData,"update:currentPage":function(e){return t.$set(t.pagination,"currentPage",e)},"update:current-page":function(e){return t.$set(t.pagination,"currentPage",e)}}})],1)},Ta=[],Ba={create:function(t){return E.post(D.manager,t)},index:function(t){return E.get(D.manager,t)},show:function(t){return E.get(D.managerItem(t))},update:function(t,e){return E.put(D.managerItem(t),e)},destory:function(t){return E.delete(D.managerItem(t))}},Va=Ba,Fa={data:function(){return{managers:[],pagination:{currentPage:1,pageSize:10,total:0}}},created:function(){this.getData()},methods:{getData:function(){var t=this,e={page_size:this.pagination.pageSize,current_page:this.pagination.currentPage};this.loading=!0,Va.index(e).then((function(e){t.managers=e.rows,t.pagination.currentPage=e.pagination.current_page,t.pagination.pageSize=e.pagination.page_size,t.pagination.total=e.pagination.total})).finally((function(){t.loading=!1}))},handleCommand:function(t){var e=t.split("-")[0],n=t.split("-")[1],a=t.split("-")[2];"edit"===e?this.$router.push({name:"SettingManagerEdit",params:{id:n}}):"delete"===e&&this.delManager(a,n)},delManager:function(t,e){var n=this;this.$confirm("确认删除吗？").then((function(){return n.loading=!0,Va.destory(e)})).then((function(){n.managers.splice(t,1),n.$message.success("删除成功")})).catch((function(){})).finally((function(){n.loading=!1}))}}},Na=Fa,Ma=Object(s["a"])(Na,qa,Ta,!1,null,"9c95c708",null),Ua=Ma.exports,Ra=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{directives:[{name:"loading",rawName:"v-loading",value:t.loading,expression:"loading"}],staticClass:"page-content"},[n("div",{staticClass:"c-650"},[t._m(0),n("el-form",{ref:"manager",attrs:{"label-position":"left","label-width":"80px",model:t.manager}},[n("el-form-item",{attrs:{label:"名称",prop:"name",rules:t.rules.name}},[n("el-input",{model:{value:t.manager.name,callback:function(e){t.$set(t.manager,"name",e)},expression:"manager.name"}})],1),n("el-form-item",{attrs:{label:"手机号码",prop:"phone",rules:t.rules.phone}},[n("el-input",{model:{value:t.manager.phone,callback:function(e){t.$set(t.manager,"phone",t._n(e))},expression:"manager.phone"}})],1),n("el-form-item",{attrs:{label:"角色",prop:"role_id",rules:t.rules.role}},[n("el-select",{attrs:{placeholder:"请选择"},model:{value:t.manager.role_id,callback:function(e){t.$set(t.manager,"role_id",e)},expression:"manager.role_id"}},t._l(t.roles,(function(t){return n("el-option",{key:t.id,attrs:{label:t.name,value:t.id}})})),1)],1),n("el-form-item",[n("el-button",{attrs:{type:"primary"},on:{click:t.handleManagerCreate}},[t._v("创建")])],1)],1)],1)])},Aa=[function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"sub-header"},[n("div",{staticClass:"sub-header-title"},[t._v("基本信息")])])}],La={data:function(){return{loading:!0,roles:[],manager:{name:"",phone:"",role_id:""},rules:{name:{required:!0,message:"请输入姓名",trigger:"blur"},role:{required:!0,message:"请选择角色",trigger:"change"},phone:[{required:!0,message:"请输入手机号码",trigger:"change"},{pattern:/^1[3456789]\d{9}$/,message:"目前只支持中国大陆的手机号码",trigger:"blur"}]}}},created:function(){var t=this;Promise.all([fa.index()]).then((function(e){var n=Object(ra["a"])(e,1),a=n[0];t.roles=a})).finally((function(){return t.loading=!1}))},methods:{handleManagerCreate:function(){var t=this;this.$refs["manager"].validate((function(e){e&&(t.loading=!0,t.manager.phone=String(t.manager.phone),Va.create(t.manager).then((function(){t.$router.push({name:"SettingManager"}),t.$message.success("创建成功")})).finally((function(){return t.loading=!1})))}))}}},Qa=La,Za=Object(s["a"])(Qa,Ra,Aa,!1,null,"2ea89cac",null),Ja=Za.exports,Ga=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{directives:[{name:"loading",rawName:"v-loading",value:t.loading,expression:"loading"}],staticClass:"page-content"},[n("div",{staticClass:"c-650"},[t._m(0),n("el-form",{ref:"manager",attrs:{"label-position":"left","label-width":"80px",model:t.manager}},[n("el-form-item",{attrs:{label:"名称",prop:"name",rules:{required:!0,message:"请输入姓名",trigger:"blur"}}},[n("el-input",{model:{value:t.manager.name,callback:function(e){t.$set(t.manager,"name",e)},expression:"manager.name"}})],1),n("el-form-item",{attrs:{label:"手机号码",prop:"phone",rules:[{required:!0,message:"请输入手机号码",trigger:"change"},{pattern:/^1[3456789]\d{9}$/,message:"目前只支持中国大陆的手机号码",trigger:"blur"}]}},[n("el-input",{model:{value:t.manager.phone,callback:function(e){t.$set(t.manager,"phone",t._n(e))},expression:"manager.phone"}})],1),n("el-form-item",{attrs:{label:"角色",prop:"role_id",rules:{required:!0,message:"请选择角色",trigger:"change"}}},[n("el-select",{attrs:{placeholder:"请选择"},model:{value:t.manager.role_id,callback:function(e){t.$set(t.manager,"role_id",e)},expression:"manager.role_id"}},t._l(t.roles,(function(t){return n("el-option",{key:t.id,attrs:{label:t.name,value:t.id}})})),1)],1),n("el-form-item",[n("el-button",{attrs:{type:"primary"},on:{click:function(e){return t.editManager()}}},[t._v("编辑")])],1)],1)],1)])},Ha=[function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"sub-header"},[n("div",{staticClass:"sub-header-title"},[t._v("基本信息")])])}],Ka={data:function(){return{loading:!0,roles:[],manager:{name:"",phone:"",password:""}}},created:function(){var t=this,e=this.$route.params.id;Promise.all([Va.show(e),fa.index()]).then((function(e){var n=Object(ra["a"])(e,2),a=n[0],i=n[1];t.manager=a,t.roles=i})).finally((function(){return t.loading=!1}))},methods:{editManager:function(){var t=this,e=this.$route.params.id;this.$refs["manager"].validate((function(n){n&&(t.loading=!0,Va.update(e,t.manager).then((function(){t.$router.push({name:"SettingManager"}),t.$message.success("编辑成功")})).finally((function(){return t.loading=!1})))}))}}},Wa=Ka,Xa=Object(s["a"])(Wa,Ga,Ha,!1,null,"1fc0259c",null),Ya=Xa.exports,ti=[{path:"/login",name:"AccountLogin",component:F},{path:"/",name:"Root",component:yt,redirect:{name:"Dashboard"},children:[{path:"/dashboard",name:"Dashboard",component:Mt,meta:{nav:{icon:"el-icon-pie-chart",title:"概况"},breadcrumb:{title:"概况"}}},{path:"course/manager",name:"CourseManager",component:{render:function(t){return t("router-view")}},meta:{nav:{icon:"el-icon-collection",title:"职业课程"}},children:[{path:"/course",name:"CoursesRoot",component:{render:function(t){return t("router-view")}},redirect:{name:"Course"},meta:{nav:{icon:"el-icon-collection",title:"课程管理"},breadcrumb:{title:"课程",replace:!0}},children:[{path:"/course",name:"Course",component:qt},{path:"/course/create",name:"CourseCreate",component:Kt,meta:{breadcrumb:{title:"创建"}}},{path:"/course/:id/edit",name:"CourseEdit",component:ue,meta:{breadcrumb:{title:"编辑"}}}]},{path:"/zhiye",name:"zhiyesRoot",component:{render:function(t){return t("router-view")}},redirect:{name:"Zhiye"},meta:{nav:{icon:"el-icon-collection",title:"职业路径"},breadcrumb:{title:"职业",replace:!0}},children:[{path:"/zhiye",name:"Zhiye",component:be},{path:"/zhiye/create",name:"ZhiyeCreate",component:xe,meta:{breadcrumb:{title:"创建"}}},{path:"/zhiye/:id/edit",name:"ZhiyeEdit",component:Pe,meta:{breadcrumb:{title:"编辑"}}}]}]},{path:"project/manager",name:"ProjectManager",component:{render:function(t){return t("router-view")}},meta:{nav:{icon:"el-icon-collection",title:"企业项目"}},children:[{path:"/company",name:"companyRoot",component:{render:function(t){return t("router-view")}},redirect:{name:"Company"},meta:{nav:{icon:"el-icon-collection",title:"企业管理"},breadcrumb:{title:"企业",replace:!0}},children:[{path:"/company",name:"Company",component:Fe},{path:"/company/create",name:"CompanyCreate",component:Le,meta:{breadcrumb:{title:"创建"}}},{path:"/company/:id/edit",name:"CompanyEdit",component:Ke,meta:{breadcrumb:{title:"编辑"}}}]},{path:"/project",name:"ProjectRoot",component:{render:function(t){return t("router-view")}},redirect:{name:"Project"},meta:{nav:{icon:"el-icon-collection",title:"项目管理"},breadcrumb:{title:"项目",replace:!0}},children:[{path:"/project",name:"Project",component:on},{path:"/project/create",name:"ProjectCreate",component:bn,meta:{breadcrumb:{title:"创建"}}},{path:"/project/:id",name:"ProjectItem",component:mn,meta:{breadcrumb:{title:"详情"}}},{path:"/project/:id/edit",name:"ProjectEdit",component:xn,meta:{breadcrumb:{title:"编辑"}}}]}]},{path:"/skill/manager",name:"SkillManager",component:{render:function(t){return t("router-view")}},meta:{nav:{icon:"el-icon-collection",title:"技能测评"}},children:[{path:"/stack",name:"StackRoot",component:{render:function(t){return t("router-view")}},redirect:{name:"Stack"},meta:{nav:{icon:"el-icon-collection",title:"技能管理"},breadcrumb:{title:"技能",replace:!0}},children:[{path:"/stack",name:"Stack",component:Dn},{path:"/stack/create",name:"StackCreate",component:Fn,meta:{breadcrumb:{title:"创建"}}},{path:"/stack/:id/edit",name:"StackEdit",component:Ln,meta:{breadcrumb:{title:"编辑"}}}]},{path:"/skill/question",name:"SkillQuestionRoot",component:{render:function(t){return t("router-view")}},redirect:{name:"SkillQuestion"},meta:{nav:{icon:"el-icon-collection",title:"题库管理"},breadcrumb:{title:"题库",replace:!0}},children:[{path:"/skill/question",name:"SkillQuestion",component:Xn},{path:"/skill/question/create",name:"SkillQuestionCreate",component:ia,meta:{breadcrumb:{title:"创建"}}},{path:"/skill/question/:id/edit",name:"SkillQuestionEdit",component:da,meta:{breadcrumb:{title:"编辑"}}}]}]},{path:"/setting",name:"settingRoot",component:{render:function(t){return t("router-view")}},meta:{nav:{icon:"el-icon-setting",title:"管理设置"},breadcrumb:{title:"设置"}},children:[{path:"/setting/manager",name:"SettingManagerRoot",component:{render:function(t){return t("router-view")}},redirect:{name:"SettingManager"},meta:{nav:{icon:"el-icon-user",title:"管理员"},breadcrumb:{title:"管理员",replace:!0}},children:[{path:"/setting/manager",name:"SettingManager",component:Ua},{path:"/setting/manager/create",name:"SettingManagerCreate",component:Ja,meta:{breadcrumb:{title:"创建"}}},{path:"/setting/manager/:id/edit",name:"SettingManagerEdit",component:Ya,meta:{breadcrumb:{title:"编辑"}}}]},{path:"/setting/roles",name:"SettingRolesRoot",component:{render:function(t){return t("router-view")}},redirect:{name:"Roles"},meta:{nav:{icon:"el-icon-user-solid",title:"角色"},breadcrumb:{title:"角色"}},children:[{path:"/setting/roles",name:"SettingRoles",component:_a},{path:"/setting/roles/create",name:"SettingRoleCreate",component:Oa},{path:"/setting/roles/:id",name:"SettingRoleEdit",component:ja,meta:{breadcrumb:{title:"详情"}}}]}]}]},{path:"/login",name:"login",component:St,meta:{breadcrumb:{title:"登陆页面"}}}],ei=ti,ni=n("323e"),ai=n.n(ni);n("a5d8");a["default"].use(d["a"]);var ii=new d["a"]({base:"",routes:ei});ii.beforeEach(function(){var t=Object(u["a"])(regeneratorRuntime.mark((function t(e,n,a){var i;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(ai.a.start(),i=x.getToken(),i||"AccountLogin"===e.name){t.next=5;break}return a({name:"AccountLogin",replace:!0}),t.abrupt("return");case 5:if(!i){t.next=9;break}if("AccountLogin"!==e.name){t.next=9;break}return a({name:"Root",replace:!0}),t.abrupt("return");case 9:a();case 10:case"end":return t.stop()}}),t)})));return function(e,n,a){return t.apply(this,arguments)}}()),ii.afterEach((function(t,e){ai.a.done()}));var oi=ii,si=n("2f62");a["default"].use(si["a"]);var ri=new si["a"].Store({state:{},mutations:{},actions:{},modules:{}});n("0fae"),n("add7");a["default"].use(b.a),a["default"].config.productionTip=!1,new a["default"]({router:oi,store:ri,render:function(t){return t(c)}}).$mount("#app")},"571c":function(t,e,n){},"594e":function(t,e,n){"use strict";var a=n("c56d"),i=n.n(a);i.a},"5c50":function(t,e,n){},6758:function(t,e,n){"use strict";var a=n("2f5d"),i=n.n(a);i.a},7198:function(t,e,n){"use strict";var a=n("b62c"),i=n.n(a);i.a},"759a":function(t,e,n){},"7d3c":function(t,e,n){"use strict";var a=n("2885"),i=n.n(a);i.a},"7de7":function(t,e,n){},"8e17":function(t,e,n){"use strict";var a=n("3b41"),i=n.n(a);i.a},"908f":function(t,e,n){},9297:function(t,e,n){"use strict";var a=n("759a"),i=n.n(a);i.a},"933c":function(t,e,n){},"9b19":function(t,e,n){t.exports=n.p+"img/logo.f43b9a47.svg"},"9b22":function(t,e,n){"use strict";var a=n("908f"),i=n.n(a);i.a},"9f55":function(t,e,n){"use strict";var a=n("ed02"),i=n.n(a);i.a},a510:function(t,e,n){"use strict";var a=n("e033"),i=n.n(a);i.a},a67c:function(t,e,n){},a699:function(t,e,n){},aca3:function(t,e,n){},add7:function(t,e,n){},b074:function(t,e,n){},b56f:function(t,e,n){"use strict";var a=n("5c50"),i=n.n(a);i.a},b62c:function(t,e,n){},c56d:function(t,e,n){},ca0b:function(t,e,n){"use strict";var a=n("0d1a"),i=n.n(a);i.a},cee0:function(t,e,n){},cf05:function(t,e,n){t.exports=n.p+"img/logo.82b9c7a5.png"},d4e0:function(t,e,n){},e033:function(t,e,n){},e0cc:function(t,e,n){},e0eb:function(t,e,n){},ed02:function(t,e,n){},f432:function(t,e,n){"use strict";var a=n("e0eb"),i=n.n(a);i.a},f7f7:function(t,e,n){},fcd9:function(t,e,n){"use strict";var a=n("cee0"),i=n.n(a);i.a}});
//# sourceMappingURL=app.8106596b.js.map