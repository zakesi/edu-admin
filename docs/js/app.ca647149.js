(function(t){function e(e){for(var n,s,r=e[0],l=e[1],c=e[2],d=0,m=[];d<r.length;d++)s=r[d],Object.prototype.hasOwnProperty.call(i,s)&&i[s]&&m.push(i[s][0]),i[s]=0;for(n in l)Object.prototype.hasOwnProperty.call(l,n)&&(t[n]=l[n]);u&&u(e);while(m.length)m.shift()();return o.push.apply(o,c||[]),a()}function a(){for(var t,e=0;e<o.length;e++){for(var a=o[e],n=!0,r=1;r<a.length;r++){var l=a[r];0!==i[l]&&(n=!1)}n&&(o.splice(e--,1),t=s(s.s=a[0]))}return t}var n={},i={app:0},o=[];function s(e){if(n[e])return n[e].exports;var a=n[e]={i:e,l:!1,exports:{}};return t[e].call(a.exports,a,a.exports,s),a.l=!0,a.exports}s.m=t,s.c=n,s.d=function(t,e,a){s.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:a})},s.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},s.t=function(t,e){if(1&e&&(t=s(t)),8&e)return t;if(4&e&&"object"===typeof t&&t&&t.__esModule)return t;var a=Object.create(null);if(s.r(a),Object.defineProperty(a,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var n in t)s.d(a,n,function(e){return t[e]}.bind(null,n));return a},s.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return s.d(e,"a",e),e},s.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},s.p="";var r=window["webpackJsonp"]=window["webpackJsonp"]||[],l=r.push.bind(r);r.push=e,r=r.slice();for(var c=0;c<r.length;c++)e(r[c]);var u=l;o.push([0,"chunk-vendors"]),a()})({0:function(t,e,a){t.exports=a("56d7")},"01c2":function(t,e,a){"use strict";var n=a("e0cc"),i=a.n(n);i.a},"092f":function(t,e,a){},"0d1a":function(t,e,a){},"14ed":function(t,e,a){"use strict";var n=a("571c"),i=a.n(n);i.a},"190a":function(t,e,a){"use strict";var n=a("4de0"),i=a.n(n);i.a},2169:function(t,e,a){"use strict";var n=a("092f"),i=a.n(n);i.a},"2ab9":function(t,e,a){"use strict";var n=a("4f73"),i=a.n(n);i.a},"2f5d":function(t,e,a){},"3b41":function(t,e,a){},4701:function(t,e,a){"use strict";var n=a("4885"),i=a.n(n);i.a},"47dd":function(t,e,a){"use strict";var n=a("7de7"),i=a.n(n);i.a},4885:function(t,e,a){},"4de0":function(t,e,a){},"4f2d":function(t,e,a){},"4f73":function(t,e,a){},"55f0":function(t,e,a){},"56d7":function(t,e,a){"use strict";a.r(e);a("e260"),a("e6cf"),a("cca6"),a("a79d");var n=a("2b0e"),i=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{attrs:{id:"app"}},[a("router-view")],1)},o=[],s=a("2877"),r={},l=Object(s["a"])(r,i,o,!1,null,null,null),c=l.exports,u=(a("96cf"),a("1da1")),d=a("8c4f"),m=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"page-wrapper"},[a("Sider",{staticClass:"page-sider"}),a("div",{staticClass:"page-mainer"},[a("Header",{staticClass:"page-header"}),a("div",{staticClass:"page-body"},[a("router-view")],1),t._e()],1)],1)},p=[],h=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"header-section"},[a("div",{staticClass:"header-hd"},[a("Breadcrumb")],1),a("div",{staticClass:"header-bd"}),a("div",{staticClass:"header-ft"},[t._m(0),a("el-dropdown",{staticStyle:{height:"100%"},on:{command:t.handleCommand}},[a("div",{staticClass:"bar-info-container"},[a("i",{staticClass:"el-icon-user-solid userInfo-avatar"}),a("span",{staticClass:"userInfo-name"},[t._v(t._s(t.userInfo.name))]),a("i",{staticClass:"el-icon-arrow-down el-icon--right"})]),a("el-dropdown-menu",{attrs:{slot:"dropdown"},slot:"dropdown"},[a("el-dropdown-item",{attrs:{command:"Logout",icon:"el-icon-video-pause"}},[t._v("退出")])],1)],1)],1)])},f=[function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"bar-info-container"},[a("i",{staticClass:"el-icon-question"})])}],g=function(){var t=this,e=t.$createElement,a=t._self._c||e;return t.breadcrumbValue.length?a("div",{staticClass:"breadcrumb-section"},[t.breadcrumbValue.length?a("el-breadcrumb",{staticClass:"breadcrumb-list"},[t._l(t.breadcrumbValue,(function(e){return[e.to?a("el-breadcrumb-item",{key:e.name,staticClass:"breadcrumb-item",attrs:{replace:!0,to:e.to}},[t._v(t._s(e.name))]):a("el-breadcrumb-item",{key:e.name,staticClass:"breadcrumb-item"},[t._v(t._s(e.name))])]}))],2):t._e()],1):t._e()},v=[],b=(a("4de4"),a("d81d"),a("b0c0"),a("ac1f"),a("5319"),{props:{breadcrumb:{type:Array,default:function(){return[]}}},computed:{breadcrumbValue:function(){var t=this.breadcrumb;return t.length?t:this.$route.matched.filter((function(t){return t.meta&&t.meta.breadcrumb})).map((function(t){return{name:t.meta.breadcrumb.title,to:t.meta.breadcrumb.replace?{name:t.name}:void 0}}))}}}),y=b,_=(a("ca0b"),Object(s["a"])(y,g,v,!1,null,"897365ae",null)),C=_.exports,w={data:function(){return{userInfo:{}}},created:function(){},methods:{handleCommand:function(t){var e="handle".concat(t);this[e]()},handleLogout:function(){}},components:{Breadcrumb:C}},k=w,$=(a("68e3"),Object(s["a"])(k,h,f,!1,null,"1b3800f2",null)),x=$.exports,j=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("footer",{staticClass:"footer-section"},[t._v(" Copyright © 2020 ❤️ 极客学院体验技术部出品 ")])},z=[],S={},P=S,E=(a("2169"),Object(s["a"])(P,j,z,!1,null,null,null)),I=E.exports,T=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"sider-section"},[t._m(0),a("div",{staticClass:"sider-menu-body"},[a("el-scrollbar",{staticClass:"scrollbar-section"},[a("Menu",{staticClass:"menu-section"})],1)],1)])},V=[function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"sider-menu-header logo-section"},[n("img",{staticClass:"logo-img",attrs:{src:a("9b19"),alt:"logo"}})])}],D=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("el-menu",{attrs:{"default-active":t.path,router:!0}},[t._l(t.filterRoutes,(function(e){return[t.hasNavChildren(e)?a("el-submenu",{key:e.path,attrs:{index:e.path}},[a("template",{slot:"title"},[e.meta.nav.icon?a("i",{class:e.meta.nav.icon}):t._e(),a("span",{attrs:{slot:"title"},slot:"title"},[t._v(t._s(e.meta.nav.title))])]),t._l(e.children,(function(e){return a("el-menu-item",{key:e.path,attrs:{index:e.path,route:{path:e.path},id:e.name}},[e.meta.nav.icon?a("i",{class:e.meta.nav.icon}):t._e(),a("span",{attrs:{slot:"title"},slot:"title"},[t._v(t._s(e.meta.nav.title))])])}))],2):a("el-menu-item",{key:e.path,attrs:{disabled:e.disabled,index:e.path,route:{path:e.path},id:e.name}},[e.meta.nav.icon?a("i",{class:e.meta.nav.icon}):t._e(),a("span",{attrs:{slot:"title"},slot:"title"},[t._v(t._s(e.meta.nav.title))])])]}))],2)},O=[],F=(a("4160"),a("45fc"),a("159b"),{data:function(){return{path:this.$route.path,filterRoutes:[],PermissionArr:[]}},created:function(){this.getPermissions()},watch:{$route:function(t){this.path=t.path}},methods:{getPermissions:function(){this.getRoutes()},getRoutes:function(){this.filterRoutes=this.filterNavigator(ia)},filterNavigator:function(t){var e=this,a=[];return t.forEach((function(t){if(t.meta&&t.meta.nav){var n={path:t.path,name:t.name,meta:t.meta};t.children&&(n.children=e.filterNavigator(t.children)),a.push(n)}else t.children&&e.filterNavigator(t.children).forEach((function(t){return a.push(t)}))})),a},hasNavChildren:function(t){var e=t.children||[];return e.some((function(t){return t.meta&&t.meta.nav}))}}}),B=F,U=(a("7198"),Object(s["a"])(B,D,O,!1,null,null,null)),N=U.exports,M={components:{Menu:N}},A=M,L=(a("9297"),Object(s["a"])(A,T,V,!1,null,null,null)),R=L.exports,Z={data:function(){return{}},components:{Header:x,Footer:I,Sider:R}},q=Z,H=(a("9f55"),Object(s["a"])(q,m,p,!1,null,null,null)),J=H.exports,G=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"login-page"},[n("div",{staticClass:"page-content"},[n("img",{staticClass:"page-logo",attrs:{src:a("cf05")}}),n("div",{staticClass:"page-form_container"},[n("el-form",{ref:"passwordFrom",staticStyle:{width:"340px"},attrs:{"status-icon":"",rules:t.passwordRules,model:t.passwordFrom}},[n("span",[t._v("账号密码登陆")]),n("el-form-item",{attrs:{prop:"phone"}},[n("el-input",{staticClass:"phone-input",attrs:{type:"number","prefix-icon":"el-icon-mobile-phone",placeholder:"请输手机号",autocomplete:"off"},model:{value:t.passwordFrom.phone,callback:function(e){t.$set(t.passwordFrom,"phone",e)},expression:"passwordFrom.phone"}})],1),n("el-form-item",{attrs:{prop:"password"}},[n("el-input",{attrs:{type:"password","prefix-icon":"el-icon-lock",placeholder:"请输入密码",autocomplete:"off","show-password":""},model:{value:t.passwordFrom.password,callback:function(e){t.$set(t.passwordFrom,"password",e)},expression:"passwordFrom.password"}})],1),n("el-form-item",[n("el-button",{staticClass:"login-btn",attrs:{type:"primary"},on:{click:t.login}},[t._v("登录")])],1)],1)],1)])])},K=[],Q={data:function(){return{passwordFrom:{phone:"",password:""},passwordRules:{phone:[{required:!0,message:"请输入手机号",trigger:"blur"},{pattern:/^1[3456789]\d{9}$/,message:"目前只支持中国大陆的手机号码",trigger:"blur"}],password:[{required:!0,message:"请输入密码",trigger:"blur"}]}}},created:function(){},methods:{login:function(){var t=this;this.$refs["passwordFrom"].validate((function(e){e&&t.$router.push({path:"/dashboard"})}))}}},W=Q,X=(a("594e"),Object(s["a"])(W,G,K,!1,null,"f47376a6",null)),Y=X.exports,tt=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{directives:[{name:"loading",rawName:"v-loading",value:t.loading,expression:"loading"}],staticClass:"page-content"},[a("router-link",{attrs:{to:{name:"CourseCreate"}}},[a("el-button",{attrs:{size:"medium",type:"primary",plain:""}},[t._v("创建课程")])],1),a("el-table",{staticClass:"mt-20",attrs:{data:t.courses,size:"medium"}},[a("el-table-column",{attrs:{prop:"id",label:"id",width:"80px"}}),a("el-table-column",{attrs:{prop:"name",label:"名称"}}),a("el-table-column",{attrs:{prop:"short_name",label:"副标题"}}),a("el-table-column",{attrs:{prop:"status",label:"状态",width:"120px",align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("el-tag",{attrs:{type:e.row.status?"success":"danger",size:"small"}},[t._v(" "+t._s(e.row.status?"已完成":"未完成")+" ")])]}}])}),a("el-table-column",{attrs:{label:"操作",width:"180px",align:"right"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("el-dropdown",{attrs:{trigger:"hover"},on:{command:t.handleCommand}},[a("span",{staticClass:"icon-ctrl"},[a("i",{staticClass:"el-icon-more"})]),a("el-dropdown-menu",{attrs:{slot:"dropdown"},slot:"dropdown"},[a("el-dropdown-item",{attrs:{command:"edit-"+e.row.id+"-"+e.$index}},[t._v("编辑")]),a("el-dropdown-item",{attrs:{command:"delete-"+e.row.id+"-"+e.$index}},[t._v("删除")])],1)],1)]}}])})],1),a("el-pagination",{staticClass:"mt-20",attrs:{background:"",layout:"total, prev, pager, next, jumper","current-page":t.pagination.currentPage,"page-size":t.pagination.pageSize,total:t.pagination.total,"hide-on-single-page":!0},on:{"current-change":t.getData,"update:currentPage":function(e){return t.$set(t.pagination,"currentPage",e)},"update:current-page":function(e){return t.$set(t.pagination,"currentPage",e)}}})],1)},et=[],at=(a("a434"),a("d3b7"),a("1276"),a("5530")),nt=a("bc3a"),it=a.n(nt),ot=a("5c96"),st=a.n(ot),rt=it.a.create();rt.defaults.timeout=2e3,rt.interceptors.request.use((function(t){var e=Object(at["a"])({},t),a="xxx";return a&&(e["headers"]["Authorization"]="Bearer "+a),e}),(function(t){return Promise.reject(t)}));var lt=function(t){var e=t.response,a=e?e.status:408;if(e){var n=e.data,i=n.message||"服务器发送错误，请稍后再试";401===a?ot["Message"].error("登录状态过期，请重新登录"):403===a?ot["Message"].error("没有权限，联系管理员"):ot["Message"].error(i)}else ot["Message"].error("网络超时")},ct=function(t){switch(!0){case 0===t.data.error_code:return t.data.data;case 1===t.data.error_code:return ot["Message"].error(t.data.message),Promise.reject(t.data);default:return t.data}},ut=function(t){return lt(t),Promise.reject(t)};rt.interceptors.response.use(ct,ut);var dt={post:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return rt.post(t,e,a)},put:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return rt.put(t,e,a)},get:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},n=Object.assign({params:e},a);return rt.get(t,n)},delete:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},n=Object.assign({params:e},a);return rt.delete(t,n)}},mt="https://neon.jiker.vip",pt={qiniuToken:"".concat(mt,"/api/qiniu/token"),course:"".concat(mt,"/api/course"),chapter:"".concat(mt,"/api/chapter"),section:"".concat(mt,"/api/section"),courseItem:function(t){return"".concat(mt,"/api/course/").concat(t)},chapterItem:function(t){return"".concat(mt,"/api/chapter/").concat(t)},sectionItem:function(t){return"".concat(mt,"/api/section/").concat(t)},chapterSort:"".concat(mt,"/api/chapter/sort"),sectionSort:"".concat(mt,"/api/section/sort"),zhiye:"".concat(mt,"/api/zhiye"),zhiyeItem:function(t){return"".concat(mt,"/api/zhiye/").concat(t)},zhiyePath:"".concat(mt,"/api/zhiye/path"),zhiyePathItem:function(t){return"".concat(mt,"/api/zhiye/path/").concat(t)},zhiyePathSort:"".concat(mt,"/api/zhiye/path/sort"),zhiyeCourse:"".concat(mt,"/api/zhiye/course"),zhiyeCourseItem:function(t){return"".concat(mt,"/api/zhiye/course/").concat(t)},zhiyeCourseSort:"".concat(mt,"/api/zhiye/course/sort"),company:"".concat(mt,"/api/company"),companyItem:function(t){return"".concat(mt,"/api/company/").concat(t)},project:"".concat(mt,"/api/project"),projectItem:function(t){return"".concat(mt,"/api/project/").concat(t)},projectVersion:"".concat(mt,"/api/version"),projectVersionItem:function(t){return"".concat(mt,"/api/version/").concat(t)},projectStory:"".concat(mt,"/api/story"),projectStoryItem:function(t){return"".concat(mt,"/api/story/").concat(t)},projectTask:"".concat(mt,"/api/task"),projectTaskItem:function(t){return"".concat(mt,"/api/task/").concat(t)},projectVersionSort:"".concat(mt,"/api/project/version/sort"),projectStorySort:"".concat(mt,"/api/project/story/sort"),projectTaskSort:"".concat(mt,"/api/project/task/sort")},ht={create:function(t){return dt.post(pt.course,t)},index:function(t){return dt.get(pt.course,t)},show:function(t){return dt.get(pt.courseItem(t))},edit:function(t,e){return dt.put(pt.courseItem(t),e)},destory:function(t){return dt.delete(pt.courseItem(t))}},ft=ht,gt={data:function(){return{loading:!0,courses:[],pagination:{currentPage:1,pageSize:10,total:0}}},created:function(){this.getData()},methods:{getData:function(){var t=this,e={page_size:this.pagination.pageSize,current_page:this.pagination.currentPage};this.loading=!0,ft.index(e).then((function(e){t.courses=e.rows,t.pagination.currentPage=e.pagination.current_page,t.pagination.pageSize=e.pagination.page_size,t.pagination.total=e.pagination.total})).finally((function(){t.loading=!1}))},handleCommand:function(t){var e=t.split("-")[0],a=t.split("-")[1],n=t.split("-")[2];"edit"===e?this.$router.push({name:"CourseEdit",params:{id:a}}):"delete"===e&&this.delCourses(n)},delCourses:function(t){var e=this,a=this.courses[t].id;this.$confirm("确认删除吗？").then((function(){return ft.destory(a)})).then((function(){e.$message.success("删除课程成功"),e.courses.splice(t,1)})).catch((function(){}))}}},vt=gt,bt=(a("9b22"),Object(s["a"])(vt,tt,et,!1,null,null,null)),yt=bt.exports,_t=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"page-content"},[a("div",{staticClass:"c-650"},[t._m(0),a("el-form",{attrs:{"label-position":"top","label-width":"80px",size:"mini"}},[a("el-row",{attrs:{gutter:20}},[a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:"课程名称："}},[a("el-input",{model:{value:t.course.name,callback:function(e){t.$set(t.course,"name",e)},expression:"course.name"}})],1)],1),a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:"副标题："}},[a("el-input",{model:{value:t.course.short_name,callback:function(e){t.$set(t.course,"short_name",e)},expression:"course.short_name"}})],1)],1)],1),a("el-form-item",{attrs:{label:"课程提示："}},[a("el-input",{model:{value:t.course.tips,callback:function(e){t.$set(t.course,"tips",e)},expression:"course.tips"}})],1),a("el-form-item",{attrs:{label:"课程描述："}},[a("el-input",{attrs:{type:"textarea"},model:{value:t.course.description,callback:function(e){t.$set(t.course,"description",e)},expression:"course.description"}})],1),a("el-form-item",{attrs:{label:"课程封面："}},[a("el-upload",{ref:"upload",staticClass:"course-image-upload",attrs:{action:"",limit:1,"file-list":t.fileList,"before-upload":t.handleBeforeUpload,accept:"image/jpg, image/jpeg, image/png"}},[t.course.image_url?t._e():a("i",{staticClass:"el-icon-plus el-uploader__icon"}),t.course.image_url?a("img",{staticClass:"course-image-upload",attrs:{src:t.course.image_url}}):t._e()])],1),a("el-form-item",[a("el-button",{attrs:{size:"medium",type:"primary",plain:""},on:{click:t.handleSubmit}},[t._v("创建课程")])],1)],1)],1)])},Ct=[function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"sub-header"},[a("div",{staticClass:"sub-header-title"},[t._v("基本信息")])])}],wt=(a("99af"),a("cea2")),kt="_for_neon_project/",$t={token:function(){return dt.get(pt.qiniuToken)},upload:function(t){var e=t.file,a=t.token,n=t.mimeType,i=void 0===n?null:n,o=t.params,s=void 0===o?{}:o,r=t.progressCallback;return new Promise((function(t,n){var o=e.name,l=kt+Date.now()+"_"+e.name,c={useCdnDomain:!0},u={fname:o,params:s,mimeType:i},d=wt["upload"](e,l,a,u,c);d.subscribe({next:function(t){"function"===typeof r&&r(t)},error:function(t){n(t)},complete:function(e){t(e)}})}))},start:function(){var t=Object(u["a"])(regeneratorRuntime.mark((function t(e){var a,n,i,o,s;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,$t.token();case 2:return a=t.sent,n=a.token,i=a.domain,t.next=7,$t.upload({file:e,token:n});case 7:return o=t.sent,s="https://".concat(i,"/").concat(o.key),t.abrupt("return",{imageUrl:s});case 10:case"end":return t.stop()}}),t)})));function e(e){return t.apply(this,arguments)}return e}()},xt=$t,jt={data:function(){return{fileList:[],course:{name:"",short_name:"",tips:"",description:"",image_url:"",status:0}}},methods:{handleSubmit:function(){var t=this;this.loading=!0,ft.create(this.course).then((function(e){t.$message.success("创建课程成功"),t.$router.push({name:"CourseEdit",params:{id:e.id}})})).finally((function(){t.loading=!1}))},handleBeforeUpload:function(t){var e=this;return xt.start(t).then((function(t){e.course.image_url=t.imageUrl})),Promise.reject({})}}},zt=jt,St=(a("6758"),Object(s["a"])(zt,_t,Ct,!1,null,"2182ba00",null)),Pt=St.exports,Et=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{directives:[{name:"loading",rawName:"v-loading",value:t.loading,expression:"loading"}],staticClass:"page-content"},[a("el-row",{attrs:{gutter:60}},[a("el-col",{attrs:{lg:12}},[a("div",{staticClass:"sub-header"},[a("div",{staticClass:"sub-header-title"},[t._v("基本信息")]),a("div",{staticClass:"sub-header-fd"},[a("el-button",{attrs:{size:"medium",type:t.isEdit?"primary":""},on:{click:t.handleEdit}},[t._v(" "+t._s(t.isEdit?"保存":"修改")+" ")])],1)]),a("el-form",{attrs:{"label-position":"top",size:"mini",model:t.course}},[a("el-row",{attrs:{gutter:20}},[a("el-col",{attrs:{lg:12}},[a("el-form-item",{attrs:{label:"课程名称："}},[a("el-input",{attrs:{disabled:!t.isEdit},model:{value:t.course.name,callback:function(e){t.$set(t.course,"name",e)},expression:"course.name"}})],1)],1),a("el-col",{attrs:{lg:12}},[a("el-form-item",{attrs:{label:"副标题："}},[a("el-input",{attrs:{disabled:!t.isEdit},model:{value:t.course.short_name,callback:function(e){t.$set(t.course,"short_name",e)},expression:"course.short_name"}})],1)],1)],1),a("el-form-item",{attrs:{label:"课程提示："}},[a("el-input",{attrs:{disabled:!t.isEdit},model:{value:t.course.tips,callback:function(e){t.$set(t.course,"tips",e)},expression:"course.tips"}})],1),a("el-form-item",{attrs:{label:"课程描述："}},[a("el-input",{attrs:{type:"textarea",disabled:!t.isEdit},model:{value:t.course.description,callback:function(e){t.$set(t.course,"description",e)},expression:"course.description"}})],1),a("el-row",{attrs:{gutter:20}},[a("el-col",{attrs:{lg:12}},[a("el-form-item",{attrs:{label:"课程封面："}},[t.isEdit?a("el-upload",{ref:"upload",staticClass:"course-image-upload",attrs:{action:"",limit:1,"file-list":t.fileList,"before-upload":t.handleBeforeUpload,accept:"image/jpg, image/jpeg, image/png"}},[t.course.image_url?t._e():a("i",{staticClass:"el-icon-plus el-uploader__icon"}),t.course.image_url?a("img",{staticClass:"course-image-upload",attrs:{src:t.course.image_url}}):t._e()]):t._e(),!t.isEdit&&t.course.image_url?a("img",{staticClass:"course-image-upload",attrs:{src:t.course.image_url}}):t._e(),t.isEdit||t.course.image_url?t._e():a("span",[t._v("无")])],1)],1),a("el-col",{attrs:{lg:12}},[a("el-form-item",{attrs:{label:"课程状态："}},[a("el-switch",{attrs:{disabled:!t.isEdit,"active-value":1,"inactive-value":0},model:{value:t.course.status,callback:function(e){t.$set(t.course,"status",e)},expression:"course.status"}})],1)],1)],1)],1)],1),a("el-col",{attrs:{lg:12}},[a("div",{staticClass:"sub-header"},[a("div",{staticClass:"sub-header-title"},[t._v("课程章节")])]),a("div",{staticClass:"chapter-container"},[a("draggable",{attrs:{group:"chapter",handle:".chapter-item-draggable"},on:{change:t.handleChapterSort},model:{value:t.course.chapters,callback:function(e){t.$set(t.course,"chapters",e)},expression:"course.chapters"}},t._l(t.course.chapters,(function(e,n){return a("div",{key:e.id,staticClass:"chapter-item"},[a("div",{staticClass:"chapter-item-title"},[a("i",{staticClass:"el-icon-rank chapter-item-draggable"}),a("span",[t._v(t._s(e.name))]),a("div",{staticClass:"chapter-item-ctrl"},[a("el-dropdown",{attrs:{trigger:"hover"},on:{command:t.handleChapter}},[a("span",{staticClass:"icon-ctrl"},[a("i",{staticClass:"el-icon-more"})]),a("el-dropdown-menu",{attrs:{slot:"dropdown"},slot:"dropdown"},[a("el-dropdown-item",{attrs:{command:"1-"+n}},[t._v("编辑")]),a("el-dropdown-item",{attrs:{command:"0-"+n}},[t._v("删除")])],1)],1)],1)]),a("div",{staticClass:"chapter-item-section"},[a("draggable",{attrs:{handle:".section-item-draggable",group:"section"},on:{change:function(e){return t.handleSectionSort(e,n)}},model:{value:e.sections,callback:function(a){t.$set(e,"sections",a)},expression:"chapter.sections"}},t._l(e.sections,(function(e,i){return a("div",{key:e.id,staticClass:"section-item"},[a("div",{staticClass:"section-item-text"},[a("i",{staticClass:"el-icon-rank section-item-draggable"}),a("span",[t._v(t._s(e.name))]),a("div",{staticClass:"section-item-ctrl"},[a("el-dropdown",{attrs:{trigger:"hover"},on:{command:t.handleSection}},[a("span",{staticClass:"icon-ctrl"},[a("i",{staticClass:"el-icon-more"})]),a("el-dropdown-menu",{attrs:{slot:"dropdown"},slot:"dropdown"},[a("el-dropdown-item",{attrs:{command:"2-"+n+"-"+i}},[t._v("内容")]),a("el-dropdown-item",{attrs:{command:"1-"+n+"-"+i}},[t._v("编辑")]),a("el-dropdown-item",{attrs:{command:"0-"+n+"-"+i}},[t._v("删除")])],1)],1)],1)])])})),0),a("div",{staticClass:"section-item",on:{click:function(e){return t.handleAddSection(n)}}},[a("div",{staticClass:"section-item-create"},[t._v(" 添加节 "),a("i",{staticClass:"el-icon-circle-plus"})])])],1)])})),0),a("div",{staticClass:"chapter-item-create",on:{click:t.handleAddChapter}},[t._v(" 添加章 "),a("i",{staticClass:"el-icon-circle-plus"})])],1)])],1),a("el-drawer",{attrs:{visible:t.drawerVisible,direction:"rtl",size:"50%","before-close":t.handleCloseDrawer},on:{"update:visible":function(e){t.drawerVisible=e}}},[a("div",{staticClass:"section-content"},[a("el-form",{attrs:{"label-position":"top",size:"mini",model:t.course}},[a("el-form-item",{attrs:{label:"小节名称："}},[a("div",{staticClass:"section-title"},[t._v(t._s(t.sectionInfo.name))])]),a("el-form-item",{attrs:{label:"视频地址："}},[a("el-input",{model:{value:t.sectionInfo.video_url,callback:function(e){t.$set(t.sectionInfo,"video_url",e)},expression:"sectionInfo.video_url"}})],1),a("el-form-item",{attrs:{label:"课程内容："}},[a("mavon-editor",{ref:"md",staticClass:"md",attrs:{toolbars:t.markdownOption,subfield:!1},on:{imgAdd:t.handleImgAdd},model:{value:t.sectionInfo.content,callback:function(e){t.$set(t.sectionInfo,"content",e)},expression:"sectionInfo.content"}})],1),a("el-form-item",[a("el-button",{attrs:{size:"medium",type:"primary"},on:{click:t.handleSaveSection}},[t._v("保存")])],1)],1)],1)])],1)},It=[],Tt=(a("a9e3"),a("b2d8")),Vt=(a("64e1"),a("310e")),Dt=a.n(Vt),Ot={create:function(t){return dt.post(pt.chapter,t)},edit:function(t,e){return dt.put(pt.chapterItem(t),e)},destory:function(t){return dt.delete(pt.chapterItem(t))},sort:function(t){return dt.post(pt.chapterSort,t)}},Ft=Ot,Bt={create:function(t){return dt.post(pt.section,t)},edit:function(t,e){return dt.put(pt.sectionItem(t),e)},destory:function(t){return dt.delete(pt.sectionItem(t))},sort:function(t){return dt.post(pt.sectionSort,t)},show:function(t){return dt.get(pt.sectionItem(t))}},Ut=Bt,Nt={bold:!0,mark:!0,quote:!0,ol:!0,ul:!0,link:!0,imagelink:!0,code:!0,table:!0},Mt={data:function(){return{loading:!0,markdownOption:Nt,isEdit:!1,drawerVisible:!1,fileList:[],course:{id:null,name:"",short_name:"",tips:"",description:"",status:0,image_url:"",chapters:[]},sectionInfo:{name:"",video_url:"",content:"",id:null}}},created:function(){this.getData()},methods:{getData:function(){var t=this,e=this.$route.params.id;ft.show(e).then((function(e){t.course=e.course})).finally((function(){t.loading=!1}))},handleEdit:function(){var t=this,e=this.$route.params.id;this.isEdit=!this.isEdit,this.isEdit||(this.loading=!0,ft.edit(e,Object(at["a"])({},this.course)).then((function(){t.$message.success("编辑成功")})).finally((function(){t.loading=!1})))},handleBeforeUpload:function(t){var e=this;return xt.start(t).then((function(t){e.course.image_url=t.imageUrl})),Promise.reject({})},handleAddChapter:function(){var t=this,e=Number(this.$route.params.id),a=this.course.chapters.length+1;this.$prompt("请输入章节名称","新增章",{confirmButtonText:"确定",cancelButtonText:"取消",inputPattern:/\S/,inputErrorMessage:"输入不能为空"}).then((function(n){var i=n.value;t.loading=!0,Ft.create({sort:a,course_id:e,name:i}).then((function(e){t.$message.success("添加章节成功"),t.course.chapters.push({id:e.id,name:i,sections:[],sort:a})})).finally((function(){t.loading=!1}))}))},handleAddSection:function(t){var e=this,a=this.course.chapters[t],n=a.sections.length+1;this.$prompt("请输入节名称",a.name,{confirmButtonText:"确定",cancelButtonText:"取消",inputPattern:/\S/,inputErrorMessage:"输入不能为空"}).then((function(i){var o=i.value;e.loading=!0,Ut.create({sort:n,chapter_id:a.id,name:o}).then((function(a){e.$message.success("添加节成功"),e.course.chapters[t].sections.push({id:a.id,name:o,sort:n})})).finally((function(){e.loading=!1}))}))},handleChapter:function(t){var e=this,a=t.split("-"),n=a[0],i=a[1],o=this.course.chapters[i];"1"===n?this.$prompt("请编辑章名称","编辑章",{confirmButtonText:"确定",cancelButtonText:"取消",inputPattern:/\S/,inputErrorMessage:"输入不能为空",inputValue:o.name}).then((function(t){var a=t.value;e.loading=!0,Ft.edit(o.id,{name:a}).then((function(){e.$message.success("编辑章节成功"),o.name=a})).finally((function(){e.loading=!1}))})):(this.loading=!0,this.$confirm("确认删除「"+o.name+"」吗？").then((function(){return Ft.destory(o.id)})).then((function(){e.course.chapters.splice(i,1)})).finally((function(){e.loading=!1})))},handleSection:function(t){var e=t.split("-"),a=e[0],n=e[1],i=e[2];"1"===a?this.handleEditSection(n,i):"2"===a?this.handleOpenDrawer(n,i):this.handleDelSection(n,i)},handleEditSection:function(t,e){var a=this,n=this.course.chapters[t],i=n.sections[e];this.$prompt("请编辑节名称",n.name,{confirmButtonText:"确定",cancelButtonText:"取消",inputPattern:/\S/,inputErrorMessage:"输入不能为空",inputValue:i.name}).then((function(t){var e=t.value;a.loading=!0,Ut.edit(i.id,{name:e}).then((function(){a.$message.success("编辑节成功"),i.name=e})).finally((function(){a.loading=!1}))}))},handleDelSection:function(t,e){var a=this.course.chapters[t],n=a.sections[e].name,i=a.sections[e].id;this.$confirm("确认删除「"+n+"」吗？").then((function(){return Ut.destory(i)})).then((function(){a.sections.splice(e,1)}))},handleChapterSort:function(){var t=this,e=this.course.chapters.map((function(t){return t.id}));Ft.sort({chapters:e}).then((function(){t.$message.success("章节排序成功")}))},handleSectionSort:function(t,e){var a=this;if(t.added||t.moved){var n=this.course.chapters[e].sections.map((function(t){return t.id})),i=this.course.chapters[e].id;Ut.sort({sections:n,chapter_id:i}).then((function(){a.$message.success("节排序成功")}))}},handleOpenDrawer:function(t,e){var a=this,n=this.course.chapters[t],i=n.sections[e].name,o=n.sections[e].id;this.drawerVisible=!0,this.drawerTitle=i,this.loading=!0,Ut.show(o).then((function(t){a.sectionInfo=t.section})).finally((function(){a.loading=!1}))},handleSaveSection:function(){var t=this,e=this.sectionInfo,a=e.id,n=e.name,i=e.video_url,o=e.content;this.loading=!0,Ut.edit(a,{name:n,video_url:i,content:o}).then((function(){t.$message.success("保存成功"),t.drawerVisible=!1})).finally((function(){t.loading=!1}))},handleCloseDrawer:function(t){this.$confirm("确认关闭？").then((function(){t()})).catch((function(){}))},handleImgAdd:function(t,e){var a=this;xt.start(e).then((function(e){a.$refs.md.$img2Url(t,e.imageUrl)}))}},components:{draggable:Dt.a,mavonEditor:Tt["mavonEditor"]}},At=Mt,Lt=(a("f432"),Object(s["a"])(At,Et,It,!1,null,"5730bfc5",null)),Rt=Lt.exports,Zt=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{directives:[{name:"loading",rawName:"v-loading",value:t.loading,expression:"loading"}],staticClass:"page-content"},[a("router-link",{attrs:{to:{name:"ZhiyeCreate"}}},[a("el-button",{attrs:{size:"medium",type:"primary",plain:""}},[t._v("创建职业")])],1),a("el-table",{staticClass:"mt-20",attrs:{data:t.zhiyes,size:"medium"}},[a("el-table-column",{attrs:{prop:"id",label:"id",width:"80px"}}),a("el-table-column",{attrs:{prop:"name",label:"名称"}}),a("el-table-column",{attrs:{prop:"status",label:"状态",width:"120px",align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("el-tag",{attrs:{type:e.row.status?"success":"danger",size:"small"}},[t._v(" "+t._s(e.row.status?"已完成":"未完成")+" ")])]}}])}),a("el-table-column",{attrs:{label:"操作",width:"180px",align:"right"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("el-dropdown",{attrs:{trigger:"hover"},on:{command:t.handleCommand}},[a("span",{staticClass:"icon-ctrl"},[a("i",{staticClass:"el-icon-more"})]),a("el-dropdown-menu",{attrs:{slot:"dropdown"},slot:"dropdown"},[a("el-dropdown-item",{attrs:{command:"edit-"+e.row.id+"-"+e.$index}},[t._v("编辑")]),a("el-dropdown-item",{attrs:{command:"delete-"+e.row.id+"-"+e.$index}},[t._v("删除")])],1)],1)]}}])})],1),a("el-pagination",{staticClass:"mt-20",attrs:{background:"",layout:"total, prev, pager, next, jumper","current-page":t.pagination.currentPage,"page-size":t.pagination.pageSize,total:t.pagination.total,"hide-on-single-page":!0},on:{"current-change":t.getData,"update:currentPage":function(e){return t.$set(t.pagination,"currentPage",e)},"update:current-page":function(e){return t.$set(t.pagination,"currentPage",e)}}})],1)},qt=[],Ht={create:function(t){return dt.post(pt.zhiye,t)},index:function(t){return dt.get(pt.zhiye,t)},show:function(t){return dt.get(pt.zhiyeItem(t))},edit:function(t,e){return dt.put(pt.zhiyeItem(t),e)},destory:function(t){return dt.delete(pt.zhiyeItem(t))},createPath:function(t){return dt.post(pt.zhiyePath,t)},editPath:function(t,e){return dt.put(pt.zhiyePathItem(t),e)},destoryPath:function(t){return dt.delete(pt.zhiyePathItem(t))},sortPath:function(t){return dt.post(pt.zhiyePathSort,t)},createCourse:function(t){return dt.post(pt.zhiyeCourse,t)},destoryCourse:function(t){return dt.delete(pt.zhiyeCourseItem(t))},sortCourse:function(t){return dt.post(pt.zhiyeCourseSort,t)}},Jt=Ht,Gt={data:function(){return{loading:!0,zhiyes:[],pagination:{currentPage:1,pageSize:10,total:0}}},created:function(){this.getData()},methods:{getData:function(){var t=this,e={page_size:this.pagination.pageSize,current_page:this.pagination.currentPage};this.loading=!0,Jt.index(e).then((function(e){t.zhiyes=e.rows,t.pagination.currentPage=e.pagination.current_page,t.pagination.pageSize=e.pagination.page_size,t.pagination.total=e.pagination.total})).finally((function(){t.loading=!1}))},handleCommand:function(t){var e=t.split("-")[0],a=t.split("-")[1],n=t.split("-")[2];"edit"===e?this.$router.push({name:"ZhiyeEdit",params:{id:a}}):"delete"===e&&this.delZhiyes(n)},delZhiyes:function(t){var e=this,a=this.zhiyes[t].id;this.$confirm("确认删除吗？").then((function(){return Jt.destory(a)})).then((function(){e.$message.success("删除课程成功"),e.zhiyes.splice(t,1)})).catch((function(){}))}}},Kt=Gt,Qt=(a("4701"),Object(s["a"])(Kt,Zt,qt,!1,null,null,null)),Wt=Qt.exports,Xt=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"page-content"},[a("div",{staticClass:"c-650"},[t._m(0),a("el-form",{attrs:{"label-position":"top","label-width":"80px",size:"mini"}},[a("el-form-item",{attrs:{label:"职业名称："}},[a("el-input",{model:{value:t.zhiye.name,callback:function(e){t.$set(t.zhiye,"name",e)},expression:"zhiye.name"}})],1),a("el-form-item",{attrs:{label:"职业描述："}},[a("el-input",{attrs:{type:"textarea"},model:{value:t.zhiye.description,callback:function(e){t.$set(t.zhiye,"description",e)},expression:"zhiye.description"}})],1),a("el-form-item",{attrs:{label:"职业封面："}},[a("el-upload",{ref:"upload",staticClass:"zhiye-image-upload",attrs:{action:"",limit:1,"file-list":t.fileList,"before-upload":t.handleBeforeUpload,accept:"image/jpg, image/jpeg, image/png"}},[t.zhiye.image_url?t._e():a("i",{staticClass:"el-icon-plus el-uploader__icon"}),t.zhiye.image_url?a("img",{staticClass:"zhiye-image-upload",attrs:{src:t.zhiye.image_url}}):t._e()])],1),a("el-form-item",[a("el-button",{attrs:{size:"medium",type:"primary",plain:""},on:{click:t.handleSubmit}},[t._v("创建职业")])],1)],1)],1)])},Yt=[function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"sub-header"},[a("div",{staticClass:"sub-header-title"},[t._v("基本信息")])])}],te={data:function(){return{fileList:[],zhiye:{name:"",description:"",image_url:"",status:0}}},methods:{handleSubmit:function(){var t=this;this.loading=!0,Jt.create(this.zhiye).then((function(e){t.$message.success("创建职业成功"),t.$router.push({name:"ZhiyeEdit",params:{id:e.id}})})).finally((function(){t.loading=!1}))},handleBeforeUpload:function(t){var e=this;return xt.start(t).then((function(t){e.zhiye.image_url=t.imageUrl})),Promise.reject({})}}},ee=te,ae=(a("8e17"),Object(s["a"])(ee,Xt,Yt,!1,null,"c0e31e66",null)),ne=ae.exports,ie=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{directives:[{name:"loading",rawName:"v-loading",value:t.loading,expression:"loading"}],staticClass:"page-content"},[a("el-row",{attrs:{gutter:60}},[a("el-col",{attrs:{lg:12}},[a("div",{staticClass:"sub-header"},[a("div",{staticClass:"sub-header-title"},[t._v("基本信息")]),a("div",{staticClass:"sub-header-fd"},[a("el-button",{attrs:{size:"medium",type:t.isEdit?"primary":""},on:{click:t.handleZhiyeEdit}},[t._v(" "+t._s(t.isEdit?"保存":"修改")+" ")])],1)]),a("el-form",{attrs:{"label-position":"top",size:"mini",model:t.zhiye}},[a("el-form-item",{attrs:{label:"课程名称："}},[a("el-input",{attrs:{disabled:!t.isEdit},model:{value:t.zhiye.name,callback:function(e){t.$set(t.zhiye,"name",e)},expression:"zhiye.name"}})],1),a("el-form-item",{attrs:{label:"课程描述："}},[a("el-input",{attrs:{type:"textarea",disabled:!t.isEdit},model:{value:t.zhiye.description,callback:function(e){t.$set(t.zhiye,"description",e)},expression:"zhiye.description"}})],1),a("el-row",{attrs:{gutter:20}},[a("el-col",{attrs:{lg:12}},[a("el-form-item",{attrs:{label:"课程封面："}},[t.isEdit?a("el-upload",{ref:"upload",staticClass:"el-image-upload",attrs:{action:"",limit:1,"file-list":t.fileList,"before-upload":t.handleBeforeUpload,accept:"image/jpg, image/jpeg, image/png"}},[t.zhiye.image_url?t._e():a("i",{staticClass:"el-icon-plus el-uploader__icon"}),t.zhiye.image_url?a("img",{staticClass:"el-image-upload",attrs:{src:t.zhiye.image_url}}):t._e()]):t._e(),!t.isEdit&&t.zhiye.image_url?a("img",{staticClass:"el-image-upload",attrs:{src:t.zhiye.image_url}}):t._e(),t.isEdit||t.zhiye.image_url?t._e():a("span",[t._v("无")])],1)],1),a("el-col",{attrs:{lg:12}},[a("el-form-item",{attrs:{label:"课程状态："}},[a("el-switch",{attrs:{disabled:!t.isEdit,"active-value":1,"inactive-value":0},model:{value:t.zhiye.status,callback:function(e){t.$set(t.zhiye,"status",e)},expression:"zhiye.status"}})],1)],1)],1)],1)],1),a("el-col",{attrs:{lg:12}},[a("div",{staticClass:"sub-header"},[a("div",{staticClass:"sub-header-title"},[t._v("职业路径")])]),a("div",{staticClass:"path-container"},[a("draggable",{attrs:{group:"path",handle:".path-item-draggable"},on:{change:t.handleSortPath},model:{value:t.paths,callback:function(e){t.paths=e},expression:"paths"}},t._l(t.paths,(function(e,n){return a("div",{key:e.id,staticClass:"path-item"},[a("div",{staticClass:"path-item-title"},[a("i",{staticClass:"el-icon-rank path-item-draggable"}),a("span",[t._v(t._s(e.name))]),a("div",{staticClass:"path-item-ctrl"},[a("el-dropdown",{attrs:{trigger:"hover"},on:{command:t.handleCommandPath}},[a("span",{staticClass:"icon-ctrl"},[a("i",{staticClass:"el-icon-more"})]),a("el-dropdown-menu",{attrs:{slot:"dropdown"},slot:"dropdown"},[a("el-dropdown-item",{attrs:{command:"1-"+n}},[t._v("编辑")]),a("el-dropdown-item",{attrs:{command:"0-"+n}},[t._v("删除")])],1)],1)],1)]),a("div",{staticClass:"path-item-course"},[a("draggable",{attrs:{handle:".course-item-draggable",group:"course"},on:{change:function(e){return t.handleSortCourse(e,n)}},model:{value:e.courses,callback:function(a){t.$set(e,"courses",a)},expression:"path.courses"}},t._l(e.courses,(function(e,i){return a("div",{key:i,staticClass:"course-item"},[a("div",{staticClass:"course-item-text"},[a("i",{staticClass:"el-icon-rank course-item-draggable"}),a("span",[t._v(t._s(e.name))]),a("div",{staticClass:"course-item-ctrl"},[a("el-dropdown",{attrs:{trigger:"hover"},on:{command:t.handleCommandCourse}},[a("span",{staticClass:"icon-ctrl"},[a("i",{staticClass:"el-icon-more"})]),a("el-dropdown-menu",{attrs:{slot:"dropdown"},slot:"dropdown"},[a("el-dropdown-item",{attrs:{command:"0-"+n+"-"+i}},[t._v("删除")])],1)],1)],1)])])})),0),a("div",{staticClass:"course-item",on:{click:function(e){return t.handleAddCourse(n)}}},[a("div",{staticClass:"course-item-create"},[t._v(" 添加关联课程 "),a("i",{staticClass:"el-icon-circle-plus"})])])],1)])})),0),a("div",{staticClass:"path-item-create",on:{click:t.handletoCreatePath}},[t._v(" 添加路径 "),a("i",{staticClass:"el-icon-circle-plus"})])],1)])],1),a("el-dialog",{attrs:{title:"create"===t.dialogFormType?"添加职业路径":"修改职业路径",visible:t.dialogFormVisible},on:{"update:visible":function(e){t.dialogFormVisible=e}}},[a("el-form",{attrs:{model:t.dialogForm}},[a("el-form-item",{attrs:{label:"路径名称"}},[a("el-input",{model:{value:t.dialogForm.name,callback:function(e){t.$set(t.dialogForm,"name",e)},expression:"dialogForm.name"}})],1),a("el-form-item",{attrs:{label:"路径描述"}},[a("el-input",{attrs:{type:"textarea"},model:{value:t.dialogForm.description,callback:function(e){t.$set(t.dialogForm,"description",e)},expression:"dialogForm.description"}})],1)],1),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(e){t.dialogFormVisible=!1}}},[t._v("取 消")]),a("el-button",{attrs:{type:"primary"},on:{click:t.handlePathSubimt}},[t._v("确 定")])],1)],1)],1)},oe=[],se=(a("a4d3"),a("e01a"),{data:function(){return{loading:!0,isEdit:!1,dialogFormType:"create",dialogFormVisible:!1,dialogForm:{id:null,name:"",description:"",pathIndex:null},drawerVisible:!1,fileList:[],zhiye:{id:null,name:"",description:"",status:0,image_url:""},paths:[]}},created:function(){this.getData()},methods:{getData:function(){var t=this,e=this.$route.params.id;Jt.show(e).then((function(e){t.zhiye=e.zhiye,t.paths=e.zhiye.zhiye_paths})).finally((function(){t.loading=!1}))},handleZhiyeEdit:function(){var t=this,e=this.$route.params.id;this.isEdit=!this.isEdit,this.isEdit||(this.loading=!0,Jt.edit(e,Object(at["a"])({},this.zhiye)).then((function(){t.$message.success("编辑成功")})).finally((function(){t.loading=!1})))},handleBeforeUpload:function(t){var e=this;return xt.start(t).then((function(t){e.zhiye.image_url=t.imageUrl})),Promise.reject({})},handletoCreatePath:function(){this.dialogFormType="create",this.dialogFormVisible=!0,this.dialogForm.id="",this.dialogForm.name="",this.dialogForm.description="",this.dialogForm.pathIndex=""},handlePathSubimt:function(){"create"===this.dialogFormType?this.handleCreatePath():this.handleEditPath()},handleCreatePath:function(){var t=this,e=Number(this.$route.params.id),a=this.paths.length+1,n=this.dialogForm.name,i=this.dialogForm.description;this.loading=!0,Jt.createPath({sort:a,zhiye_id:e,name:n,description:i}).then((function(e){t.$message.success("添加路径成功"),t.paths.push({id:e.id,name:n,description:i,sort:a,courses:[]})})).finally((function(){t.loading=!1,t.dialogFormVisible=!1}))},handleEditPath:function(){var t=this,e=Number(this.$route.params.id),a=this.dialogForm.id,n=this.dialogForm.name,i=this.dialogForm.description,o=this.dialogForm.pathIndex;this.loading=!0,Jt.editPath(a,{zhiye_id:e,name:n,description:i}).then((function(){t.$message.success("编辑成功"),t.paths[o].name=n,t.paths[o].description=i})).finally((function(){t.loading=!1,t.dialogFormVisible=!1}))},handleDestoryPath:function(t){var e=this,a=this.paths[t];this.loading=!0,this.$confirm("确认删除「"+a.name+"」吗？").then((function(){return Jt.destoryPath(a.id)})).then((function(){e.paths.splice(t,1)})).finally((function(){e.loading=!1}))},handleCommandPath:function(t){var e=t.split("-"),a=e[0],n=e[1],i=this.paths[n];"1"===a?(this.dialogFormType="edit",this.dialogFormVisible=!0,this.dialogForm.name=i.name,this.dialogForm.description=i.description,this.dialogForm.id=i.id,this.dialogForm.pathIndex=n):this.handleDestoryPath(n)},handleSortPath:function(){var t=this,e=this.paths.map((function(t){return t.id}));Jt.sortPath({paths:e}).then((function(){t.$message.success("路径排序成功")}))},handleSortCourse:function(t,e){var a=this;if(t.added||t.moved){var n=this.paths[e].courses.map((function(t){return t.zhiye_course.id})),i=this.paths[e].id;Jt.sortCourse({courses:n,path_id:i}).then((function(){a.$message.success("关联课程排序成功")}))}},handleImgAdd:function(t,e){var a=this;xt.start(e).then((function(e){a.$refs.md.$img2Url(t,e.imageUrl)}))},handleAddCourse:function(t){var e=this,a=this.paths[t].id,n=Number(this.$route.params.id),i=this.paths[t].courses.length+1;this.$prompt("请输入课程 ID","关联课程",{confirmButtonText:"确定",cancelButtonText:"取消",inputPattern:/^\d+$/,inputErrorMessage:"输入课程 ID，课程 ID 为数字"}).then((function(t){var o=t.value;e.loading=!0,Jt.createCourse({path_id:a,zhiye_id:n,sort:i,course_id:Number(o)}).then((function(){e.$message.success("添加课程成功"),e.getData()})).finally((function(){e.loading=!1}))}))},handleCommandCourse:function(t){var e=this,a=t.split("-"),n=Number(a[0]),i=a[1],o=a[2],s=this.paths[i],r=s.courses[o],l=r.zhiye_course.id;n||(this.loading=!0,this.$confirm("确认删除「"+r.name+"」吗？").then((function(){return Jt.destoryCourse(l)})).then((function(){e.paths[i].courses.splice(o,1)})).finally((function(){e.loading=!1})))}},components:{draggable:Dt.a}}),re=se,le=(a("f5b2"),Object(s["a"])(re,ie,oe,!1,null,"25f98a8d",null)),ce=le.exports,ue=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{directives:[{name:"loading",rawName:"v-loading",value:t.loading,expression:"loading"}],staticClass:"page-content"},[a("router-link",{attrs:{to:{name:"CompanyCreate"}}},[a("el-button",{attrs:{size:"medium",type:"primary",plain:""}},[t._v("创建企业")])],1),a("el-table",{staticClass:"mt-20",attrs:{data:t.companies,size:"medium"}},[a("el-table-column",{attrs:{prop:"id",label:"id",width:"80px"}}),a("el-table-column",{attrs:{prop:"name",label:"名称"}}),a("el-table-column",{attrs:{label:"操作",width:"180px",align:"right"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("el-dropdown",{attrs:{trigger:"hover"},on:{command:t.handleCommand}},[a("span",{staticClass:"icon-ctrl"},[a("i",{staticClass:"el-icon-more"})]),a("el-dropdown-menu",{attrs:{slot:"dropdown"},slot:"dropdown"},[a("el-dropdown-item",{attrs:{command:"edit-"+e.row.id+"-"+e.$index}},[t._v("编辑")]),a("el-dropdown-item",{attrs:{command:"delete-"+e.row.id+"-"+e.$index}},[t._v("删除")])],1)],1)]}}])})],1),a("el-pagination",{staticClass:"mt-20",attrs:{background:"",layout:"total, prev, pager, next, jumper","current-page":t.pagination.currentPage,"page-size":t.pagination.pageSize,total:t.pagination.total,"hide-on-single-page":!0},on:{"current-change":t.getData,"update:currentPage":function(e){return t.$set(t.pagination,"currentPage",e)},"update:current-page":function(e){return t.$set(t.pagination,"currentPage",e)}}})],1)},de=[],me={create:function(t){return dt.post(pt.company,t)},index:function(t){return dt.get(pt.company,t)},show:function(t){return dt.get(pt.companyItem(t))},edit:function(t,e){return dt.put(pt.companyItem(t),e)},destory:function(t){return dt.delete(pt.companyItem(t))}},pe=me,he={data:function(){return{loading:!0,companies:[],pagination:{currentPage:1,pageSize:10,total:0}}},created:function(){this.getData()},methods:{getData:function(){var t=this,e={page_size:this.pagination.pageSize,current_page:this.pagination.currentPage};this.loading=!0,pe.index(e).then((function(e){t.companies=e.rows,t.pagination.currentPage=e.pagination.current_page,t.pagination.pageSize=e.pagination.page_size,t.pagination.total=e.pagination.total})).finally((function(){t.loading=!1}))},handleCommand:function(t){var e=t.split("-")[0],a=t.split("-")[1],n=t.split("-")[2];"edit"===e?this.$router.push({name:"CompanyEdit",params:{id:a}}):"delete"===e&&this.companyDestory(n)},companyDestory:function(t){var e=this,a=this.companies[t].id,n=this.companies[t].name;this.$confirm("确认删除企业「".concat(n,"」吗？")).then((function(){return pe.destory(a)})).then((function(){e.$message.success("删除企业成功"),e.companies.splice(t,1)})).catch((function(){}))}}},fe=he,ge=(a("01c2"),Object(s["a"])(fe,ue,de,!1,null,null,null)),ve=ge.exports,be=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"page-content"},[a("div",{staticClass:"c-650"},[t._m(0),a("el-form",{attrs:{"label-position":"top","label-width":"80px",size:"mini"}},[a("el-row",{attrs:{gutter:20}},[a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:"企业全称:"}},[a("el-input",{model:{value:t.company.name,callback:function(e){t.$set(t.company,"name",e)},expression:"company.name"}})],1)],1),a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:"企业短称:"}},[a("el-input",{model:{value:t.company.short_name,callback:function(e){t.$set(t.company,"short_name",e)},expression:"company.short_name"}})],1)],1)],1),a("el-row",{attrs:{gutter:20}},[a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:"企业口号:"}},[a("el-input",{model:{value:t.company.slogan,callback:function(e){t.$set(t.company,"slogan",e)},expression:"company.slogan"}})],1)],1),a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:"社会编号:"}},[a("el-input",{model:{value:t.company.code,callback:function(e){t.$set(t.company,"code",e)},expression:"company.code"}})],1)],1)],1),a("el-row",{attrs:{gutter:20}},[a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:"联系人名称:"}},[a("el-input",{model:{value:t.company.contact_name,callback:function(e){t.$set(t.company,"contact_name",e)},expression:"company.contact_name"}})],1)],1),a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:"联系人电话:"}},[a("el-input",{model:{value:t.company.contact_phone,callback:function(e){t.$set(t.company,"contact_phone",e)},expression:"company.contact_phone"}})],1)],1)],1),a("el-form-item",{attrs:{label:"企业介绍："}},[a("el-input",{attrs:{type:"textarea"},model:{value:t.company.introduction,callback:function(e){t.$set(t.company,"introduction",e)},expression:"company.introduction"}})],1),a("el-form-item",{attrs:{label:"企业封面："}},[a("el-upload",{ref:"upload",staticClass:"el-image-upload",attrs:{action:"",limit:1,"file-list":t.fileList,"before-upload":t.handleBeforeUpload,accept:"image/jpg, image/jpeg, image/png"}},[t.company.image_url?t._e():a("i",{staticClass:"el-icon-plus el-uploader__icon"}),t.company.image_url?a("img",{staticClass:"el-image-upload",attrs:{src:t.company.image_url}}):t._e()])],1),a("el-form-item",[a("el-button",{attrs:{size:"medium",type:"primary",plain:""},on:{click:t.handleSubmit}},[t._v("创建")])],1)],1)],1)])},ye=[function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"sub-header"},[a("div",{staticClass:"sub-header-title"},[t._v("基本信息")])])}],_e={data:function(){return{fileList:[],company:{name:"",short_name:"",slogan:"",code:"",introduction:"",contact_name:"",contact_phone:"",image_url:""}}},methods:{handleSubmit:function(){var t=this;this.loading=!0,pe.create(this.company).then((function(){t.$message.success("创建企业成功"),t.$router.push({name:"Company"})})).finally((function(){t.loading=!1}))},handleBeforeUpload:function(t){var e=this;return xt.start(t).then((function(t){e.company.image_url=t.imageUrl})),Promise.reject({})}}},Ce=_e,we=(a("2ab9"),Object(s["a"])(Ce,be,ye,!1,null,"ec51d53a",null)),ke=we.exports,$e=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"page-content"},[a("div",{staticClass:"c-650"},[t._m(0),a("el-form",{attrs:{"label-position":"top","label-width":"80px",size:"mini"}},[a("el-row",{attrs:{gutter:20}},[a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:"企业全称:"}},[a("el-input",{model:{value:t.company.name,callback:function(e){t.$set(t.company,"name",e)},expression:"company.name"}})],1)],1),a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:"企业短称:"}},[a("el-input",{model:{value:t.company.short_name,callback:function(e){t.$set(t.company,"short_name",e)},expression:"company.short_name"}})],1)],1)],1),a("el-row",{attrs:{gutter:20}},[a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:"企业口号:"}},[a("el-input",{model:{value:t.company.slogan,callback:function(e){t.$set(t.company,"slogan",e)},expression:"company.slogan"}})],1)],1),a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:"社会编号:"}},[a("el-input",{model:{value:t.company.code,callback:function(e){t.$set(t.company,"code",e)},expression:"company.code"}})],1)],1)],1),a("el-row",{attrs:{gutter:20}},[a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:"联系人名称:"}},[a("el-input",{model:{value:t.company.contact_name,callback:function(e){t.$set(t.company,"contact_name",e)},expression:"company.contact_name"}})],1)],1),a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:"联系人电话:"}},[a("el-input",{model:{value:t.company.contact_phone,callback:function(e){t.$set(t.company,"contact_phone",e)},expression:"company.contact_phone"}})],1)],1)],1),a("el-form-item",{attrs:{label:"企业介绍："}},[a("el-input",{attrs:{type:"textarea"},model:{value:t.company.introduction,callback:function(e){t.$set(t.company,"introduction",e)},expression:"company.introduction"}})],1),a("el-form-item",{attrs:{label:"企业封面："}},[a("el-upload",{ref:"upload",staticClass:"el-image-upload",attrs:{action:"",limit:1,"file-list":t.fileList,"before-upload":t.handleBeforeUpload,accept:"image/jpg, image/jpeg, image/png"}},[t.company.image_url?t._e():a("i",{staticClass:"el-icon-plus el-uploader__icon"}),t.company.image_url?a("img",{staticClass:"el-image-upload",attrs:{src:t.company.image_url}}):t._e()])],1),a("el-form-item",[a("el-button",{attrs:{size:"medium",type:"primary",plain:""},on:{click:t.handleSubmit}},[t._v("保存")])],1)],1)],1)])},xe=[function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"sub-header"},[a("div",{staticClass:"sub-header-title"},[t._v("基本信息")])])}],je={data:function(){return{fileList:[],company:{name:"",short_name:"",slogan:"",code:"",introduction:"",contact_name:"",contact_phone:"",image_url:""}}},created:function(){var t=this,e=this.$route.params.id;pe.show(e).then((function(e){t.company=e.company}))},methods:{handleSubmit:function(){var t=this;this.loading=!0;var e=this.$route.params.id;pe.edit(e,this.company).then((function(){t.$message.success("修改企业成功"),t.$router.push({name:"Company"})})).finally((function(){t.loading=!1}))},handleBeforeUpload:function(t){var e=this;return xt.start(t).then((function(t){e.company.image_url=t.imageUrl})),Promise.reject({})}}},ze=je,Se=(a("b6ae"),Object(s["a"])(ze,$e,xe,!1,null,"8ddc58f8",null)),Pe=Se.exports,Ee=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{directives:[{name:"loading",rawName:"v-loading",value:t.loading,expression:"loading"}],staticClass:"page-content"},[a("router-link",{attrs:{to:{name:"ProjectCreate"}}},[a("el-button",{attrs:{size:"medium",type:"primary",plain:""}},[t._v("创建项目")])],1),a("el-table",{staticClass:"mt-20",attrs:{data:t.projects,size:"medium"}},[a("el-table-column",{attrs:{prop:"id",label:"id",width:"80px"}}),a("el-table-column",{attrs:{prop:"name",label:"名称"}}),a("el-table-column",{attrs:{label:"操作",width:"180px",align:"right"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("el-dropdown",{attrs:{trigger:"hover"},on:{command:t.handleCommand}},[a("span",{staticClass:"icon-ctrl"},[a("i",{staticClass:"el-icon-more"})]),a("el-dropdown-menu",{attrs:{slot:"dropdown"},slot:"dropdown"},[a("el-dropdown-item",{attrs:{command:"detail-"+e.row.id+"-"+e.$index}},[t._v("内容")]),a("el-dropdown-item",{attrs:{command:"edit-"+e.row.id+"-"+e.$index}},[t._v("编辑")]),a("el-dropdown-item",{attrs:{command:"delete-"+e.row.id+"-"+e.$index}},[t._v("删除")])],1)],1)]}}])})],1),a("el-pagination",{staticClass:"mt-20",attrs:{background:"",layout:"total, prev, pager, next, jumper","current-page":t.pagination.currentPage,"page-size":t.pagination.pageSize,total:t.pagination.total,"hide-on-single-page":!0},on:{"current-change":t.getData,"update:currentPage":function(e){return t.$set(t.pagination,"currentPage",e)},"update:current-page":function(e){return t.$set(t.pagination,"currentPage",e)}}})],1)},Ie=[],Te={create:function(t){return dt.post(pt.project,t)},index:function(t){return dt.get(pt.project,t)},show:function(t){return dt.get(pt.projectItem(t))},edit:function(t,e){return dt.put(pt.projectItem(t),e)},destory:function(t){return dt.delete(pt.projectItem(t))},createVersion:function(t){return dt.post(pt.projectVersion,t)},editVersion:function(t,e){return dt.put(pt.projectVersionItem(t),e)},destoryVersion:function(t){return dt.delete(pt.projectVersionItem(t))},sortVersion:function(t){return dt.post(pt.projectVersionSort,t)},createStory:function(t){return dt.post(pt.projectStory,t)},editStory:function(t,e){return dt.put(pt.projectStoryItem(t),e)},destoryStory:function(t){return dt.delete(pt.projectStoryItem(t))},sortStory:function(t){return dt.post(pt.projectStorySort,t)},showTask:function(t){return dt.get(pt.projectTaskItem(t))},createTask:function(t){return dt.post(pt.projectTask,t)},editTask:function(t,e){return dt.put(pt.projectTaskItem(t),e)},destoryTask:function(t){return dt.delete(pt.projectTaskItem(t))},sortTask:function(t){return dt.post(pt.projectTaskSort,t)}},Ve=Te,De={data:function(){return{loading:!0,projects:[],pagination:{currentPage:1,pageSize:10,total:0}}},created:function(){this.getData()},methods:{getData:function(){var t=this,e={page_size:this.pagination.pageSize,current_page:this.pagination.currentPage};this.loading=!0,Ve.index(e).then((function(e){t.projects=e.rows,t.pagination.currentPage=e.pagination.current_page,t.pagination.pageSize=e.pagination.page_size,t.pagination.total=e.pagination.total})).finally((function(){t.loading=!1}))},handleCommand:function(t){var e=t.split("-")[0],a=t.split("-")[1],n=t.split("-")[2];"edit"===e?this.$router.push({name:"ProjectEdit",params:{id:a}}):"delete"===e?this.projectDestory(n):"detail"===e&&this.$router.push({name:"ProjectItem",params:{id:a}})},projectDestory:function(t){var e=this,a=this.projects[t].id,n=this.projects[t].name;this.$confirm("确认删除项目「".concat(n,"」吗？")).then((function(){return Ve.destory(a)})).then((function(){e.$message.success("删除项目成功"),e.projects.splice(t,1)})).catch((function(){}))}}},Oe=De,Fe=(a("14ed"),Object(s["a"])(Oe,Ee,Ie,!1,null,null,null)),Be=Fe.exports,Ue=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{directives:[{name:"loading",rawName:"v-loading",value:t.loading,expression:"loading"}],staticClass:"page-content"},[a("h2",{staticClass:"project-title"},[t._v(t._s(t.project.name))]),a("div",{staticClass:"project-description"},[t._v(t._s(t.project.description))]),a("el-divider"),a("el-row",{attrs:{gutter:40}},[a("el-col",{attrs:{lg:8}},[a("h3",[t._v("版本")]),a("div",{staticClass:"version-container"},[a("draggable",{attrs:{group:"version",handle:".version-item-draggable"},on:{change:t.handleVersionSort},model:{value:t.versions,callback:function(e){t.versions=e},expression:"versions"}},t._l(t.versions,(function(e,n){return a("div",{key:e.id,class:["version-item",{active:t.versionId===e.id}],on:{click:function(a){return t.handleVersionCheckout(e.id)}}},[a("div",{staticClass:"version-item-title"},[a("i",{staticClass:"el-icon-rank version-item-draggable"}),a("span",[t._v(t._s(e.name))]),a("div",{staticClass:"version-item-ctrl"},[a("el-dropdown",{attrs:{trigger:"hover"},on:{command:t.handleVersionCommand}},[a("span",{staticClass:"icon-ctrl"},[a("i",{staticClass:"el-icon-more"})]),a("el-dropdown-menu",{attrs:{slot:"dropdown"},slot:"dropdown"},[a("el-dropdown-item",{attrs:{command:"1-"+n}},[t._v("编辑")]),a("el-dropdown-item",{attrs:{command:"0-"+n}},[t._v("删除")])],1)],1)],1)])])})),0),a("div",{staticClass:"version-item-create",on:{click:t.handleVersionCreate}},[t._v(" 添加版本 "),a("i",{staticClass:"el-icon-circle-plus"})])],1)]),a("el-col",{attrs:{lg:16}},[a("h3",[t._v("故事")]),t.versionId?a("div",{staticClass:"story-container"},[a("draggable",{attrs:{group:"story",handle:".story-item-draggable"},on:{change:t.handleStorySort},model:{value:t.stories,callback:function(e){t.stories=e},expression:"stories"}},t._l(t.stories,(function(e,n){return a("div",{key:e.id,staticClass:"story-item"},[a("div",{staticClass:"story-item-title"},[a("i",{staticClass:"el-icon-rank story-item-draggable"}),a("span",[t._v(t._s(e.name))]),a("div",{staticClass:"story-item-ctrl"},[a("el-dropdown",{attrs:{trigger:"hover"},on:{command:t.handleStoryCommand}},[a("span",{staticClass:"icon-ctrl"},[a("i",{staticClass:"el-icon-more"})]),a("el-dropdown-menu",{attrs:{slot:"dropdown"},slot:"dropdown"},[a("el-dropdown-item",{attrs:{command:"1-"+n}},[t._v("编辑")]),a("el-dropdown-item",{attrs:{command:"0-"+n}},[t._v("删除")])],1)],1)],1)]),a("div",{staticClass:"story-item-task"},[a("draggable",{attrs:{handle:".task-item-draggable",group:"task"},model:{value:e.tasks,callback:function(a){t.$set(e,"tasks",a)},expression:"story.tasks"}},t._l(e.tasks,(function(e,i){return a("div",{key:e.id,staticClass:"task-item"},[a("div",{staticClass:"task-item-text"},[a("i",{staticClass:"el-icon-rank task-item-draggable"}),a("span",[t._v(t._s(e.name))]),a("div",{staticClass:"task-item-ctrl"},[a("el-dropdown",{attrs:{trigger:"hover"},on:{command:t.handleTaskCommand}},[a("span",{staticClass:"icon-ctrl"},[a("i",{staticClass:"el-icon-more"})]),a("el-dropdown-menu",{attrs:{slot:"dropdown"},slot:"dropdown"},[a("el-dropdown-item",{attrs:{command:"1-"+n+"-"+i}},[t._v("内容")]),a("el-dropdown-item",{attrs:{command:"0-"+n+"-"+i}},[t._v("删除")])],1)],1)],1)])])})),0),a("div",{staticClass:"task-item",on:{click:function(e){return t.handleAddtask(n)}}},[a("div",{staticClass:"task-item-create"},[t._v(" 添加任务 "),a("i",{staticClass:"el-icon-circle-plus"})])])],1)])})),0),a("div",{staticClass:"story-item-create",on:{click:t.handleStoryCreate}},[t._v(" 添加故事 "),a("i",{staticClass:"el-icon-circle-plus"})])],1):t._e(),t.versionId?t._e():a("div",[t._v("👈 请点击选择版本")])])],1),a("el-drawer",{attrs:{visible:t.drawerVisible,direction:"rtl",size:"50%","before-close":t.handleCloseDrawer},on:{"update:visible":function(e){t.drawerVisible=e}}},[a("div",{staticClass:"task-content"},[a("el-form",{attrs:{"label-position":"top",size:"mini",model:t.task}},[a("el-form-item",{attrs:{label:"任务名称："}},[a("el-input",{model:{value:t.task.name,callback:function(e){t.$set(t.task,"name",e)},expression:"task.name"}})],1),a("el-row",{attrs:{gutter:40}},[a("el-col",{attrs:{lg:12}},[a("el-form-item",{attrs:{label:"任务难度："}},[a("el-select",{attrs:{placeholder:"请选择难度"},model:{value:t.task.level,callback:function(e){t.$set(t.task,"level",e)},expression:"task.level"}},[a("el-option",{attrs:{label:"入门",value:1}}),a("el-option",{attrs:{label:"初级",value:2}}),a("el-option",{attrs:{label:"中级",value:3}}),a("el-option",{attrs:{label:"高级",value:4}})],1)],1)],1),a("el-col",{attrs:{lg:12}},[a("el-form-item",{attrs:{label:"任务平台："}},[a("el-select",{attrs:{placeholder:"请选择平台"},model:{value:t.task.platform,callback:function(e){t.$set(t.task,"platform",e)},expression:"task.platform"}},[a("el-option",{attrs:{label:"API",value:1}}),a("el-option",{attrs:{label:"前台",value:2}}),a("el-option",{attrs:{label:"后台",value:3}}),a("el-option",{attrs:{label:"小程序",value:4}})],1)],1)],1)],1),a("el-form-item",{attrs:{label:"课任务内容："}},[a("mavon-editor",{ref:"md",staticClass:"md",attrs:{toolbars:t.markdownOption,subfield:!1},on:{imgAdd:t.handleImgAdd},model:{value:t.task.content,callback:function(e){t.$set(t.task,"content",e)},expression:"task.content"}})],1),a("el-form-item",[a("el-button",{attrs:{size:"medium",type:"primary"},on:{click:t.handleTaskSave}},[t._v("保存")])],1)],1)],1)])],1)},Ne=[],Me=(a("7db0"),{bold:!0,mark:!0,quote:!0,ol:!0,ul:!0,link:!0,imagelink:!0,code:!0,table:!0}),Ae={components:{draggable:Dt.a,mavonEditor:Tt["mavonEditor"]},data:function(){return{markdownOption:Me,loading:!0,project:{name:"",description:""},versionId:null,versions:[],stories:[],drawerVisible:!1,taskId:null,task:{name:"",content:"",level:"",platform:""}}},created:function(){this.getData()},watch:{versionId:function(t){var e=this.versions.find((function(e){return e.id===t}));this.stories=e.stories}},methods:{handleImgAdd:function(t,e){var a=this;xt.start(e).then((function(e){a.$refs.md.$img2Url(t,e.imageUrl)}))},getData:function(){var t=this,e=this.$route.params.id;Ve.show(e).then((function(e){t.project=e.project,t.versions=e.project.versions,t.versions.length&&(t.versionId=t.versions[0].id)})).finally((function(){t.loading=!1}))},handleVersionCheckout:function(t){this.versionId=t},handleVersionSort:function(){var t=this,e=this.versions.map((function(t){return t.id}));Ve.sortVersion({versions:e}).then((function(){t.$message.success("版本排序成功")}))},handleVersionCreate:function(){var t=this,e=Number(this.$route.params.id),a=this.versions.length+1;this.$prompt("请输入版本名称","新版本",{confirmButtonText:"确定",cancelButtonText:"取消",inputPattern:/\S/,inputErrorMessage:"输入不能为空"}).then((function(n){var i=n.value;t.loading=!0,Ve.createVersion({sort:a,project_id:e,name:i}).then((function(e){t.$message.success("添加章节成功"),t.versions.push({id:e.id,name:i,stories:[],sort:a})})).finally((function(){t.loading=!1}))}))},handleVersionCommand:function(t){var e=this,a=t.split("-"),n=a[0],i=a[1],o=this.versions[i];"1"===n?this.$prompt("请编辑章名称","编辑章",{confirmButtonText:"确定",cancelButtonText:"取消",inputPattern:/\S/,inputErrorMessage:"输入不能为空",inputValue:o.name}).then((function(t){var a=t.value;e.handleVersionEdit(o.id,{name:a},(function(){e.versions[i].name=a}))})):this.handleVersionDestory(o.id,i)},handleVersionEdit:function(t,e,a){var n=this;this.loading=!0,Ve.editVersion(t,e).then((function(){n.$message.success("编辑版本成功"),a()})).finally((function(){n.loading=!1}))},handleVersionDestory:function(t,e){var a=this;this.$confirm("确认删除「"+name+"」吗？").then((function(){return a.loading=!0,a.loading=!0,Ve.destoryVersion(t)})).then((function(){a.$message.success("版本删除成功"),a.versions.splice(e,1)})).finally((function(){a.loading=!1}))},handleStoryCreate:function(){var t=this,e=Number(this.$route.params.id),a=this.versionId,n=this.stories.length+1;this.$prompt("请输入故事名称","新故事",{confirmButtonText:"确定",cancelButtonText:"取消",inputPattern:/\S/,inputErrorMessage:"输入不能为空"}).then((function(i){var o=i.value;t.loading=!0,Ve.createStory({sort:n,project_id:e,version_id:a,name:o}).then((function(){t.$message.success("添加故事成功"),t.getData()})).finally((function(){t.loading=!1}))}))},handleStorySort:function(){var t=this,e=this.stories.map((function(t){return t.id}));Ve.sortStory({stories:e}).then((function(){t.$message.success("故事排序成功")}))},handleStoryCommand:function(t){var e=this,a=t.split("-"),n=a[0],i=a[1],o=this.stories[i];"1"===n?this.$prompt("请编辑章名称","编辑章",{confirmButtonText:"确定",cancelButtonText:"取消",inputPattern:/\S/,inputErrorMessage:"输入不能为空",inputValue:o.name}).then((function(t){var a=t.value;e.handleStoryEdit(o.id,{name:a},(function(){e.stories[i].name=a}))})):this.handleStoryDestory(o.id,i)},handleStoryEdit:function(t,e,a){var n=this;this.loading=!0,Ve.editStory(t,e).then((function(){n.$message.success("编辑故事成功"),a()})).finally((function(){n.loading=!1}))},handleStoryDestory:function(t,e){var a=this,n=this.stories[e].name;this.$confirm("确认删除「"+n+"」吗？").then((function(){return a.loading=!0,Ve.destoryStory(t)})).then((function(){a.$message.success("故事删除成功"),a.stories.splice(e,1)})).finally((function(){a.loading=!1}))},handleAddtask:function(t){var e=this,a=Number(this.$route.params.id),n=this.versionId,i=this.stories[t],o=i.id,s=i.tasks.length+1;this.$prompt("请输入任务名称","新任务",{confirmButtonText:"确定",cancelButtonText:"取消",inputPattern:/\S/,inputErrorMessage:"输入不能为空"}).then((function(i){var r=i.value;e.loading=!0,Ve.createTask({sort:s,project_id:a,version_id:n,story_id:o,name:r}).then((function(a){e.stories[t].tasks.push({id:a.id,name:r,sort:s}),e.$message.success("添加任务成功")})).finally((function(){e.loading=!1}))}))},handleTaskCommand:function(t){var e=t.split("-"),a=e[0],n=e[1],i=e[2],o=this.stories[n],s=o.tasks[i].id;"1"===a?this.handleOpenDrawer(s):this.handleTaskDestory(s,n,i)},handleOpenDrawer:function(t){var e=this;this.loading=!0,Ve.showTask(t).then((function(a){e.drawerVisible=!0,e.task=a.task,e.taskId=t})).finally((function(){e.loading=!1}))},handleTaskDestory:function(t,e,a){var n=this,i=this.stories[e].tasks[a].name;this.$confirm("确认删除「"+i+"」吗？").then((function(){return n.loading=!0,Ve.destoryTask(t)})).then((function(){n.$message.success("任务删除成功"),n.stories[e].tasks.splice(a,1)})).finally((function(){n.loading=!1}))},handleCloseDrawer:function(t){this.$confirm("确认关闭？").then((function(){t()})).catch((function(){}))},handleTaskSave:function(){var t=this,e=this.taskId,a=this.task;this.loading=!0,Ve.editTask(e,a).then((function(){t.$message.success("保存成功"),t.drawerVisible=!1})).finally((function(){t.loading=!1}))}}},Le=Ae,Re=(a("190a"),Object(s["a"])(Le,Ue,Ne,!1,null,"21230ace",null)),Ze=Re.exports,qe=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"page-content"},[a("div",{staticClass:"c-650"},[t._m(0),a("el-form",{attrs:{"label-position":"top","label-width":"80px",size:"mini"}},[a("el-form-item",{attrs:{label:"项目名称："}},[a("el-input",{model:{value:t.project.name,callback:function(e){t.$set(t.project,"name",e)},expression:"project.name"}})],1),a("el-form-item",{attrs:{label:"项目介绍："}},[a("el-input",{attrs:{type:"textarea"},model:{value:t.project.description,callback:function(e){t.$set(t.project,"description",e)},expression:"project.description"}})],1),a("el-form-item",{attrs:{label:"项目封面："}},[a("el-upload",{ref:"upload",staticClass:"el-image-upload",attrs:{action:"",limit:1,"file-list":t.fileList,"before-upload":t.handleBeforeUpload,accept:"image/jpg, image/jpeg, image/png"}},[t.project.image_url?t._e():a("i",{staticClass:"el-icon-plus el-uploader__icon"}),t.project.image_url?a("img",{staticClass:"el-image-upload",attrs:{src:t.project.image_url}}):t._e()])],1),a("el-form-item",[a("el-button",{attrs:{size:"medium",type:"primary",plain:""},on:{click:t.handleSubmit}},[t._v("创建")])],1)],1)],1)])},He=[function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"sub-header"},[a("div",{staticClass:"sub-header-title"},[t._v("基本信息")])])}],Je={data:function(){return{fileList:[],project:{name:"",description:"",image_url:""}}},created:function(){this.getData()},methods:{handleSubmit:function(){var t=this;this.loading=!0,Ve.create(this.project).then((function(){t.$message.success("创建项目成功"),t.$router.push({name:"Project"})})).finally((function(){t.loading=!1}))},handleBeforeUpload:function(t){var e=this;return xt.start(t).then((function(t){e.project.image_url=t.imageUrl})),Promise.reject({})}}},Ge=Je,Ke=(a("47dd"),Object(s["a"])(Ge,qe,He,!1,null,"29800090",null)),Qe=Ke.exports,We=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"page-content"},[a("div",{staticClass:"c-650"},[t._m(0),a("el-form",{attrs:{"label-position":"top","label-width":"80px",size:"mini"}},[a("el-form-item",{attrs:{label:"项目名称："}},[a("el-input",{model:{value:t.project.name,callback:function(e){t.$set(t.project,"name",e)},expression:"project.name"}})],1),a("el-form-item",{attrs:{label:"项目介绍："}},[a("el-input",{attrs:{type:"textarea"},model:{value:t.project.description,callback:function(e){t.$set(t.project,"description",e)},expression:"project.description"}})],1),a("el-form-item",{attrs:{label:"项目封面："}},[a("el-upload",{ref:"upload",staticClass:"el-image-upload",attrs:{action:"",limit:1,"file-list":t.fileList,"before-upload":t.handleBeforeUpload,accept:"image/jpg, image/jpeg, image/png"}},[t.project.image_url?t._e():a("i",{staticClass:"el-icon-plus el-uploader__icon"}),t.project.image_url?a("img",{staticClass:"el-image-upload",attrs:{src:t.project.image_url}}):t._e()])],1),a("el-form-item",[a("el-button",{attrs:{size:"medium",type:"primary",plain:""},on:{click:t.handleSubmit}},[t._v("保存")])],1)],1)],1)])},Xe=[function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"sub-header"},[a("div",{staticClass:"sub-header-title"},[t._v("基本信息")])])}],Ye={data:function(){return{fileList:[],project:{name:"",description:"",image_url:""}}},created:function(){this.getData()},methods:{getData:function(){var t=this,e=this.$route.params.id;Ve.show(e).then((function(e){t.project=e.project})).finally((function(){t.loading=!1}))},handleSubmit:function(){var t=this,e=this.$route.params.id;this.loading=!0,Ve.edit(e,this.project).then((function(){t.$message.success("项目编辑成功"),t.$router.push({name:"Project"})})).finally((function(){t.loading=!1}))},handleBeforeUpload:function(t){var e=this;return xt.start(t).then((function(t){e.project.image_url=t.imageUrl})),Promise.reject({})}}},ta=Ye,ea=(a("b56f"),Object(s["a"])(ta,We,Xe,!1,null,"10904834",null)),aa=ea.exports,na=[{path:"/",name:"Root",component:J,redirect:{name:"Dashboard"},children:[{path:"/dashboard",name:"Dashboard",redirect:{name:"Company"},meta:{}},{path:"/course",name:"CoursesRoot",component:{render:function(t){return t("router-view")}},redirect:{name:"Course"},meta:{nav:{icon:"el-icon-collection",title:"课程管理"},breadcrumb:{title:"课程",replace:!0}},children:[{path:"/course",name:"Course",component:yt},{path:"/course/create",name:"CourseCreate",component:Pt,meta:{breadcrumb:{title:"创建"}}},{path:"/course/:id/edit",name:"CourseEdit",component:Rt,meta:{breadcrumb:{title:"编辑"}}}]},{path:"/zhiye",name:"zhiyesRoot",component:{render:function(t){return t("router-view")}},redirect:{name:"Zhiye"},meta:{nav:{icon:"el-icon-collection",title:"职业路径"},breadcrumb:{title:"职业",replace:!0}},children:[{path:"/zhiye",name:"Zhiye",component:Wt},{path:"/zhiye/create",name:"ZhiyeCreate",component:ne,meta:{breadcrumb:{title:"创建"}}},{path:"/zhiye/:id/edit",name:"ZhiyeEdit",component:ce,meta:{breadcrumb:{title:"编辑"}}}]},{path:"/company",name:"companyRoot",component:{render:function(t){return t("router-view")}},redirect:{name:"Company"},meta:{nav:{icon:"el-icon-collection",title:"企业管理"},breadcrumb:{title:"企业",replace:!0}},children:[{path:"/company",name:"Company",component:ve},{path:"/company/create",name:"CompanyCreate",component:ke,meta:{breadcrumb:{title:"创建"}}},{path:"/company/:id/edit",name:"CompanyEdit",component:Pe,meta:{breadcrumb:{title:"编辑"}}}]},{path:"/project",name:"ProjectRoot",component:{render:function(t){return t("router-view")}},redirect:{name:"Project"},meta:{nav:{icon:"el-icon-collection",title:"项目管理"},breadcrumb:{title:"项目",replace:!0}},children:[{path:"/project",name:"Project",component:Be},{path:"/project/create",name:"ProjectCreate",component:Qe,meta:{breadcrumb:{title:"创建"}}},{path:"/project/:id",name:"ProjectItem",component:Ze,meta:{breadcrumb:{title:"详情"}}},{path:"/project/:id/edit",name:"ProjectEdit",component:aa,meta:{breadcrumb:{title:"编辑"}}}]}]},{path:"/login",name:"login",component:Y,meta:{breadcrumb:{title:"登陆页面"}}}],ia=na,oa=a("323e"),sa=a.n(oa);a("a5d8");n["default"].use(d["a"]);var ra=new d["a"]({base:"",routes:ia});ra.beforeEach(function(){var t=Object(u["a"])(regeneratorRuntime.mark((function t(e,a,n){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:sa.a.start(),n();case 2:case"end":return t.stop()}}),t)})));return function(e,a,n){return t.apply(this,arguments)}}()),ra.afterEach((function(t,e){sa.a.done()}));var la=ra,ca=a("2f62");n["default"].use(ca["a"]);var ua=new ca["a"].Store({state:{},mutations:{},actions:{},modules:{}});a("0fae"),a("add7");n["default"].use(st.a),n["default"].config.productionTip=!1,new n["default"]({router:la,store:ua,render:function(t){return t(c)}}).$mount("#app")},"571c":function(t,e,a){},"594e":function(t,e,a){"use strict";var n=a("c56d"),i=a.n(n);i.a},"5c50":function(t,e,a){},6758:function(t,e,a){"use strict";var n=a("2f5d"),i=a.n(n);i.a},"68e3":function(t,e,a){"use strict";var n=a("55f0"),i=a.n(n);i.a},7198:function(t,e,a){"use strict";var n=a("b62c"),i=a.n(n);i.a},"759a":function(t,e,a){},"7de7":function(t,e,a){},"8e17":function(t,e,a){"use strict";var n=a("3b41"),i=a.n(n);i.a},"908f":function(t,e,a){},9297:function(t,e,a){"use strict";var n=a("759a"),i=a.n(n);i.a},"9b19":function(t,e,a){t.exports=a.p+"img/logo.f43b9a47.svg"},"9b22":function(t,e,a){"use strict";var n=a("908f"),i=a.n(n);i.a},"9f55":function(t,e,a){"use strict";var n=a("ed02"),i=a.n(n);i.a},add7:function(t,e,a){},b56f:function(t,e,a){"use strict";var n=a("5c50"),i=a.n(n);i.a},b62c:function(t,e,a){},b6ae:function(t,e,a){"use strict";var n=a("4f2d"),i=a.n(n);i.a},c56d:function(t,e,a){},ca0b:function(t,e,a){"use strict";var n=a("0d1a"),i=a.n(n);i.a},cf05:function(t,e,a){t.exports=a.p+"img/logo.82b9c7a5.png"},e0cc:function(t,e,a){},e0eb:function(t,e,a){},ed02:function(t,e,a){},f432:function(t,e,a){"use strict";var n=a("e0eb"),i=a.n(n);i.a},f5b2:function(t,e,a){"use strict";var n=a("f669"),i=a.n(n);i.a},f669:function(t,e,a){}});
//# sourceMappingURL=app.ca647149.js.map