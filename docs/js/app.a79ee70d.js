(function(e){function t(t){for(var n,s,o=t[0],l=t[1],c=t[2],d=0,m=[];d<o.length;d++)s=o[d],Object.prototype.hasOwnProperty.call(i,s)&&i[s]&&m.push(i[s][0]),i[s]=0;for(n in l)Object.prototype.hasOwnProperty.call(l,n)&&(e[n]=l[n]);u&&u(t);while(m.length)m.shift()();return r.push.apply(r,c||[]),a()}function a(){for(var e,t=0;t<r.length;t++){for(var a=r[t],n=!0,o=1;o<a.length;o++){var l=a[o];0!==i[l]&&(n=!1)}n&&(r.splice(t--,1),e=s(s.s=a[0]))}return e}var n={},i={app:0},r=[];function s(t){if(n[t])return n[t].exports;var a=n[t]={i:t,l:!1,exports:{}};return e[t].call(a.exports,a,a.exports,s),a.l=!0,a.exports}s.m=e,s.c=n,s.d=function(e,t,a){s.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:a})},s.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},s.t=function(e,t){if(1&t&&(e=s(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var a=Object.create(null);if(s.r(a),Object.defineProperty(a,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var n in e)s.d(a,n,function(t){return e[t]}.bind(null,n));return a},s.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return s.d(t,"a",t),t},s.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},s.p="";var o=window["webpackJsonp"]=window["webpackJsonp"]||[],l=o.push.bind(o);o.push=t,o=o.slice();for(var c=0;c<o.length;c++)t(o[c]);var u=l;r.push([0,"chunk-vendors"]),a()})({0:function(e,t,a){e.exports=a("56d7")},"01c2":function(e,t,a){"use strict";var n=a("e0cc"),i=a.n(n);i.a},"0295":function(e,t,a){"use strict";var n=a("d4e0"),i=a.n(n);i.a},"0407":function(e,t,a){"use strict";var n=a("933c"),i=a.n(n);i.a},"092f":function(e,t,a){},"0ccc":function(e,t,a){"use strict";var n=a("a67c"),i=a.n(n);i.a},"0d1a":function(e,t,a){},"14d6":function(e,t,a){"use strict";var n=a("aca3"),i=a.n(n);i.a},"14ed":function(e,t,a){"use strict";var n=a("571c"),i=a.n(n);i.a},1876:function(e,t,a){},"193e":function(e,t,a){"use strict";var n=a("b074"),i=a.n(n);i.a},2169:function(e,t,a){"use strict";var n=a("092f"),i=a.n(n);i.a},2885:function(e,t,a){},"29c3":function(e,t,a){"use strict";var n=a("a699"),i=a.n(n);i.a},"2ab9":function(e,t,a){"use strict";var n=a("4f73"),i=a.n(n);i.a},"2f5d":function(e,t,a){},3227:function(e,t,a){"use strict";var n=a("4050"),i=a.n(n);i.a},3885:function(e,t,a){"use strict";var n=a("f7f7"),i=a.n(n);i.a},"3b41":function(e,t,a){},4050:function(e,t,a){},4701:function(e,t,a){"use strict";var n=a("4885"),i=a.n(n);i.a},4885:function(e,t,a){},"4adc":function(e,t,a){},"4f73":function(e,t,a){},"56d7":function(e,t,a){"use strict";a.r(t);a("e260"),a("e6cf"),a("cca6"),a("a79d");var n=a("2b0e"),i=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{attrs:{id:"app"}},[a("router-view")],1)},r=[],s=a("2877"),o={},l=Object(s["a"])(o,i,r,!1,null,null,null),c=l.exports,u=(a("b0c0"),a("96cf"),a("1da1")),d=a("8c4f"),m=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"passport-layout-web-reg web-v3-layout-box"},[e._m(0),a("div",{staticClass:"web-reg-right"},[a("div",{staticClass:"web-main-content"},[a("div",{staticClass:"register-with-account-container flex-column"},[a("div",{staticClass:"base-back-container"},[e.showBackArrow?a("div",{staticClass:"base-back-text",on:{click:e.handleGoback}},[e._v(" 返回 ")]):e._e()]),a("div",{staticClass:"base-title-container"},[a("div",{staticClass:"base-title-title"},[e._v(" "+e._s(e.formInformation[e.step].title)+" ")]),a("div",{staticClass:"base-title-subtitle"},[a("span",[e._v(e._s(e.formInformation[e.step].description))]),2===e.step?a("span",{staticStyle:{"font-weight":"600",color:"#333"}},[e._v(" +86 "+e._s(e.phone)+" ")]):e._e()])]),1===e.step?a("div",{staticClass:"base-input-container"},[a("div",{class:["mobile-input-container",{"on-error":e.mobileError}]},[a("input",{staticClass:"mobile-input-code",attrs:{id:"register_code_area",name:"register_form_items",spellcheck:"false",autocomplete:"off",autocorrect:"off",autocapitalize:"off",maxlength:"4",type:"tel",disabled:"",value:"+86"}}),a("div",{staticClass:"mobile-input-seperator-line"}),a("input",{directives:[{name:"model",rawName:"v-model",value:e.phone,expression:"phone"}],staticClass:"mobile-input-phone",attrs:{name:"register_phone",placeholder:"请输入你的手机号",spellcheck:"false",autocomplete:"off",autocorrect:"off",autocapitalize:"off",type:"tel"},domProps:{value:e.phone},on:{focus:e.handleFocus,input:function(t){t.target.composing||(e.phone=t.target.value)}}})]),e.mobileError?a("div",{staticClass:"mobile-input-error-msg"},[e._v(" 手机号码错误，请重新输入。 ")]):e._e()]):e._e(),2===e.step?a("div",{staticClass:"base-input-container"},[a("div",{staticClass:"code-box-container"},[e._l(e.code,(function(t,n){return[a("div",{key:n,staticClass:"code-box"},[a("input",{directives:[{name:"focus",rawName:"v-focus"},{name:"model",rawName:"v-model",value:e.code[n],expression:"code[index]"}],class:["code-box-input",{active:e.code[n]}],attrs:{"data-index":n,"data-focus-index":e.focusIndex,type:"tel",name:"register_form_items",spellcheck:"false",autocomplete:"off",autocorrect:"off",autocapitalize:"off",disabled:e.focusIndex!==n},domProps:{value:e.code[n]},on:{keyup:e.handleCodeboxChange,input:function(t){t.target.composing||e.$set(e.code,n,t.target.value)}}})])]}))],2),e.countDowning?a("div",{staticClass:"code-box-count"},[e._v(" "+e._s(e.count)+" 秒后可重新获取验证码 ")]):e._e(),e.countDowning?e._e():a("div",{staticClass:"code-box-resend",on:{click:e.handleSendMessage}},[e._v(" 重新获取验证码 ")])]):e._e(),a("div",{staticClass:"flex-grow"}),1===e.step?a("div",{class:["base-button",{"base-button-disabled":e.mobileInputDisabled}],on:{click:e.handleSendMessage}},[e._v(" 下一步 ")]):e._e(),2===e.step?a("div",{class:["base-button",{"base-button-disabled":e.codeInputDisabled}],on:{click:e.handleSubmit}},[e._v(" 登录 ")]):e._e()])])])])},p=[function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"web-reg-left"},[a("div",{staticClass:"left-title"},[a("div",[e._v(" 极客 · 云教育 "),a("br"),e._v(" 面向未来的技术人才教育 ")])]),a("div",{staticClass:"left-img"})])}],h=(a("a15b"),a("d81d"),a("45fc"),a("a9e3"),a("d3b7"),a("5530")),f=a("bc3a"),g=a.n(f),v=a("5c96"),b=a.n(v),_=(a("4ec9"),a("3ca3"),a("ddb0"),a("d4ec")),y=a("bee2"),k=function(){function e(){Object(_["a"])(this,e),this.prefix="pro_",this.storage=window.localStorage}return Object(y["a"])(e,[{key:"set",value:function(e,t){var a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:86400,n=Date.now(),i=JSON.stringify({value:t,exp:a,timestamp:n}),r=this.prefix+e;this.storage.setItem(r,i)}},{key:"get",value:function(e){var t=this.prefix+e,a=this.storage.getItem(t);if(!a)return!1;a=JSON.parse(a);var n=1e3*a.exp,i=a,r=i.timestamp,s=a,o=s.value,l=Date.now();return l>r+n?(this.delete(e),!1):o}},{key:"delete",value:function(e){var t=this.prefix+e;this.storage.removeItem(t)}}]),e}(),C=k,w=function(){function e(){Object(_["a"])(this,e),this.init()}return Object(y["a"])(e,[{key:"init",value:function(){this.map=new Map,this.storage=new C}},{key:"getToken",value:function(){return this.storage.get("token")}},{key:"setToken",value:function(e){this.storage.set("token",e)}},{key:"getUserInfo",value:function(){return this.storage.get("userInfo")}},{key:"setUserInfo",value:function(e){this.storage.set("userInfo",e)}},{key:"removeToken",value:function(){localStorage.clear()}},{key:"clear",value:function(){localStorage.clear()}}],[{key:"getInstance",value:function(){return e.instance||(e.instance=new e),e.instance}}]),e}(),x=w.getInstance(),$=g.a.create();$.defaults.timeout=2e3,$.interceptors.request.use((function(e){var t=Object(h["a"])({},e),a=x.getToken();return a&&(t["headers"]["Authorization"]="Bearer ".concat(a)),t}),(function(e){return Promise.reject(e)}));var S=function(e){var t=e.response,a=t?t.status:408;if(t){var n=t.data,i=n.message||"服务器发送错误，请稍后再试";401===a?(v["Message"].error("登录状态过期，请重新登录"),x.clear(),window.location.href="/"):403===a?v["Message"].error("没有权限，联系管理员"):v["Message"].error(i)}else v["Message"].error("网络超时")},j=function(e){switch(!0){case 0===e.data.error_code:return e.data.data;case 1===e.data.error_code:return v["Message"].error(e.data.message),Promise.reject(e.data);default:return e.data}},z=function(e){return S(e),Promise.reject(e)};$.interceptors.response.use(j,z);var E={post:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return $.post(e,t,a)},put:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return $.put(e,t,a)},get:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},n=Object.assign({params:t},a);return $.get(e,n)},delete:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},n=Object.assign({params:t},a);return $.delete(e,n)}},P="http://127.0.0.1:7001/api",I=P+"/admin",D={smsSend:"".concat(I,"/sms/send"),smsLogin:"".concat(I,"/sms/login"),authPermissions:"".concat(I,"/auth/permissions"),qiniuToken:"".concat(P,"/qiniu/token"),course:"".concat(I,"/course"),chapter:"".concat(I,"/chapter"),section:"".concat(I,"/section"),courseItem:function(e){return"".concat(I,"/course/").concat(e)},chapterItem:function(e){return"".concat(I,"/chapter/").concat(e)},sectionItem:function(e){return"".concat(I,"/section/").concat(e)},chapterSort:"".concat(I,"/chapter/sort"),sectionSort:"".concat(I,"/section/sort"),zhiye:"".concat(I,"/zhiye"),zhiyeItem:function(e){return"".concat(I,"/zhiye/").concat(e)},zhiyePath:"".concat(I,"/zhiye/path"),zhiyePathItem:function(e){return"".concat(I,"/zhiye/path/").concat(e)},zhiyePathSort:"".concat(I,"/zhiye/path/sort"),zhiyeCourse:"".concat(I,"/zhiye/course"),zhiyeCourseItem:function(e){return"".concat(I,"/zhiye/course/").concat(e)},zhiyeCourseSort:"".concat(I,"/zhiye/course/sort"),company:"".concat(I,"/company"),companyItem:function(e){return"".concat(I,"/company/").concat(e)},project:"".concat(I,"/project"),projectItem:function(e){return"".concat(I,"/project/").concat(e)},projectVersion:"".concat(I,"/version"),projectVersionItem:function(e){return"".concat(I,"/version/").concat(e)},projectStory:"".concat(I,"/story"),projectStoryItem:function(e){return"".concat(I,"/story/").concat(e)},projectTask:"".concat(I,"/task"),projectTaskItem:function(e){return"".concat(I,"/task/").concat(e)},projectVersionSort:"".concat(I,"/project/version/sort"),projectStorySort:"".concat(I,"/project/story/sort"),projectTaskSort:"".concat(I,"/project/task/sort"),stack:"".concat(I,"/stack"),stackItem:function(e){return"".concat(I,"/stack/").concat(e)},skillQuestion:"".concat(I,"/skill/question"),skillQuestionItem:function(e){return"".concat(I,"/skill/question/").concat(e)},manager:"".concat(I,"/manager"),managerItem:function(e){return"".concat(I,"/manager/").concat(e)},permission:"".concat(I,"/permission"),role:"".concat(I,"/role"),roleItem:function(e){return"".concat(I,"/role/").concat(e)},advertise:"".concat(I,"/advertise"),advertiseItem:function(e){return"".concat(I,"/advertise/").concat(e)},material:"".concat(I,"/material"),materialItem:function(e){return"".concat(I,"/material/").concat(e)},advertiseMaterial:"".concat(I,"/advertise/material"),advertiseMaterialItem:function(e){return"".concat(I,"/advertise/material/").concat(e)},advertiseMaterialSort:"".concat(I,"/advertise/material/sort")},O={smsSend:function(e){var t=e.phone;return E.post(D.smsSend,{phone:t})},smsLogin:function(e){var t=e.phone,a=e.code;return E.post(D.smsLogin,{phone:t,code:a}).then((function(e){return x.setToken(e.token),x.setUserInfo(e.manager),e}))},permissions:function(){return E.get(D.authPermissions)}},q=O,M={data:function(){return{count:60,countDowning:!1,step:1,formInformation:{1:{title:"欢迎来到极客 · EDU",description:" 以企业为教学出发点，以企业为人才流向地，面向市场及职场打造“教→学→求职”全流程的创新式闭环。 "},2:{title:"验证手机号",description:"请输的 6 位验证码，有效期十分钟。如未收到，请尝试重新获取验证码。"}},showBackArrow:!1,mobileError:!1,phone:"13511111111",code:["","","","","",""],focusIndex:0}},computed:{mobileInputDisabled:function(){return 11!==this.phone.length},codeInputDisabled:function(){return this.code.some((function(e){return""===e}))}},methods:{handleSendMessage:function(){var e=this;this.isMobile(this.phone)?q.smsSend({phone:this.phone}).then((function(t){var a=t.code;a&&e.$message.success({message:"验证码："+a,duration:9e3}),e.showBackArrow=!0,e.step=2,e.countDown()})):this.mobileError=!0},handleGoback:function(){this.showBackArrow=!1,this.step=1,this.phone="",this.countDownStop()},countDown:function(){var e=this;this.countDowning=setInterval((function(){e.count--,1===e.count&&e.countDownStop()}),1e3)},countDownStop:function(){clearInterval(this.countDowning),this.count=60,this.countDowning=!1},isMobile:function(e){return/^(1[34578]\d{9})$/.test(e)},handleFocus:function(){this.mobileError&&(this.mobileError=!1)},handleCodeboxChange:function(e){var t=this.focusIndex,a=this.code[t];if(8===e.keyCode&&0!==t)return this.focusIndex=t-1,void this.$set(this.code,t-1,"");/^\d$/.test(a)?this.focusIndex=t+1:this.$set(this.code,t,""),5===t&&this.handleSubmit()},handleSubmit:function(){var e=this,t=this.code.join("");q.smsLogin({code:t,phone:this.phone}).then((function(){e.$message.success("登录成功"),window.location.reload()})).catch((function(){e.code=e.code.map((function(){return""})),e.focusIndex=0}))}},directives:{focus:function(e){var t=Number(e.getAttribute("data-index")),a=Number(e.getAttribute("data-focus-index"));t===a&&e.focus()}}},T=M,B=(a("0ccc"),Object(s["a"])(T,m,p,!1,null,null,null)),V=B.exports,N=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"page-wrapper"},[a("Sider",{staticClass:"page-sider"}),a("div",{staticClass:"page-mainer"},[a("Header",{staticClass:"page-header"}),a("div",{staticClass:"page-body"},[a("router-view")],1),e._e()],1)],1)},A=[],U=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"header-section"},[a("div",{staticClass:"header-hd"},[a("Breadcrumb")],1),a("div",{staticClass:"header-bd"}),a("div",{staticClass:"header-ft"},[e._m(0),a("el-dropdown",{staticStyle:{height:"100%"},on:{command:e.handleCommand}},[a("div",{staticClass:"bar-info-container"},[a("i",{staticClass:"el-icon-user-solid userInfo-avatar"}),a("span",{staticClass:"userInfo-name"},[e._v(e._s(e.userInfo.name))]),a("i",{staticClass:"el-icon-arrow-down el-icon--right"})]),a("el-dropdown-menu",{attrs:{slot:"dropdown"},slot:"dropdown"},[a("el-dropdown-item",{attrs:{command:"Logout",icon:"el-icon-video-pause"}},[e._v("退出")])],1)],1)],1)])},F=[function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"bar-info-container"},[a("i",{staticClass:"el-icon-question"})])}],R=function(){var e=this,t=e.$createElement,a=e._self._c||t;return e.breadcrumbValue.length?a("div",{staticClass:"breadcrumb-section"},[e.breadcrumbValue.length?a("el-breadcrumb",{staticClass:"breadcrumb-list"},[e._l(e.breadcrumbValue,(function(t){return[t.to?a("el-breadcrumb-item",{key:t.name,staticClass:"breadcrumb-item",attrs:{replace:!0,to:t.to}},[e._v(e._s(t.name))]):a("el-breadcrumb-item",{key:t.name,staticClass:"breadcrumb-item"},[e._v(e._s(t.name))])]}))],2):e._e()],1):e._e()},L=[],Q=(a("4de4"),a("ac1f"),a("5319"),{props:{breadcrumb:{type:Array,default:function(){return[]}}},computed:{breadcrumbValue:function(){var e=this.breadcrumb;return e.length?e:this.$route.matched.filter((function(e){return e.meta&&e.meta.breadcrumb})).map((function(e){return{name:e.meta.breadcrumb.title,to:e.meta.breadcrumb.replace?{name:e.name}:void 0}}))}}}),Z=Q,J=(a("ca0b"),Object(s["a"])(Z,R,L,!1,null,"897365ae",null)),G=J.exports,H={data:function(){return{userInfo:{}}},created:function(){},methods:{handleCommand:function(e){var t="handle".concat(e);this[t]()},handleLogout:function(){x.clear(),window.location.reload()}},components:{Breadcrumb:G}},K=H,W=(a("a508"),Object(s["a"])(K,U,F,!1,null,"3ad8632e",null)),X=W.exports,Y=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("footer",{staticClass:"footer-section"},[e._v(" Copyright © 2020 ❤️ 极客学院体验技术部出品 ")])},ee=[],te={},ae=te,ne=(a("2169"),Object(s["a"])(ae,Y,ee,!1,null,null,null)),ie=ne.exports,re=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"sider-section"},[e._m(0),a("div",{staticClass:"sider-menu-body"},[a("el-scrollbar",{staticClass:"scrollbar-section"},[a("Menu",{staticClass:"menu-section"})],1)],1)])},se=[function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"sider-menu-header logo-section"},[n("img",{staticClass:"logo-img",attrs:{src:a("9b19"),alt:"logo"}})])}],oe=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("el-menu",{attrs:{"default-active":e.path,router:!0}},[e._l(e.filterRoutes,(function(t){return[e.hasNavChildren(t)?a("el-submenu",{key:t.path,attrs:{index:t.path}},[a("template",{slot:"title"},[t.meta.nav.icon?a("i",{class:t.meta.nav.icon}):e._e(),a("span",{attrs:{slot:"title"},slot:"title"},[e._v(e._s(t.meta.nav.title))])]),e._l(t.children,(function(t){return a("el-menu-item",{key:t.path,attrs:{index:t.path,route:{path:t.path},id:t.name}},[t.meta.nav.icon?a("i",{class:t.meta.nav.icon}):e._e(),a("span",{attrs:{slot:"title"},slot:"title"},[e._v(e._s(t.meta.nav.title))])])}))],2):a("el-menu-item",{key:t.path,attrs:{disabled:t.disabled,index:t.path,route:{path:t.path},id:t.name}},[t.meta.nav.icon?a("i",{class:t.meta.nav.icon}):e._e(),a("span",{attrs:{slot:"title"},slot:"title"},[e._v(e._s(t.meta.nav.title))])])]}))],2)},le=[],ce=(a("4160"),a("caad"),a("2532"),a("159b"),function e(t,a){var n=[];return t.forEach((function(t){var i=Object(h["a"])({},t),r=!i.permission,s=a.includes(i.permission),o=r||s,l=!0;i.children&&(i.children=e(t.children,a),0===i.children.length&&(l=!1)),o&&l&&n.push(i)})),n}),ue={data:function(){return{path:this.$route.path,filterRoutes:[],PermissionArr:[]}},created:function(){this.getPermissions()},watch:{$route:function(e){this.path=e.path}},methods:{getPermissions:function(){var e=this;q.permissions().then((function(t){var a=t.permissions;e.getRoutes(a)}))},getRoutes:function(e){var t=ce(Ti,e);this.filterRoutes=this.filterNavigator(t)},filterNavigator:function(e){var t=this,a=[];return e.forEach((function(e){if(e.meta&&e.meta.nav){var n={path:e.path,name:e.name,meta:e.meta};e.children&&(n.children=t.filterNavigator(e.children)),a.push(n)}else e.children&&t.filterNavigator(e.children).forEach((function(e){return a.push(e)}))})),a},hasNavChildren:function(e){var t=e.children||[];return t.some((function(e){return e.meta&&e.meta.nav}))}}},de=ue,me=(a("7198"),Object(s["a"])(de,oe,le,!1,null,null,null)),pe=me.exports,he={components:{Menu:pe}},fe=he,ge=(a("9297"),Object(s["a"])(fe,re,se,!1,null,null,null)),ve=ge.exports,be={data:function(){return{}},components:{Header:X,Footer:ie,Sider:ve}},_e=be,ye=(a("9f55"),Object(s["a"])(_e,N,A,!1,null,null,null)),ke=ye.exports,Ce=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],staticClass:"page-content"},[a("router-link",{attrs:{to:{name:"CourseCreate"}}},[a("el-button",{attrs:{size:"medium",type:"primary",plain:""}},[e._v("创建课程")])],1),a("el-table",{staticClass:"mt-20",attrs:{data:e.courses,size:"medium"}},[a("el-table-column",{attrs:{prop:"id",label:"id",width:"80px"}}),a("el-table-column",{attrs:{prop:"name",label:"名称"}}),a("el-table-column",{attrs:{prop:"short_name",label:"副标题"}}),a("el-table-column",{attrs:{prop:"status",label:"状态",width:"120px",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-tag",{attrs:{type:t.row.status?"success":"danger",size:"small"}},[e._v(" "+e._s(t.row.status?"已完成":"未完成")+" ")])]}}])}),a("el-table-column",{attrs:{label:"操作",width:"180px",align:"right"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-dropdown",{attrs:{trigger:"hover"},on:{command:e.handleCommand}},[a("span",{staticClass:"icon-ctrl"},[a("i",{staticClass:"el-icon-more"})]),a("el-dropdown-menu",{attrs:{slot:"dropdown"},slot:"dropdown"},[a("el-dropdown-item",{attrs:{command:"edit-"+t.row.id+"-"+t.$index}},[e._v("编辑")]),a("el-dropdown-item",{attrs:{command:"delete-"+t.row.id+"-"+t.$index}},[e._v("删除")])],1)],1)]}}])})],1),a("el-pagination",{staticClass:"mt-20",attrs:{background:"",layout:"total, prev, pager, next, jumper","current-page":e.pagination.currentPage,"page-size":e.pagination.pageSize,total:e.pagination.total,"hide-on-single-page":!0},on:{"current-change":e.getData,"update:currentPage":function(t){return e.$set(e.pagination,"currentPage",t)},"update:current-page":function(t){return e.$set(e.pagination,"currentPage",t)}}})],1)},we=[],xe=(a("a434"),a("1276"),{create:function(e){return E.post(D.course,e)},index:function(e){return E.get(D.course,e)},show:function(e){return E.get(D.courseItem(e))},edit:function(e,t){return E.put(D.courseItem(e),t)},destory:function(e){return E.delete(D.courseItem(e))}}),$e=xe,Se={data:function(){return{loading:!0,courses:[],pagination:{currentPage:1,pageSize:10,total:0}}},created:function(){this.getData()},methods:{getData:function(){var e=this,t={page_size:this.pagination.pageSize,current_page:this.pagination.currentPage};this.loading=!0,$e.index(t).then((function(t){e.courses=t.rows,e.pagination.currentPage=t.pagination.current_page,e.pagination.pageSize=t.pagination.page_size,e.pagination.total=t.pagination.total})).finally((function(){e.loading=!1}))},handleCommand:function(e){var t=e.split("-")[0],a=e.split("-")[1],n=e.split("-")[2];"edit"===t?this.$router.push({name:"CourseEdit",params:{id:a}}):"delete"===t&&this.delCourses(n)},delCourses:function(e){var t=this,a=this.courses[e].id;this.$confirm("确认删除吗？").then((function(){return $e.destory(a)})).then((function(){t.$message.success("删除课程成功"),t.courses.splice(e,1)})).catch((function(){}))}}},je=Se,ze=(a("9b22"),Object(s["a"])(je,Ce,we,!1,null,null,null)),Ee=ze.exports,Pe=function(){var e=this,t=e.$createElement;e._self._c;return e._m(0)},Ie=[function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"dashboard-page"},[a("h2",[e._v("Dashboard")]),a("div",[e._v("#TBD")])])}],De={},Oe=De,qe=Object(s["a"])(Oe,Pe,Ie,!1,null,"56be7de2",null),Me=qe.exports,Te=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"page-content"},[a("div",{staticClass:"c-650"},[e._m(0),a("el-form",{attrs:{"label-position":"top","label-width":"80px",size:"mini"}},[a("el-row",{attrs:{gutter:20}},[a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:"课程名称："}},[a("el-input",{model:{value:e.course.name,callback:function(t){e.$set(e.course,"name",t)},expression:"course.name"}})],1)],1),a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:"副标题："}},[a("el-input",{model:{value:e.course.short_name,callback:function(t){e.$set(e.course,"short_name",t)},expression:"course.short_name"}})],1)],1)],1),a("el-form-item",{attrs:{label:"课程提示："}},[a("el-input",{model:{value:e.course.tips,callback:function(t){e.$set(e.course,"tips",t)},expression:"course.tips"}})],1),a("el-form-item",{attrs:{label:"课程描述："}},[a("el-input",{attrs:{type:"textarea"},model:{value:e.course.description,callback:function(t){e.$set(e.course,"description",t)},expression:"course.description"}})],1),a("el-form-item",{attrs:{label:"课程封面："}},[a("el-upload",{ref:"upload",staticClass:"course-image-upload",attrs:{action:"",limit:1,"file-list":e.fileList,"before-upload":e.handleBeforeUpload,accept:"image/jpg, image/jpeg, image/png"}},[e.course.image_url?e._e():a("i",{staticClass:"el-icon-plus el-uploader__icon"}),e.course.image_url?a("img",{staticClass:"course-image-upload",attrs:{src:e.course.image_url}}):e._e()])],1),a("el-form-item",[a("el-button",{attrs:{size:"medium",type:"primary",plain:""},on:{click:e.handleSubmit}},[e._v("创建课程")])],1)],1)],1)])},Be=[function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"sub-header"},[a("div",{staticClass:"sub-header-title"},[e._v("基本信息")])])}],Ve=(a("99af"),a("cea2")),Ne="_for_neon_project/",Ae={token:function(){return E.get(D.qiniuToken)},upload:function(e){var t=e.file,a=e.token,n=e.mimeType,i=void 0===n?null:n,r=e.params,s=void 0===r?{}:r,o=e.progressCallback;return new Promise((function(e,n){var r=t.name,l=Ne+Date.now()+"_"+t.name,c={useCdnDomain:!0},u={fname:r,params:s,mimeType:i},d=Ve["upload"](t,l,a,u,c);d.subscribe({next:function(e){"function"===typeof o&&o(e)},error:function(e){n(e)},complete:function(t){e(t)}})}))},start:function(){var e=Object(u["a"])(regeneratorRuntime.mark((function e(t){var a,n,i,r,s;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,Ae.token();case 2:return a=e.sent,n=a.token,i=a.domain,e.next=7,Ae.upload({file:t,token:n});case 7:return r=e.sent,s="https://".concat(i,"/").concat(r.key),e.abrupt("return",{imageUrl:s});case 10:case"end":return e.stop()}}),e)})));function t(t){return e.apply(this,arguments)}return t}()},Ue=Ae,Fe={data:function(){return{fileList:[],course:{name:"",short_name:"",tips:"",description:"",image_url:"",status:0}}},methods:{handleSubmit:function(){var e=this;this.loading=!0,$e.create(this.course).then((function(t){e.$message.success("创建课程成功"),e.$router.push({name:"CourseEdit",params:{id:t.id}})})).finally((function(){e.loading=!1}))},handleBeforeUpload:function(e){var t=this;return Ue.start(e).then((function(e){t.course.image_url=e.imageUrl})),Promise.reject({})}}},Re=Fe,Le=(a("6758"),Object(s["a"])(Re,Te,Be,!1,null,"2182ba00",null)),Qe=Le.exports,Ze=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],staticClass:"page-content"},[a("el-row",{attrs:{gutter:60}},[a("el-col",{attrs:{lg:12}},[a("div",{staticClass:"sub-header"},[a("div",{staticClass:"sub-header-title"},[e._v("基本信息")]),a("div",{staticClass:"sub-header-fd"},[a("el-button",{attrs:{size:"medium",type:e.isEdit?"primary":""},on:{click:e.handleEdit}},[e._v(" "+e._s(e.isEdit?"保存":"修改")+" ")])],1)]),a("el-form",{attrs:{"label-position":"top",size:"mini",model:e.course}},[a("el-row",{attrs:{gutter:20}},[a("el-col",{attrs:{lg:12}},[a("el-form-item",{attrs:{label:"课程名称："}},[a("el-input",{attrs:{disabled:!e.isEdit},model:{value:e.course.name,callback:function(t){e.$set(e.course,"name",t)},expression:"course.name"}})],1)],1),a("el-col",{attrs:{lg:12}},[a("el-form-item",{attrs:{label:"副标题："}},[a("el-input",{attrs:{disabled:!e.isEdit},model:{value:e.course.short_name,callback:function(t){e.$set(e.course,"short_name",t)},expression:"course.short_name"}})],1)],1)],1),a("el-form-item",{attrs:{label:"课程提示："}},[a("el-input",{attrs:{disabled:!e.isEdit},model:{value:e.course.tips,callback:function(t){e.$set(e.course,"tips",t)},expression:"course.tips"}})],1),a("el-form-item",{attrs:{label:"课程描述："}},[a("el-input",{attrs:{type:"textarea",disabled:!e.isEdit},model:{value:e.course.description,callback:function(t){e.$set(e.course,"description",t)},expression:"course.description"}})],1),a("el-row",{attrs:{gutter:20}},[a("el-col",{attrs:{lg:12}},[a("el-form-item",{attrs:{label:"课程封面："}},[e.isEdit?a("el-upload",{ref:"upload",staticClass:"course-image-upload",attrs:{action:"",limit:1,"file-list":e.fileList,"before-upload":e.handleBeforeUpload,accept:"image/jpg, image/jpeg, image/png"}},[e.course.image_url?e._e():a("i",{staticClass:"el-icon-plus el-uploader__icon"}),e.course.image_url?a("img",{staticClass:"course-image-upload",attrs:{src:e.course.image_url}}):e._e()]):e._e(),!e.isEdit&&e.course.image_url?a("img",{staticClass:"course-image-upload",attrs:{src:e.course.image_url}}):e._e(),e.isEdit||e.course.image_url?e._e():a("span",[e._v("无")])],1)],1),a("el-col",{attrs:{lg:12}},[a("el-form-item",{attrs:{label:"课程状态："}},[a("el-switch",{attrs:{disabled:!e.isEdit,"active-value":1,"inactive-value":0},model:{value:e.course.status,callback:function(t){e.$set(e.course,"status",t)},expression:"course.status"}})],1)],1)],1)],1)],1),a("el-col",{attrs:{lg:12}},[a("div",{staticClass:"sub-header"},[a("div",{staticClass:"sub-header-title"},[e._v("课程章节")])]),a("div",{staticClass:"chapter-container"},[a("draggable",{attrs:{group:"chapter",handle:".chapter-item-draggable"},on:{change:e.handleChapterSort},model:{value:e.course.chapters,callback:function(t){e.$set(e.course,"chapters",t)},expression:"course.chapters"}},e._l(e.course.chapters,(function(t,n){return a("div",{key:t.id,staticClass:"chapter-item"},[a("div",{staticClass:"chapter-item-title"},[a("i",{staticClass:"el-icon-rank chapter-item-draggable"}),a("span",[e._v(e._s(t.name))]),a("div",{staticClass:"chapter-item-ctrl"},[a("el-dropdown",{attrs:{trigger:"hover"},on:{command:e.handleChapter}},[a("span",{staticClass:"icon-ctrl"},[a("i",{staticClass:"el-icon-more"})]),a("el-dropdown-menu",{attrs:{slot:"dropdown"},slot:"dropdown"},[a("el-dropdown-item",{attrs:{command:"1-"+n}},[e._v("编辑")]),a("el-dropdown-item",{attrs:{command:"0-"+n}},[e._v("删除")])],1)],1)],1)]),a("div",{staticClass:"chapter-item-section"},[a("draggable",{attrs:{handle:".section-item-draggable",group:"section"},on:{change:function(t){return e.handleSectionSort(t,n)}},model:{value:t.sections,callback:function(a){e.$set(t,"sections",a)},expression:"chapter.sections"}},e._l(t.sections,(function(t,i){return a("div",{key:t.id,staticClass:"section-item"},[a("div",{staticClass:"section-item-text"},[a("i",{staticClass:"el-icon-rank section-item-draggable"}),a("span",[e._v(e._s(t.name))]),a("div",{staticClass:"section-item-ctrl"},[a("el-dropdown",{attrs:{trigger:"hover"},on:{command:e.handleSection}},[a("span",{staticClass:"icon-ctrl"},[a("i",{staticClass:"el-icon-more"})]),a("el-dropdown-menu",{attrs:{slot:"dropdown"},slot:"dropdown"},[a("el-dropdown-item",{attrs:{command:"2-"+n+"-"+i}},[e._v("内容")]),a("el-dropdown-item",{attrs:{command:"1-"+n+"-"+i}},[e._v("编辑")]),a("el-dropdown-item",{attrs:{command:"0-"+n+"-"+i}},[e._v("删除")])],1)],1)],1)])])})),0),a("div",{staticClass:"section-item",on:{click:function(t){return e.handleAddSection(n)}}},[a("div",{staticClass:"section-item-create"},[e._v(" 添加节 "),a("i",{staticClass:"el-icon-circle-plus"})])])],1)])})),0),a("div",{staticClass:"chapter-item-create",on:{click:e.handleAddChapter}},[e._v(" 添加章 "),a("i",{staticClass:"el-icon-circle-plus"})])],1)])],1),a("el-drawer",{attrs:{visible:e.drawerVisible,direction:"rtl",size:"50%","before-close":e.handleCloseDrawer},on:{"update:visible":function(t){e.drawerVisible=t}}},[a("div",{staticClass:"section-content"},[a("el-form",{attrs:{"label-position":"top",size:"mini",model:e.course}},[a("el-form-item",{attrs:{label:"小节名称："}},[a("div",{staticClass:"section-title"},[e._v(e._s(e.sectionInfo.name))])]),a("el-form-item",{attrs:{label:"视频地址："}},[a("el-input",{model:{value:e.sectionInfo.video_url,callback:function(t){e.$set(e.sectionInfo,"video_url",t)},expression:"sectionInfo.video_url"}})],1),a("el-form-item",{attrs:{label:"课程内容："}},[a("mavon-editor",{ref:"md",staticClass:"md",attrs:{toolbars:e.markdownOption,subfield:!1},on:{imgAdd:e.handleImgAdd},model:{value:e.sectionInfo.content,callback:function(t){e.$set(e.sectionInfo,"content",t)},expression:"sectionInfo.content"}})],1),a("el-form-item",[a("el-button",{attrs:{size:"medium",type:"primary"},on:{click:e.handleSaveSection}},[e._v("保存")])],1)],1)],1)])],1)},Je=[],Ge=a("b2d8"),He=(a("64e1"),a("310e")),Ke=a.n(He),We={create:function(e){return E.post(D.chapter,e)},edit:function(e,t){return E.put(D.chapterItem(e),t)},destory:function(e){return E.delete(D.chapterItem(e))},sort:function(e){return E.post(D.chapterSort,e)}},Xe=We,Ye={create:function(e){return E.post(D.section,e)},edit:function(e,t){return E.put(D.sectionItem(e),t)},destory:function(e){return E.delete(D.sectionItem(e))},sort:function(e){return E.post(D.sectionSort,e)},show:function(e){return E.get(D.sectionItem(e))}},et=Ye,tt={bold:!0,mark:!0,quote:!0,ol:!0,ul:!0,link:!0,imagelink:!0,code:!0,table:!0},at={data:function(){return{loading:!0,markdownOption:tt,isEdit:!1,drawerVisible:!1,fileList:[],course:{id:null,name:"",short_name:"",tips:"",description:"",status:0,image_url:"",chapters:[]},sectionInfo:{name:"",video_url:"",content:"",id:null}}},created:function(){this.getData()},methods:{getData:function(){var e=this,t=this.$route.params.id;$e.show(t).then((function(t){e.course=t.course})).finally((function(){e.loading=!1}))},handleEdit:function(){var e=this,t=this.$route.params.id;this.isEdit=!this.isEdit,this.isEdit||(this.loading=!0,$e.edit(t,Object(h["a"])({},this.course)).then((function(){e.$message.success("编辑成功")})).finally((function(){e.loading=!1})))},handleBeforeUpload:function(e){var t=this;return Ue.start(e).then((function(e){t.course.image_url=e.imageUrl})),Promise.reject({})},handleAddChapter:function(){var e=this,t=Number(this.$route.params.id),a=this.course.chapters.length+1;this.$prompt("请输入章节名称","新增章",{confirmButtonText:"确定",cancelButtonText:"取消",inputPattern:/\S/,inputErrorMessage:"输入不能为空"}).then((function(n){var i=n.value;e.loading=!0,Xe.create({sort:a,course_id:t,name:i}).then((function(t){e.$message.success("添加章节成功"),e.course.chapters.push({id:t.id,name:i,sections:[],sort:a})})).finally((function(){e.loading=!1}))}))},handleAddSection:function(e){var t=this,a=this.course.chapters[e],n=a.sections.length+1;this.$prompt("请输入节名称",a.name,{confirmButtonText:"确定",cancelButtonText:"取消",inputPattern:/\S/,inputErrorMessage:"输入不能为空"}).then((function(i){var r=i.value;t.loading=!0,et.create({sort:n,chapter_id:a.id,name:r}).then((function(a){t.$message.success("添加节成功"),t.course.chapters[e].sections.push({id:a.id,name:r,sort:n})})).finally((function(){t.loading=!1}))}))},handleChapter:function(e){var t=this,a=e.split("-"),n=a[0],i=a[1],r=this.course.chapters[i];"1"===n?this.$prompt("请编辑章名称","编辑章",{confirmButtonText:"确定",cancelButtonText:"取消",inputPattern:/\S/,inputErrorMessage:"输入不能为空",inputValue:r.name}).then((function(e){var a=e.value;t.loading=!0,Xe.edit(r.id,{name:a}).then((function(){t.$message.success("编辑章节成功"),r.name=a})).finally((function(){t.loading=!1}))})):(this.loading=!0,this.$confirm("确认删除「"+r.name+"」吗？").then((function(){return Xe.destory(r.id)})).then((function(){t.course.chapters.splice(i,1)})).finally((function(){t.loading=!1})))},handleSection:function(e){var t=e.split("-"),a=t[0],n=t[1],i=t[2];"1"===a?this.handleEditSection(n,i):"2"===a?this.handleOpenDrawer(n,i):this.handleDelSection(n,i)},handleEditSection:function(e,t){var a=this,n=this.course.chapters[e],i=n.sections[t];this.$prompt("请编辑节名称",n.name,{confirmButtonText:"确定",cancelButtonText:"取消",inputPattern:/\S/,inputErrorMessage:"输入不能为空",inputValue:i.name}).then((function(e){var t=e.value;a.loading=!0,et.edit(i.id,{name:t}).then((function(){a.$message.success("编辑节成功"),i.name=t})).finally((function(){a.loading=!1}))}))},handleDelSection:function(e,t){var a=this.course.chapters[e],n=a.sections[t].name,i=a.sections[t].id;this.$confirm("确认删除「"+n+"」吗？").then((function(){return et.destory(i)})).then((function(){a.sections.splice(t,1)}))},handleChapterSort:function(){var e=this,t=this.course.chapters.map((function(e){return e.id}));Xe.sort({chapters:t}).then((function(){e.$message.success("章节排序成功")}))},handleSectionSort:function(e,t){var a=this;if(e.added||e.moved){var n=this.course.chapters[t].sections.map((function(e){return e.id})),i=this.course.chapters[t].id;et.sort({sections:n,chapter_id:i}).then((function(){a.$message.success("节排序成功")}))}},handleOpenDrawer:function(e,t){var a=this,n=this.course.chapters[e],i=n.sections[t].name,r=n.sections[t].id;this.drawerVisible=!0,this.drawerTitle=i,this.loading=!0,et.show(r).then((function(e){a.sectionInfo=e.section})).finally((function(){a.loading=!1}))},handleSaveSection:function(){var e=this,t=this.sectionInfo,a=t.id,n=t.name,i=t.video_url,r=t.content;this.loading=!0,et.edit(a,{name:n,video_url:i,content:r}).then((function(){e.$message.success("保存成功"),e.drawerVisible=!1})).finally((function(){e.loading=!1}))},handleCloseDrawer:function(e){this.$confirm("确认关闭？").then((function(){e()})).catch((function(){}))},handleImgAdd:function(e,t){var a=this;Ue.start(t).then((function(t){a.$refs.md.$img2Url(e,t.imageUrl)}))}},components:{draggable:Ke.a,mavonEditor:Ge["mavonEditor"]}},nt=at,it=(a("f432"),Object(s["a"])(nt,Ze,Je,!1,null,"5730bfc5",null)),rt=it.exports,st=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],staticClass:"page-content"},[a("router-link",{attrs:{to:{name:"ZhiyeCreate"}}},[a("el-button",{attrs:{size:"medium",type:"primary",plain:""}},[e._v("创建职业")])],1),a("el-table",{staticClass:"mt-20",attrs:{data:e.zhiyes,size:"medium"}},[a("el-table-column",{attrs:{prop:"id",label:"id",width:"80px"}}),a("el-table-column",{attrs:{prop:"name",label:"名称"}}),a("el-table-column",{attrs:{prop:"status",label:"状态",width:"120px",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-tag",{attrs:{type:t.row.status?"success":"danger",size:"small"}},[e._v(" "+e._s(t.row.status?"已完成":"未完成")+" ")])]}}])}),a("el-table-column",{attrs:{label:"操作",width:"180px",align:"right"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-dropdown",{attrs:{trigger:"hover"},on:{command:e.handleCommand}},[a("span",{staticClass:"icon-ctrl"},[a("i",{staticClass:"el-icon-more"})]),a("el-dropdown-menu",{attrs:{slot:"dropdown"},slot:"dropdown"},[a("el-dropdown-item",{attrs:{command:"edit-"+t.row.id+"-"+t.$index}},[e._v("编辑")]),a("el-dropdown-item",{attrs:{command:"delete-"+t.row.id+"-"+t.$index}},[e._v("删除")])],1)],1)]}}])})],1),a("el-pagination",{staticClass:"mt-20",attrs:{background:"",layout:"total, prev, pager, next, jumper","current-page":e.pagination.currentPage,"page-size":e.pagination.pageSize,total:e.pagination.total,"hide-on-single-page":!0},on:{"current-change":e.getData,"update:currentPage":function(t){return e.$set(e.pagination,"currentPage",t)},"update:current-page":function(t){return e.$set(e.pagination,"currentPage",t)}}})],1)},ot=[],lt={create:function(e){return E.post(D.zhiye,e)},index:function(e){return E.get(D.zhiye,e)},show:function(e){return E.get(D.zhiyeItem(e))},edit:function(e,t){return E.put(D.zhiyeItem(e),t)},destory:function(e){return E.delete(D.zhiyeItem(e))},createPath:function(e){return E.post(D.zhiyePath,e)},editPath:function(e,t){return E.put(D.zhiyePathItem(e),t)},destoryPath:function(e){return E.delete(D.zhiyePathItem(e))},sortPath:function(e){return E.post(D.zhiyePathSort,e)},createCourse:function(e){return E.post(D.zhiyeCourse,e)},destoryCourse:function(e){return E.delete(D.zhiyeCourseItem(e))},sortCourse:function(e){return E.post(D.zhiyeCourseSort,e)}},ct=lt,ut={data:function(){return{loading:!0,zhiyes:[],pagination:{currentPage:1,pageSize:10,total:0}}},created:function(){this.getData()},methods:{getData:function(){var e=this,t={page_size:this.pagination.pageSize,current_page:this.pagination.currentPage};this.loading=!0,ct.index(t).then((function(t){e.zhiyes=t.rows,e.pagination.currentPage=t.pagination.current_page,e.pagination.pageSize=t.pagination.page_size,e.pagination.total=t.pagination.total})).finally((function(){e.loading=!1}))},handleCommand:function(e){var t=e.split("-")[0],a=e.split("-")[1],n=e.split("-")[2];"edit"===t?this.$router.push({name:"ZhiyeEdit",params:{id:a}}):"delete"===t&&this.delZhiyes(n)},delZhiyes:function(e){var t=this,a=this.zhiyes[e].id;this.$confirm("确认删除吗？").then((function(){return ct.destory(a)})).then((function(){t.$message.success("删除课程成功"),t.zhiyes.splice(e,1)})).catch((function(){}))}}},dt=ut,mt=(a("4701"),Object(s["a"])(dt,st,ot,!1,null,null,null)),pt=mt.exports,ht=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"page-content"},[a("div",{staticClass:"c-650"},[e._m(0),a("el-form",{attrs:{"label-position":"top","label-width":"80px",size:"mini"}},[a("el-form-item",{attrs:{label:"职业名称："}},[a("el-input",{model:{value:e.zhiye.name,callback:function(t){e.$set(e.zhiye,"name",t)},expression:"zhiye.name"}})],1),a("el-form-item",{attrs:{label:"职业描述："}},[a("el-input",{attrs:{type:"textarea"},model:{value:e.zhiye.description,callback:function(t){e.$set(e.zhiye,"description",t)},expression:"zhiye.description"}})],1),a("el-form-item",{attrs:{label:"职业封面："}},[a("el-upload",{ref:"upload",staticClass:"zhiye-image-upload",attrs:{action:"",limit:1,"file-list":e.fileList,"before-upload":e.handleBeforeUpload,accept:"image/jpg, image/jpeg, image/png"}},[e.zhiye.image_url?e._e():a("i",{staticClass:"el-icon-plus el-uploader__icon"}),e.zhiye.image_url?a("img",{staticClass:"zhiye-image-upload",attrs:{src:e.zhiye.image_url}}):e._e()])],1),a("el-form-item",[a("el-button",{attrs:{size:"medium",type:"primary",plain:""},on:{click:e.handleSubmit}},[e._v("创建职业")])],1)],1)],1)])},ft=[function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"sub-header"},[a("div",{staticClass:"sub-header-title"},[e._v("基本信息")])])}],gt={data:function(){return{fileList:[],zhiye:{name:"",description:"",image_url:"",status:0}}},methods:{handleSubmit:function(){var e=this;this.loading=!0,ct.create(this.zhiye).then((function(t){e.$message.success("创建职业成功"),e.$router.push({name:"ZhiyeEdit",params:{id:t.id}})})).finally((function(){e.loading=!1}))},handleBeforeUpload:function(e){var t=this;return Ue.start(e).then((function(e){t.zhiye.image_url=e.imageUrl})),Promise.reject({})}}},vt=gt,bt=(a("8e17"),Object(s["a"])(vt,ht,ft,!1,null,"c0e31e66",null)),_t=bt.exports,yt=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],staticClass:"page-content"},[a("el-row",{attrs:{gutter:60}},[a("el-col",{attrs:{lg:12}},[a("div",{staticClass:"sub-header"},[a("div",{staticClass:"sub-header-title"},[e._v("基本信息")]),a("div",{staticClass:"sub-header-fd"},[a("el-button",{attrs:{size:"medium",type:e.isEdit?"primary":""},on:{click:e.handleZhiyeEdit}},[e._v(" "+e._s(e.isEdit?"保存":"修改")+" ")])],1)]),a("el-form",{attrs:{"label-position":"top",size:"mini",model:e.zhiye}},[a("el-form-item",{attrs:{label:"职业名称："}},[a("el-input",{attrs:{disabled:!e.isEdit},model:{value:e.zhiye.name,callback:function(t){e.$set(e.zhiye,"name",t)},expression:"zhiye.name"}})],1),a("el-form-item",{attrs:{label:"职业描述："}},[a("el-input",{attrs:{type:"textarea",disabled:!e.isEdit},model:{value:e.zhiye.description,callback:function(t){e.$set(e.zhiye,"description",t)},expression:"zhiye.description"}})],1),a("el-row",{attrs:{gutter:20}},[a("el-col",{attrs:{lg:12}},[a("el-form-item",{attrs:{label:"职业封面："}},[e.isEdit?a("el-upload",{ref:"upload",staticClass:"el-image-upload",attrs:{action:"",limit:1,"file-list":e.fileList,"before-upload":e.handleBeforeUpload,accept:"image/jpg, image/jpeg, image/png"}},[e.zhiye.image_url?e._e():a("i",{staticClass:"el-icon-plus el-uploader__icon"}),e.zhiye.image_url?a("img",{staticClass:"el-image-upload",attrs:{src:e.zhiye.image_url}}):e._e()]):e._e(),!e.isEdit&&e.zhiye.image_url?a("img",{staticClass:"el-image-upload",attrs:{src:e.zhiye.image_url}}):e._e(),e.isEdit||e.zhiye.image_url?e._e():a("span",[e._v("无")])],1)],1),a("el-col",{attrs:{lg:12}},[a("el-form-item",{attrs:{label:"职业状态："}},[a("el-switch",{attrs:{disabled:!e.isEdit,"active-value":1,"inactive-value":0},model:{value:e.zhiye.status,callback:function(t){e.$set(e.zhiye,"status",t)},expression:"zhiye.status"}})],1)],1)],1)],1)],1),a("el-col",{attrs:{lg:12}},[a("div",{staticClass:"sub-header"},[a("div",{staticClass:"sub-header-title"},[e._v("职业路径")])]),a("div",{staticClass:"path-container"},[a("draggable",{attrs:{group:"path",handle:".path-item-draggable"},on:{change:e.handleSortPath},model:{value:e.paths,callback:function(t){e.paths=t},expression:"paths"}},e._l(e.paths,(function(t,n){return a("div",{key:t.id,staticClass:"path-item"},[a("div",{staticClass:"path-item-title"},[a("i",{staticClass:"el-icon-rank path-item-draggable"}),a("span",[e._v(e._s(t.name))]),a("div",{staticClass:"path-item-ctrl"},[a("el-dropdown",{attrs:{trigger:"hover"},on:{command:e.handleCommandPath}},[a("span",{staticClass:"icon-ctrl"},[a("i",{staticClass:"el-icon-more"})]),a("el-dropdown-menu",{attrs:{slot:"dropdown"},slot:"dropdown"},[a("el-dropdown-item",{attrs:{command:"1-"+n}},[e._v("编辑")]),a("el-dropdown-item",{attrs:{command:"0-"+n}},[e._v("删除")])],1)],1)],1)]),a("div",{staticClass:"path-item-course"},[a("draggable",{attrs:{handle:".course-item-draggable",group:"course"},on:{change:function(t){return e.handleSortCourse(t,n)}},model:{value:t.courses,callback:function(a){e.$set(t,"courses",a)},expression:"path.courses"}},e._l(t.courses,(function(t,i){return a("div",{key:i,staticClass:"course-item"},[a("div",{staticClass:"course-item-text"},[a("i",{staticClass:"el-icon-rank course-item-draggable"}),a("span",[e._v(e._s(t.name))]),a("div",{staticClass:"course-item-ctrl"},[a("el-dropdown",{attrs:{trigger:"hover"},on:{command:e.handleCommandCourse}},[a("span",{staticClass:"icon-ctrl"},[a("i",{staticClass:"el-icon-more"})]),a("el-dropdown-menu",{attrs:{slot:"dropdown"},slot:"dropdown"},[a("el-dropdown-item",{attrs:{command:"0-"+n+"-"+i}},[e._v("删除")])],1)],1)],1)])])})),0),a("div",{staticClass:"course-item",on:{click:function(t){return e.handleAddCourse(n)}}},[a("div",{staticClass:"course-item-create"},[e._v(" 添加关联课程 "),a("i",{staticClass:"el-icon-circle-plus"})])])],1)])})),0),a("div",{staticClass:"path-item-create",on:{click:e.handletoCreatePath}},[e._v(" 添加路径 "),a("i",{staticClass:"el-icon-circle-plus"})])],1)])],1),a("el-dialog",{attrs:{title:"create"===e.dialogFormType?"添加职业路径":"修改职业路径",visible:e.dialogFormVisible},on:{"update:visible":function(t){e.dialogFormVisible=t}}},[a("el-form",{attrs:{model:e.dialogForm}},[a("el-form-item",{attrs:{label:"路径名称"}},[a("el-input",{model:{value:e.dialogForm.name,callback:function(t){e.$set(e.dialogForm,"name",t)},expression:"dialogForm.name"}})],1),a("el-form-item",{attrs:{label:"路径描述"}},[a("el-input",{attrs:{type:"textarea"},model:{value:e.dialogForm.description,callback:function(t){e.$set(e.dialogForm,"description",t)},expression:"dialogForm.description"}})],1)],1),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(t){e.dialogFormVisible=!1}}},[e._v("取 消")]),a("el-button",{attrs:{type:"primary"},on:{click:e.handlePathSubimt}},[e._v("确 定")])],1)],1)],1)},kt=[],Ct=(a("a4d3"),a("e01a"),{data:function(){return{loading:!0,isEdit:!1,dialogFormType:"create",dialogFormVisible:!1,dialogForm:{id:null,name:"",description:"",pathIndex:null},drawerVisible:!1,fileList:[],zhiye:{id:null,name:"",description:"",status:0,image_url:""},paths:[]}},created:function(){this.getData()},methods:{getData:function(){var e=this,t=this.$route.params.id;ct.show(t).then((function(t){e.zhiye=t.zhiye,e.paths=t.zhiye.zhiye_paths})).finally((function(){e.loading=!1}))},handleZhiyeEdit:function(){var e=this,t=this.$route.params.id;this.isEdit=!this.isEdit,this.isEdit||(this.loading=!0,ct.edit(t,Object(h["a"])({},this.zhiye)).then((function(){e.$message.success("编辑成功")})).finally((function(){e.loading=!1})))},handleBeforeUpload:function(e){var t=this;return Ue.start(e).then((function(e){t.zhiye.image_url=e.imageUrl})),Promise.reject({})},handletoCreatePath:function(){this.dialogFormType="create",this.dialogFormVisible=!0,this.dialogForm.id="",this.dialogForm.name="",this.dialogForm.description="",this.dialogForm.pathIndex=""},handlePathSubimt:function(){"create"===this.dialogFormType?this.handleCreatePath():this.handleEditPath()},handleCreatePath:function(){var e=this,t=Number(this.$route.params.id),a=this.paths.length+1,n=this.dialogForm.name,i=this.dialogForm.description;this.loading=!0,ct.createPath({sort:a,zhiye_id:t,name:n,description:i}).then((function(t){e.$message.success("添加路径成功"),e.paths.push({id:t.id,name:n,description:i,sort:a,courses:[]})})).finally((function(){e.loading=!1,e.dialogFormVisible=!1}))},handleEditPath:function(){var e=this,t=Number(this.$route.params.id),a=this.dialogForm.id,n=this.dialogForm.name,i=this.dialogForm.description,r=this.dialogForm.pathIndex;this.loading=!0,ct.editPath(a,{zhiye_id:t,name:n,description:i}).then((function(){e.$message.success("编辑成功"),e.paths[r].name=n,e.paths[r].description=i})).finally((function(){e.loading=!1,e.dialogFormVisible=!1}))},handleDestoryPath:function(e){var t=this,a=this.paths[e];this.loading=!0,this.$confirm("确认删除「"+a.name+"」吗？").then((function(){return ct.destoryPath(a.id)})).then((function(){t.paths.splice(e,1)})).finally((function(){t.loading=!1}))},handleCommandPath:function(e){var t=e.split("-"),a=t[0],n=t[1],i=this.paths[n];"1"===a?(this.dialogFormType="edit",this.dialogFormVisible=!0,this.dialogForm.name=i.name,this.dialogForm.description=i.description,this.dialogForm.id=i.id,this.dialogForm.pathIndex=n):this.handleDestoryPath(n)},handleSortPath:function(){var e=this,t=this.paths.map((function(e){return e.id}));ct.sortPath({paths:t}).then((function(){e.$message.success("路径排序成功")}))},handleSortCourse:function(e,t){var a=this;if(e.added||e.moved){var n=this.paths[t].courses.map((function(e){return e.zhiye_course.id})),i=this.paths[t].id;ct.sortCourse({courses:n,path_id:i}).then((function(){a.$message.success("关联课程排序成功")}))}},handleImgAdd:function(e,t){var a=this;Ue.start(t).then((function(t){a.$refs.md.$img2Url(e,t.imageUrl)}))},handleAddCourse:function(e){var t=this,a=this.paths[e].id,n=Number(this.$route.params.id),i=this.paths[e].courses.length+1;this.$prompt("请输入课程 ID","关联课程",{confirmButtonText:"确定",cancelButtonText:"取消",inputPattern:/^\d+$/,inputErrorMessage:"输入课程 ID，课程 ID 为数字"}).then((function(e){var r=e.value;t.loading=!0,ct.createCourse({path_id:a,zhiye_id:n,sort:i,course_id:Number(r)}).then((function(){t.$message.success("添加课程成功"),t.getData()})).finally((function(){t.loading=!1}))}))},handleCommandCourse:function(e){var t=this,a=e.split("-"),n=Number(a[0]),i=a[1],r=a[2],s=this.paths[i],o=s.courses[r],l=o.zhiye_course.id;n||(this.loading=!0,this.$confirm("确认删除「"+o.name+"」吗？").then((function(){return ct.destoryCourse(l)})).then((function(){t.paths[i].courses.splice(r,1)})).finally((function(){t.loading=!1})))}},components:{draggable:Ke.a}}),wt=Ct,xt=(a("3227"),Object(s["a"])(wt,yt,kt,!1,null,"b5a3146e",null)),$t=xt.exports,St=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],staticClass:"page-content"},[a("router-link",{attrs:{to:{name:"CompanyCreate"}}},[a("el-button",{attrs:{size:"medium",type:"primary",plain:""}},[e._v("创建企业")])],1),a("el-table",{staticClass:"mt-20",attrs:{data:e.companies,size:"medium"}},[a("el-table-column",{attrs:{prop:"id",label:"id",width:"80px"}}),a("el-table-column",{attrs:{prop:"name",label:"名称"}}),a("el-table-column",{attrs:{label:"操作",width:"180px",align:"right"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-dropdown",{attrs:{trigger:"hover"},on:{command:e.handleCommand}},[a("span",{staticClass:"icon-ctrl"},[a("i",{staticClass:"el-icon-more"})]),a("el-dropdown-menu",{attrs:{slot:"dropdown"},slot:"dropdown"},[a("el-dropdown-item",{attrs:{command:"edit-"+t.row.id+"-"+t.$index}},[e._v("编辑")]),a("el-dropdown-item",{attrs:{command:"delete-"+t.row.id+"-"+t.$index}},[e._v("删除")])],1)],1)]}}])})],1),a("el-pagination",{staticClass:"mt-20",attrs:{background:"",layout:"total, prev, pager, next, jumper","current-page":e.pagination.currentPage,"page-size":e.pagination.pageSize,total:e.pagination.total,"hide-on-single-page":!0},on:{"current-change":e.getData,"update:currentPage":function(t){return e.$set(e.pagination,"currentPage",t)},"update:current-page":function(t){return e.$set(e.pagination,"currentPage",t)}}})],1)},jt=[],zt={create:function(e){return E.post(D.company,e)},index:function(e){return E.get(D.company,e)},show:function(e){return E.get(D.companyItem(e))},edit:function(e,t){return E.put(D.companyItem(e),t)},destory:function(e){return E.delete(D.companyItem(e))}},Et=zt,Pt={data:function(){return{loading:!0,companies:[],pagination:{currentPage:1,pageSize:10,total:0}}},created:function(){this.getData()},methods:{getData:function(){var e=this,t={page_size:this.pagination.pageSize,current_page:this.pagination.currentPage};this.loading=!0,Et.index(t).then((function(t){e.companies=t.rows,e.pagination.currentPage=t.pagination.current_page,e.pagination.pageSize=t.pagination.page_size,e.pagination.total=t.pagination.total})).finally((function(){e.loading=!1}))},handleCommand:function(e){var t=e.split("-")[0],a=e.split("-")[1],n=e.split("-")[2];"edit"===t?this.$router.push({name:"CompanyEdit",params:{id:a}}):"delete"===t&&this.companyDestory(n)},companyDestory:function(e){var t=this,a=this.companies[e].id,n=this.companies[e].name;this.$confirm("确认删除企业「".concat(n,"」吗？")).then((function(){return Et.destory(a)})).then((function(){t.$message.success("删除企业成功"),t.companies.splice(e,1)})).catch((function(){}))}}},It=Pt,Dt=(a("01c2"),Object(s["a"])(It,St,jt,!1,null,null,null)),Ot=Dt.exports,qt=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"page-content"},[a("div",{staticClass:"c-650"},[e._m(0),a("el-form",{attrs:{"label-position":"top","label-width":"80px",size:"mini"}},[a("el-row",{attrs:{gutter:20}},[a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:"企业全称:"}},[a("el-input",{model:{value:e.company.name,callback:function(t){e.$set(e.company,"name",t)},expression:"company.name"}})],1)],1),a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:"企业短称:"}},[a("el-input",{model:{value:e.company.short_name,callback:function(t){e.$set(e.company,"short_name",t)},expression:"company.short_name"}})],1)],1)],1),a("el-row",{attrs:{gutter:20}},[a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:"企业口号:"}},[a("el-input",{model:{value:e.company.slogan,callback:function(t){e.$set(e.company,"slogan",t)},expression:"company.slogan"}})],1)],1),a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:"社会编号:"}},[a("el-input",{model:{value:e.company.code,callback:function(t){e.$set(e.company,"code",t)},expression:"company.code"}})],1)],1)],1),a("el-row",{attrs:{gutter:20}},[a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:"联系人名称:"}},[a("el-input",{model:{value:e.company.contact_name,callback:function(t){e.$set(e.company,"contact_name",t)},expression:"company.contact_name"}})],1)],1),a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:"联系人电话:"}},[a("el-input",{model:{value:e.company.contact_phone,callback:function(t){e.$set(e.company,"contact_phone",t)},expression:"company.contact_phone"}})],1)],1)],1),a("el-form-item",{attrs:{label:"企业介绍："}},[a("el-input",{attrs:{type:"textarea"},model:{value:e.company.introduction,callback:function(t){e.$set(e.company,"introduction",t)},expression:"company.introduction"}})],1),a("el-form-item",{attrs:{label:"企业封面："}},[a("el-upload",{ref:"upload",staticClass:"el-image-upload",attrs:{action:"",limit:1,"file-list":e.fileList,"before-upload":e.handleBeforeUpload,accept:"image/jpg, image/jpeg, image/png"}},[e.company.image_url?e._e():a("i",{staticClass:"el-icon-plus el-uploader__icon"}),e.company.image_url?a("img",{staticClass:"el-image-upload",attrs:{src:e.company.image_url}}):e._e()])],1),a("el-form-item",[a("el-button",{attrs:{size:"medium",type:"primary",plain:""},on:{click:e.handleSubmit}},[e._v("创建")])],1)],1)],1)])},Mt=[function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"sub-header"},[a("div",{staticClass:"sub-header-title"},[e._v("基本信息")])])}],Tt={data:function(){return{fileList:[],company:{name:"",short_name:"",slogan:"",code:"",introduction:"",contact_name:"",contact_phone:"",image_url:""}}},methods:{handleSubmit:function(){var e=this;this.loading=!0,Et.create(this.company).then((function(){e.$message.success("创建企业成功"),e.$router.push({name:"Company"})})).finally((function(){e.loading=!1}))},handleBeforeUpload:function(e){var t=this;return Ue.start(e).then((function(e){t.company.image_url=e.imageUrl})),Promise.reject({})}}},Bt=Tt,Vt=(a("2ab9"),Object(s["a"])(Bt,qt,Mt,!1,null,"ec51d53a",null)),Nt=Vt.exports,At=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"page-content"},[a("div",{staticClass:"c-650"},[e._m(0),a("el-form",{attrs:{"label-position":"top","label-width":"80px",size:"mini"}},[a("el-row",{attrs:{gutter:20}},[a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:"企业全称:"}},[a("el-input",{model:{value:e.company.name,callback:function(t){e.$set(e.company,"name",t)},expression:"company.name"}})],1)],1),a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:"企业短称:"}},[a("el-input",{model:{value:e.company.short_name,callback:function(t){e.$set(e.company,"short_name",t)},expression:"company.short_name"}})],1)],1)],1),a("el-row",{attrs:{gutter:20}},[a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:"企业口号:"}},[a("el-input",{model:{value:e.company.slogan,callback:function(t){e.$set(e.company,"slogan",t)},expression:"company.slogan"}})],1)],1),a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:"社会编号:"}},[a("el-input",{model:{value:e.company.code,callback:function(t){e.$set(e.company,"code",t)},expression:"company.code"}})],1)],1)],1),a("el-row",{attrs:{gutter:20}},[a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:"联系人名称:"}},[a("el-input",{model:{value:e.company.contact_name,callback:function(t){e.$set(e.company,"contact_name",t)},expression:"company.contact_name"}})],1)],1),a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:"联系人电话:"}},[a("el-input",{model:{value:e.company.contact_phone,callback:function(t){e.$set(e.company,"contact_phone",t)},expression:"company.contact_phone"}})],1)],1)],1),a("el-form-item",{attrs:{label:"企业介绍："}},[a("el-input",{attrs:{type:"textarea"},model:{value:e.company.introduction,callback:function(t){e.$set(e.company,"introduction",t)},expression:"company.introduction"}})],1),a("el-form-item",{attrs:{label:"企业封面："}},[a("el-upload",{ref:"upload",staticClass:"el-image-upload",attrs:{action:"",limit:1,"file-list":e.fileList,"before-upload":e.handleBeforeUpload,accept:"image/jpg, image/jpeg, image/png"}},[e.company.image_url?e._e():a("i",{staticClass:"el-icon-plus el-uploader__icon"}),e.company.image_url?a("img",{staticClass:"el-image-upload",attrs:{src:e.company.image_url}}):e._e()])],1),a("el-form-item",[a("el-button",{attrs:{size:"medium",type:"primary",plain:""},on:{click:e.handleSubmit}},[e._v("保存")])],1)],1)],1)])},Ut=[function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"sub-header"},[a("div",{staticClass:"sub-header-title"},[e._v("基本信息")])])}],Ft={data:function(){return{fileList:[],company:{name:"",short_name:"",slogan:"",code:"",introduction:"",contact_name:"",contact_phone:"",image_url:""}}},created:function(){var e=this,t=this.$route.params.id;Et.show(t).then((function(t){e.company=t.company}))},methods:{handleSubmit:function(){var e=this;this.loading=!0;var t=this.$route.params.id;Et.edit(t,this.company).then((function(){e.$message.success("修改企业成功"),e.$router.push({name:"Company"})})).finally((function(){e.loading=!1}))},handleBeforeUpload:function(e){var t=this;return Ue.start(e).then((function(e){t.company.image_url=e.imageUrl})),Promise.reject({})}}},Rt=Ft,Lt=(a("7d3c"),Object(s["a"])(Rt,At,Ut,!1,null,"438307f0",null)),Qt=Lt.exports,Zt=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],staticClass:"page-content"},[a("router-link",{attrs:{to:{name:"ProjectCreate"}}},[a("el-button",{attrs:{size:"medium",type:"primary",plain:""}},[e._v("创建项目")])],1),a("el-table",{staticClass:"mt-20",attrs:{data:e.projects,size:"medium"}},[a("el-table-column",{attrs:{prop:"id",label:"id",width:"80px"}}),a("el-table-column",{attrs:{prop:"name",label:"名称"}}),a("el-table-column",{attrs:{label:"操作",width:"180px",align:"right"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-dropdown",{attrs:{trigger:"hover"},on:{command:e.handleCommand}},[a("span",{staticClass:"icon-ctrl"},[a("i",{staticClass:"el-icon-more"})]),a("el-dropdown-menu",{attrs:{slot:"dropdown"},slot:"dropdown"},[a("el-dropdown-item",{attrs:{command:"detail-"+t.row.id+"-"+t.$index}},[e._v("内容")]),a("el-dropdown-item",{attrs:{command:"edit-"+t.row.id+"-"+t.$index}},[e._v("编辑")]),a("el-dropdown-item",{attrs:{command:"delete-"+t.row.id+"-"+t.$index}},[e._v("删除")])],1)],1)]}}])})],1),a("el-pagination",{staticClass:"mt-20",attrs:{background:"",layout:"total, prev, pager, next, jumper","current-page":e.pagination.currentPage,"page-size":e.pagination.pageSize,total:e.pagination.total,"hide-on-single-page":!0},on:{"current-change":e.getData,"update:currentPage":function(t){return e.$set(e.pagination,"currentPage",t)},"update:current-page":function(t){return e.$set(e.pagination,"currentPage",t)}}})],1)},Jt=[],Gt={create:function(e){return E.post(D.project,e)},index:function(e){return E.get(D.project,e)},show:function(e){return E.get(D.projectItem(e))},edit:function(e,t){return E.put(D.projectItem(e),t)},destory:function(e){return E.delete(D.projectItem(e))},createVersion:function(e){return E.post(D.projectVersion,e)},editVersion:function(e,t){return E.put(D.projectVersionItem(e),t)},destoryVersion:function(e){return E.delete(D.projectVersionItem(e))},sortVersion:function(e){return E.post(D.projectVersionSort,e)},createStory:function(e){return E.post(D.projectStory,e)},editStory:function(e,t){return E.put(D.projectStoryItem(e),t)},destoryStory:function(e){return E.delete(D.projectStoryItem(e))},sortStory:function(e){return E.post(D.projectStorySort,e)},showTask:function(e){return E.get(D.projectTaskItem(e))},createTask:function(e){return E.post(D.projectTask,e)},editTask:function(e,t){return E.put(D.projectTaskItem(e),t)},destoryTask:function(e){return E.delete(D.projectTaskItem(e))},sortTask:function(e){return E.post(D.projectTaskSort,e)}},Ht=Gt,Kt={data:function(){return{loading:!0,projects:[],pagination:{currentPage:1,pageSize:10,total:0}}},created:function(){this.getData()},methods:{getData:function(){var e=this,t={page_size:this.pagination.pageSize,current_page:this.pagination.currentPage};this.loading=!0,Ht.index(t).then((function(t){e.projects=t.rows,e.pagination.currentPage=t.pagination.current_page,e.pagination.pageSize=t.pagination.page_size,e.pagination.total=t.pagination.total})).finally((function(){e.loading=!1}))},handleCommand:function(e){var t=e.split("-")[0],a=e.split("-")[1],n=e.split("-")[2];"edit"===t?this.$router.push({name:"ProjectEdit",params:{id:a}}):"delete"===t?this.projectDestory(n):"detail"===t&&this.$router.push({name:"ProjectItem",params:{id:a}})},projectDestory:function(e){var t=this,a=this.projects[e].id,n=this.projects[e].name;this.$confirm("确认删除项目「".concat(n,"」吗？")).then((function(){return Ht.destory(a)})).then((function(){t.$message.success("删除项目成功"),t.projects.splice(e,1)})).catch((function(){}))}}},Wt=Kt,Xt=(a("14ed"),Object(s["a"])(Wt,Zt,Jt,!1,null,null,null)),Yt=Xt.exports,ea=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],staticClass:"page-content"},[a("h2",{staticClass:"project-title"},[e._v(e._s(e.project.name))]),a("div",{staticClass:"project-description"},[e._v(e._s(e.project.description))]),a("el-divider"),a("el-row",{attrs:{gutter:40}},[a("el-col",{attrs:{lg:8}},[a("h3",[e._v("版本")]),a("div",{staticClass:"version-container"},[a("draggable",{attrs:{group:"version",handle:".version-item-draggable"},on:{change:e.handleVersionSort},model:{value:e.versions,callback:function(t){e.versions=t},expression:"versions"}},e._l(e.versions,(function(t,n){return a("div",{key:t.id,class:["version-item",{active:e.versionId===t.id}],on:{click:function(a){return e.handleVersionCheckout(t.id,n)}}},[a("div",{staticClass:"version-item-title"},[a("i",{staticClass:"el-icon-rank version-item-draggable"}),a("span",[e._v(e._s(t.name))]),a("div",{staticClass:"version-item-ctrl"},[a("el-dropdown",{attrs:{trigger:"hover"},on:{command:e.handleVersionCommand}},[a("span",{staticClass:"icon-ctrl"},[a("i",{staticClass:"el-icon-more"})]),a("el-dropdown-menu",{attrs:{slot:"dropdown"},slot:"dropdown"},[a("el-dropdown-item",{attrs:{command:"1-"+n}},[e._v("编辑")]),a("el-dropdown-item",{attrs:{command:"0-"+n}},[e._v("删除")])],1)],1)],1)])])})),0),a("div",{staticClass:"version-item-create",on:{click:e.handleVersionCreate}},[e._v(" 添加版本 "),a("i",{staticClass:"el-icon-circle-plus"})])],1)]),a("el-col",{attrs:{lg:16}},[a("h3",[e._v("故事")]),e.versionId?a("div",{staticClass:"story-container"},[a("draggable",{attrs:{group:"story",handle:".story-item-draggable"},on:{change:e.handleStorySort},model:{value:e.stories,callback:function(t){e.stories=t},expression:"stories"}},e._l(e.stories,(function(t,n){return a("div",{key:t.id,staticClass:"story-item"},[a("div",{staticClass:"story-item-title"},[a("i",{staticClass:"el-icon-rank story-item-draggable"}),a("span",[e._v(e._s(t.name))]),a("div",{staticClass:"story-item-ctrl"},[a("el-dropdown",{attrs:{trigger:"hover"},on:{command:e.handleStoryCommand}},[a("span",{staticClass:"icon-ctrl"},[a("i",{staticClass:"el-icon-more"})]),a("el-dropdown-menu",{attrs:{slot:"dropdown"},slot:"dropdown"},[a("el-dropdown-item",{attrs:{command:"1-"+n}},[e._v("编辑")]),a("el-dropdown-item",{attrs:{command:"0-"+n}},[e._v("删除")])],1)],1)],1)]),a("div",{staticClass:"story-item-task"},[a("draggable",{attrs:{handle:".task-item-draggable",group:"task"},model:{value:t.tasks,callback:function(a){e.$set(t,"tasks",a)},expression:"story.tasks"}},e._l(t.tasks,(function(t,i){return a("div",{key:t.id,staticClass:"task-item"},[a("div",{staticClass:"task-item-text"},[a("i",{staticClass:"el-icon-rank task-item-draggable"}),a("span",[e._v(e._s(t.name))]),a("div",{staticClass:"task-item-ctrl"},[a("el-dropdown",{attrs:{trigger:"hover"},on:{command:e.handleTaskCommand}},[a("span",{staticClass:"icon-ctrl"},[a("i",{staticClass:"el-icon-more"})]),a("el-dropdown-menu",{attrs:{slot:"dropdown"},slot:"dropdown"},[a("el-dropdown-item",{attrs:{command:"1-"+n+"-"+i}},[e._v("内容")]),a("el-dropdown-item",{attrs:{command:"0-"+n+"-"+i}},[e._v("删除")])],1)],1)],1)])])})),0),a("div",{staticClass:"task-item",on:{click:function(t){return e.handleAddtask(n)}}},[a("div",{staticClass:"task-item-create"},[e._v(" 添加任务 "),a("i",{staticClass:"el-icon-circle-plus"})])])],1)])})),0),a("div",{staticClass:"story-item-create",on:{click:e.handleStoryCreate}},[e._v(" 添加故事 "),a("i",{staticClass:"el-icon-circle-plus"})])],1):e._e(),e.versionId?e._e():a("div",[e._v("👈 请点击选择版本")])])],1),a("el-drawer",{attrs:{visible:e.drawerVisible,direction:"rtl",size:"50%","before-close":e.handleCloseDrawer},on:{"update:visible":function(t){e.drawerVisible=t}}},[a("div",{staticClass:"task-content"},[a("el-form",{attrs:{"label-position":"top",size:"mini",model:e.task}},[a("el-form-item",{attrs:{label:"任务名称："}},[a("el-input",{model:{value:e.task.name,callback:function(t){e.$set(e.task,"name",t)},expression:"task.name"}})],1),a("el-row",{attrs:{gutter:40}},[a("el-col",{attrs:{lg:12}},[a("el-form-item",{attrs:{label:"任务难度："}},[a("el-select",{attrs:{placeholder:"请选择难度"},model:{value:e.task.level,callback:function(t){e.$set(e.task,"level",t)},expression:"task.level"}},[a("el-option",{attrs:{label:"入门",value:1}}),a("el-option",{attrs:{label:"初级",value:2}}),a("el-option",{attrs:{label:"中级",value:3}}),a("el-option",{attrs:{label:"高级",value:4}})],1)],1)],1),a("el-col",{attrs:{lg:12}},[a("el-form-item",{attrs:{label:"任务平台："}},[a("el-select",{attrs:{placeholder:"请选择平台"},model:{value:e.task.platform,callback:function(t){e.$set(e.task,"platform",t)},expression:"task.platform"}},[a("el-option",{attrs:{label:"API",value:1}}),a("el-option",{attrs:{label:"前台",value:2}}),a("el-option",{attrs:{label:"后台",value:3}}),a("el-option",{attrs:{label:"小程序",value:4}})],1)],1)],1)],1),a("el-form-item",{attrs:{label:"课任务内容："}},[a("mavon-editor",{ref:"md",staticClass:"md",attrs:{toolbars:e.markdownOption,subfield:!1},on:{imgAdd:e.handleImgAdd},model:{value:e.task.content,callback:function(t){e.$set(e.task,"content",t)},expression:"task.content"}})],1),a("el-form-item",[a("el-button",{attrs:{size:"medium",type:"primary"},on:{click:e.handleTaskSave}},[e._v("保存")])],1)],1)],1)])],1)},ta=[],aa=(a("7db0"),{bold:!0,mark:!0,quote:!0,ol:!0,ul:!0,link:!0,imagelink:!0,code:!0,table:!0}),na={components:{draggable:Ke.a,mavonEditor:Ge["mavonEditor"]},data:function(){return{markdownOption:aa,loading:!0,project:{name:"",description:""},versionId:null,versionIndex:null,versions:[],stories:[],drawerVisible:!1,taskId:null,task:{name:"",content:"",level:"",platform:""}}},created:function(){this.getData()},watch:{versionId:function(e){var t=this.versions.find((function(t){return t.id===e}));this.stories=t.stories}},methods:{handleImgAdd:function(e,t){var a=this;Ue.start(t).then((function(t){a.$refs.md.$img2Url(e,t.imageUrl)}))},getData:function(){var e=this,t=this.$route.params.id;Ht.show(t).then((function(t){e.project=t.project,e.versions=t.project.versions,e.versions.length&&(e.versionId=e.versions[0].id)})).finally((function(){e.loading=!1}))},handleVersionCheckout:function(e,t){this.versionId=e,this.versionIndex=t},handleVersionSort:function(){var e=this,t=this.versions.map((function(e){return e.id}));Ht.sortVersion({versions:t}).then((function(){e.$message.success("版本排序成功")}))},handleVersionCreate:function(){var e=this,t=Number(this.$route.params.id),a=this.versions.length+1;this.$prompt("请输入版本名称","新版本",{confirmButtonText:"确定",cancelButtonText:"取消",inputPattern:/\S/,inputErrorMessage:"输入不能为空"}).then((function(n){var i=n.value;e.loading=!0,Ht.createVersion({sort:a,project_id:t,name:i}).then((function(t){e.$message.success("添加章节成功"),e.versions.push({id:t.id,name:i,stories:[],sort:a})})).finally((function(){e.loading=!1}))}))},handleVersionCommand:function(e){var t=this,a=e.split("-"),n=a[0],i=a[1],r=this.versions[i];"1"===n?this.$prompt("请编辑章名称","编辑章",{confirmButtonText:"确定",cancelButtonText:"取消",inputPattern:/\S/,inputErrorMessage:"输入不能为空",inputValue:r.name}).then((function(e){var a=e.value;t.handleVersionEdit(r.id,{name:a},(function(){t.versions[i].name=a}))})):this.handleVersionDestory(r.id,i)},handleVersionEdit:function(e,t,a){var n=this;this.loading=!0,Ht.editVersion(e,t).then((function(){n.$message.success("编辑版本成功"),a()})).finally((function(){n.loading=!1}))},handleVersionDestory:function(e,t){var a=this;this.$confirm("确认删除「"+name+"」吗？").then((function(){return a.loading=!0,a.loading=!0,Ht.destoryVersion(e)})).then((function(){a.$message.success("版本删除成功"),a.versions.splice(t,1)})).finally((function(){a.loading=!1}))},handleStoryCreate:function(){var e=this,t=Number(this.$route.params.id),a=this.versionId,n=this.versionIndex,i=this.stories.length+1;this.$prompt("请输入故事名称","新故事",{confirmButtonText:"确定",cancelButtonText:"取消",inputPattern:/\S/,inputErrorMessage:"输入不能为空"}).then((function(r){var s=r.value;e.loading=!0,Ht.createStory({sort:i,project_id:t,version_id:a,name:s}).then((function(t){e.$message.success("添加故事成功"),e.versions[n].stories.push({sort:i,id:t.id,name:s,tasks:[]})})).finally((function(){e.loading=!1}))}))},handleStorySort:function(){var e=this,t=this.stories.map((function(e){return e.id}));Ht.sortStory({stories:t}).then((function(){e.$message.success("故事排序成功")}))},handleStoryCommand:function(e){var t=this,a=e.split("-"),n=a[0],i=a[1],r=this.stories[i];"1"===n?this.$prompt("请编辑章名称","编辑章",{confirmButtonText:"确定",cancelButtonText:"取消",inputPattern:/\S/,inputErrorMessage:"输入不能为空",inputValue:r.name}).then((function(e){var a=e.value;t.handleStoryEdit(r.id,{name:a},(function(){t.stories[i].name=a}))})):this.handleStoryDestory(r.id,i)},handleStoryEdit:function(e,t,a){var n=this;this.loading=!0,Ht.editStory(e,t).then((function(){n.$message.success("编辑故事成功"),a()})).finally((function(){n.loading=!1}))},handleStoryDestory:function(e,t){var a=this,n=this.stories[t].name;this.$confirm("确认删除「"+n+"」吗？").then((function(){return a.loading=!0,Ht.destoryStory(e)})).then((function(){a.$message.success("故事删除成功"),a.stories.splice(t,1)})).finally((function(){a.loading=!1}))},handleAddtask:function(e){var t=this,a=Number(this.$route.params.id),n=this.versionId,i=this.stories[e],r=i.id,s=i.tasks.length+1;this.$prompt("请输入任务名称","新任务",{confirmButtonText:"确定",cancelButtonText:"取消",inputPattern:/\S/,inputErrorMessage:"输入不能为空"}).then((function(i){var o=i.value;t.loading=!0,Ht.createTask({sort:s,project_id:a,version_id:n,story_id:r,name:o}).then((function(a){t.stories[e].tasks.push({id:a.id,name:o,sort:s}),t.$message.success("添加任务成功")})).finally((function(){t.loading=!1}))}))},handleTaskCommand:function(e){var t=e.split("-"),a=t[0],n=t[1],i=t[2],r=this.stories[n],s=r.tasks[i].id;"1"===a?this.handleOpenDrawer(s):this.handleTaskDestory(s,n,i)},handleOpenDrawer:function(e){var t=this;this.loading=!0,Ht.showTask(e).then((function(a){t.drawerVisible=!0,t.task=a.task,t.taskId=e})).finally((function(){t.loading=!1}))},handleTaskDestory:function(e,t,a){var n=this,i=this.stories[t].tasks[a].name;this.$confirm("确认删除「"+i+"」吗？").then((function(){return n.loading=!0,Ht.destoryTask(e)})).then((function(){n.$message.success("任务删除成功"),n.stories[t].tasks.splice(a,1)})).finally((function(){n.loading=!1}))},handleCloseDrawer:function(e){this.$confirm("确认关闭？").then((function(){e()})).catch((function(){}))},handleTaskSave:function(){var e=this,t=this.taskId,a=this.task;this.loading=!0,Ht.editTask(t,a).then((function(){e.$message.success("保存成功"),e.drawerVisible=!1})).finally((function(){e.loading=!1}))}}},ia=na,ra=(a("fcd9"),Object(s["a"])(ia,ea,ta,!1,null,"4d2a6b9c",null)),sa=ra.exports,oa=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"page-content"},[a("div",{staticClass:"c-650"},[e._m(0),a("el-form",{attrs:{"label-position":"top","label-width":"80px",size:"mini"}},[a("el-form-item",{attrs:{label:"项目名称："}},[a("el-input",{model:{value:e.project.name,callback:function(t){e.$set(e.project,"name",t)},expression:"project.name"}})],1),a("el-form-item",{attrs:{label:"项目介绍："}},[a("el-input",{attrs:{type:"textarea"},model:{value:e.project.description,callback:function(t){e.$set(e.project,"description",t)},expression:"project.description"}})],1),a("el-form-item",{attrs:{label:"项目封面："}},[a("el-upload",{ref:"upload",staticClass:"el-image-upload",attrs:{action:"",limit:1,"file-list":e.fileList,"before-upload":e.handleBeforeUpload,accept:"image/jpg, image/jpeg, image/png"}},[e.project.image_url?e._e():a("i",{staticClass:"el-icon-plus el-uploader__icon"}),e.project.image_url?a("img",{staticClass:"el-image-upload",attrs:{src:e.project.image_url}}):e._e()])],1),a("el-form-item",[a("el-button",{attrs:{size:"medium",type:"primary",plain:""},on:{click:e.handleSubmit}},[e._v("创建")])],1)],1)],1)])},la=[function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"sub-header"},[a("div",{staticClass:"sub-header-title"},[e._v("基本信息")])])}],ca={data:function(){return{fileList:[],project:{name:"",description:"",image_url:""}}},methods:{handleSubmit:function(){var e=this;this.loading=!0,Ht.create(this.project).then((function(){e.$message.success("创建项目成功"),e.$router.push({name:"Project"})})).finally((function(){e.loading=!1}))},handleBeforeUpload:function(e){var t=this;return Ue.start(e).then((function(e){t.project.image_url=e.imageUrl})),Promise.reject({})}}},ua=ca,da=(a("7672"),Object(s["a"])(ua,oa,la,!1,null,"093e56df",null)),ma=da.exports,pa=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"page-content"},[a("div",{staticClass:"c-650"},[e._m(0),a("el-form",{attrs:{"label-position":"top","label-width":"80px",size:"mini"}},[a("el-form-item",{attrs:{label:"项目名称："}},[a("el-input",{model:{value:e.project.name,callback:function(t){e.$set(e.project,"name",t)},expression:"project.name"}})],1),a("el-form-item",{attrs:{label:"项目介绍："}},[a("el-input",{attrs:{type:"textarea"},model:{value:e.project.description,callback:function(t){e.$set(e.project,"description",t)},expression:"project.description"}})],1),a("el-form-item",{attrs:{label:"项目封面："}},[a("el-upload",{ref:"upload",staticClass:"el-image-upload",attrs:{action:"",limit:1,"file-list":e.fileList,"before-upload":e.handleBeforeUpload,accept:"image/jpg, image/jpeg, image/png"}},[e.project.image_url?e._e():a("i",{staticClass:"el-icon-plus el-uploader__icon"}),e.project.image_url?a("img",{staticClass:"el-image-upload",attrs:{src:e.project.image_url}}):e._e()])],1),a("el-form-item",[a("el-button",{attrs:{size:"medium",type:"primary",plain:""},on:{click:e.handleSubmit}},[e._v("保存")])],1)],1)],1)])},ha=[function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"sub-header"},[a("div",{staticClass:"sub-header-title"},[e._v("基本信息")])])}],fa={data:function(){return{fileList:[],project:{name:"",description:"",image_url:""}}},created:function(){this.getData()},methods:{getData:function(){var e=this,t=this.$route.params.id;Ht.show(t).then((function(t){e.project=t.project})).finally((function(){e.loading=!1}))},handleSubmit:function(){var e=this,t=this.$route.params.id;this.loading=!0,Ht.edit(t,this.project).then((function(){e.$message.success("项目编辑成功"),e.$router.push({name:"Project"})})).finally((function(){e.loading=!1}))},handleBeforeUpload:function(e){var t=this;return Ue.start(e).then((function(e){t.project.image_url=e.imageUrl})),Promise.reject({})}}},ga=fa,va=(a("b56f"),Object(s["a"])(ga,pa,ha,!1,null,"10904834",null)),ba=va.exports,_a=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],staticClass:"page-content"},[a("router-link",{attrs:{to:{name:"StackCreate"}}},[a("el-button",{attrs:{size:"medium",type:"primary",plain:""}},[e._v("创建")])],1),a("el-table",{staticClass:"mt-20",attrs:{data:e.stacks,size:"medium"}},[a("el-table-column",{attrs:{prop:"id",label:"id",width:"80px"}}),a("el-table-column",{attrs:{prop:"name",label:"名称"}}),a("el-table-column",{attrs:{label:"操作",width:"180px",align:"right"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-dropdown",{attrs:{trigger:"hover"},on:{command:e.handleCommand}},[a("span",{staticClass:"icon-ctrl"},[a("i",{staticClass:"el-icon-more"})]),a("el-dropdown-menu",{attrs:{slot:"dropdown"},slot:"dropdown"},[a("el-dropdown-item",{attrs:{command:"edit-"+t.row.id+"-"+t.$index}},[e._v("编辑")]),a("el-dropdown-item",{attrs:{command:"delete-"+t.row.id+"-"+t.$index}},[e._v("删除")])],1)],1)]}}])})],1),a("el-pagination",{staticClass:"mt-20",attrs:{background:"",layout:"total, prev, pager, next, jumper","current-page":e.pagination.currentPage,"page-size":e.pagination.pageSize,total:e.pagination.total,"hide-on-single-page":!0},on:{"current-change":e.getData,"update:currentPage":function(t){return e.$set(e.pagination,"currentPage",t)},"update:current-page":function(t){return e.$set(e.pagination,"currentPage",t)}}})],1)},ya=[],ka={create:function(e){return E.post(D.stack,e)},index:function(e){return E.get(D.stack,e)},show:function(e){return E.get(D.stackItem(e))},edit:function(e,t){return E.put(D.stackItem(e),t)},destory:function(e){return E.delete(D.stackItem(e))}},Ca=ka,wa={data:function(){return{loading:!0,stacks:[],pagination:{currentPage:1,pageSize:10,total:0}}},created:function(){this.getData()},methods:{getData:function(){var e=this,t={page_size:this.pagination.pageSize,current_page:this.pagination.currentPage};this.loading=!0,Ca.index(t).then((function(t){e.stacks=t.rows,e.pagination.currentPage=t.pagination.current_page,e.pagination.pageSize=t.pagination.page_size,e.pagination.total=t.pagination.total})).finally((function(){e.loading=!1}))},handleCommand:function(e){var t=e.split("-")[0],a=e.split("-")[1],n=e.split("-")[2];"edit"===t?this.$router.push({name:"StackEdit",params:{id:a}}):"delete"===t&&this.StackDestory(n)},StackDestory:function(e){var t=this,a=this.stacks[e].id,n=this.stacks[e].name;this.$confirm("确认删除企业「".concat(n,"」吗？")).then((function(){return Ca.destory(a)})).then((function(){t.$message.success("删除企业成功"),t.stacks.splice(e,1)})).catch((function(){}))}}},xa=wa,$a=(a("3885"),Object(s["a"])(xa,_a,ya,!1,null,null,null)),Sa=$a.exports,ja=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"page-content"},[a("div",{staticClass:"c-650"},[e._m(0),a("el-form",{attrs:{"label-position":"top","label-width":"80px",size:"mini"}},[a("el-row",{attrs:{gutter:20}},[a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:"技能全称:"}},[a("el-input",{model:{value:e.stack.name,callback:function(t){e.$set(e.stack,"name",t)},expression:"stack.name"}})],1)],1),a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:"技能标示:"}},[a("el-input",{model:{value:e.stack.slug,callback:function(t){e.$set(e.stack,"slug",t)},expression:"stack.slug"}})],1)],1)],1),a("el-form-item",{attrs:{label:"技能介绍："}},[a("el-input",{attrs:{type:"textarea"},model:{value:e.stack.description,callback:function(t){e.$set(e.stack,"description",t)},expression:"stack.description"}})],1),a("el-form-item",{attrs:{label:"技能封面："}},[a("el-upload",{ref:"upload",staticClass:"el-image-upload",attrs:{action:"",limit:1,"file-list":e.fileList,"before-upload":e.handleBeforeUpload,accept:"image/jpg, image/jpeg, image/png"}},[e.stack.image_url?e._e():a("i",{staticClass:"el-icon-plus el-uploader__icon"}),e.stack.image_url?a("img",{staticClass:"el-image-upload",attrs:{src:e.stack.image_url}}):e._e()])],1),a("el-form-item",[a("el-button",{attrs:{size:"medium",type:"primary",plain:""},on:{click:e.handleSubmit}},[e._v("创建")])],1)],1)],1)])},za=[function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"sub-header"},[a("div",{staticClass:"sub-header-title"},[e._v("基本信息")])])}],Ea={data:function(){return{fileList:[],stack:{name:"",slug:"",description:"",image_url:""}}},methods:{handleSubmit:function(){var e=this;this.loading=!0,Ca.create(this.stack).then((function(){e.$message.success("创建技能成功"),e.$router.push({name:"Stack"})})).finally((function(){e.loading=!1}))},handleBeforeUpload:function(e){var t=this;return Ue.start(e).then((function(e){t.stack.image_url=e.imageUrl})),Promise.reject({})}}},Pa=Ea,Ia=(a("0407"),Object(s["a"])(Pa,ja,za,!1,null,"5de3fb20",null)),Da=Ia.exports,Oa=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"page-content"},[a("div",{staticClass:"c-650"},[e._m(0),a("el-form",{attrs:{"label-position":"top","label-width":"80px",size:"mini"}},[a("el-row",{attrs:{gutter:20}},[a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:"技能全称:"}},[a("el-input",{model:{value:e.stack.name,callback:function(t){e.$set(e.stack,"name",t)},expression:"stack.name"}})],1)],1),a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:"技能标示:"}},[a("el-input",{model:{value:e.stack.slug,callback:function(t){e.$set(e.stack,"slug",t)},expression:"stack.slug"}})],1)],1)],1),a("el-form-item",{attrs:{label:"技能介绍："}},[a("el-input",{attrs:{type:"textarea"},model:{value:e.stack.description,callback:function(t){e.$set(e.stack,"description",t)},expression:"stack.description"}})],1),a("el-form-item",{attrs:{label:"技能封面："}},[a("el-upload",{ref:"upload",staticClass:"el-image-upload",attrs:{action:"",limit:1,"file-list":e.fileList,"before-upload":e.handleBeforeUpload,accept:"image/jpg, image/jpeg, image/png"}},[e.stack.image_url?e._e():a("i",{staticClass:"el-icon-plus el-uploader__icon"}),e.stack.image_url?a("img",{staticClass:"el-image-upload",attrs:{src:e.stack.image_url}}):e._e()])],1),a("el-form-item",[a("el-button",{attrs:{size:"medium",type:"primary",plain:""},on:{click:e.handleSubmit}},[e._v("保存")])],1)],1)],1)])},qa=[function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"sub-header"},[a("div",{staticClass:"sub-header-title"},[e._v("基本信息")])])}],Ma={data:function(){return{fileList:[],stack:{name:"",slug:"",description:"",image_url:""}}},created:function(){this.getData()},methods:{getData:function(){var e=this,t=this.$route.params.id;Ca.show(t).then((function(t){e.stack=t.stack}))},handleSubmit:function(){var e=this;this.loading=!0;var t=this.$route.params.id;Ca.edit(t,this.stack).then((function(){e.$message.success("编辑技能成功"),e.$router.push({name:"Stack"})})).finally((function(){e.loading=!1}))},handleBeforeUpload:function(e){var t=this;return Ue.start(e).then((function(e){t.stack.image_url=e.imageUrl})),Promise.reject({})}}},Ta=Ma,Ba=(a("14d6"),Object(s["a"])(Ta,Oa,qa,!1,null,"c35e2546",null)),Va=Ba.exports,Na=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],staticClass:"page-content"},[a("router-link",{attrs:{to:{name:"SkillQuestionCreate"}}},[a("el-button",{attrs:{size:"medium",type:"primary",plain:""}},[e._v("创建")])],1),a("el-table",{staticClass:"mt-20",attrs:{data:e.questions,size:"medium"}},[a("el-table-column",{attrs:{prop:"id",label:"id",width:"80px"}}),a("el-table-column",{attrs:{prop:"stem",label:"名称"}}),a("el-table-column",{attrs:{label:"技能"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",[e._v(e._s(t.row.stack?t.row.stack.name:"-"))])]}}])}),a("el-table-column",{attrs:{label:"操作",width:"180px",align:"right"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-dropdown",{attrs:{trigger:"hover"},on:{command:e.handleCommand}},[a("span",{staticClass:"icon-ctrl"},[a("i",{staticClass:"el-icon-more"})]),a("el-dropdown-menu",{attrs:{slot:"dropdown"},slot:"dropdown"},[a("el-dropdown-item",{attrs:{command:"edit-"+t.row.id+"-"+t.$index}},[e._v("编辑")]),a("el-dropdown-item",{attrs:{command:"delete-"+t.row.id+"-"+t.$index}},[e._v("删除")])],1)],1)]}}])})],1),a("el-pagination",{staticClass:"mt-20",attrs:{background:"",layout:"total, prev, pager, next, jumper","current-page":e.pagination.currentPage,"page-size":e.pagination.pageSize,total:e.pagination.total,"hide-on-single-page":!0},on:{"current-change":e.getData,"update:currentPage":function(t){return e.$set(e.pagination,"currentPage",t)},"update:current-page":function(t){return e.$set(e.pagination,"currentPage",t)}}})],1)},Aa=[],Ua={create:function(e){return E.post(D.skillQuestion,e)},index:function(e){return E.get(D.skillQuestion,e)},show:function(e){return E.get(D.skillQuestionItem(e))},edit:function(e,t){return E.put(D.skillQuestionItem(e),t)},destory:function(e){return E.delete(D.skillQuestionItem(e))}},Fa=Ua,Ra={data:function(){return{loading:!0,questions:[],pagination:{currentPage:1,pageSize:10,total:0}}},created:function(){this.getData()},methods:{getData:function(){var e=this,t={page_size:this.pagination.pageSize,current_page:this.pagination.currentPage};this.loading=!0,Fa.index(t).then((function(t){e.questions=t.rows,e.pagination.currentPage=t.pagination.current_page,e.pagination.pageSize=t.pagination.page_size,e.pagination.total=t.pagination.total})).finally((function(){e.loading=!1}))},handleCommand:function(e){var t=e.split("-")[0],a=e.split("-")[1],n=e.split("-")[2];"edit"===t?this.$router.push({name:"SkillQuestionEdit",params:{id:a}}):"delete"===t&&this.StackDestory(n)},StackDestory:function(e){var t=this,a=this.questions[e].id,n=this.questions[e].stem;this.$confirm("确认删除题目「".concat(n,"」吗？")).then((function(){return Fa.destory(a)})).then((function(){t.$message.success("删除题目成功"),t.questions.splice(e,1)})).catch((function(){}))}}},La=Ra,Qa=(a("0295"),Object(s["a"])(La,Na,Aa,!1,null,null,null)),Za=Qa.exports,Ja=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],staticClass:"page-content"},[a("div",{staticClass:"c-650"},[e._m(0),a("el-form",{attrs:{"label-position":"top","label-width":"80px",size:"mini"}},[a("el-form-item",{attrs:{label:"题目："}},[a("el-input",{attrs:{type:"textarea"},model:{value:e.question.stem,callback:function(t){e.$set(e.question,"stem",t)},expression:"question.stem"}})],1),a("el-row",{attrs:{gutter:20}},[a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:"技能："}},[a("el-select",{attrs:{placeholder:"请选择技能分类"},model:{value:e.question.stack_id,callback:function(t){e.$set(e.question,"stack_id",t)},expression:"question.stack_id"}},e._l(e.stacks,(function(e){return a("el-option",{key:e.id,attrs:{label:e.name,value:e.id}})})),1)],1)],1),a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:"等级："}},[a("el-select",{attrs:{placeholder:"请选择题目难度"},model:{value:e.question.level,callback:function(t){e.$set(e.question,"level",t)},expression:"question.level"}},e._l(e.levelOption,(function(e,t){return a("el-option",{key:t,attrs:{label:e,value:t}})})),1)],1)],1)],1),a("el-form-item",{attrs:{label:"选项："}},[a("el-row",{attrs:{gutter:20}},e._l(e.question.option,(function(t,n){return a("div",{key:n},[a("el-col",{staticStyle:{"margin-bottom":"8px"},attrs:{span:22}},[a("el-input",{attrs:{type:"textarea"},model:{value:e.question.option[n],callback:function(t){e.$set(e.question.option,n,t)},expression:"question.option[index]"}})],1),a("el-col",{attrs:{span:2}},[a("el-button",{attrs:{size:"mini",plain:"",type:"danger"},on:{click:function(t){return e.handleOptionDestory(n)}}},[e._v("x")])],1)],1)})),0),a("el-button",{directives:[{name:"show",rawName:"v-show",value:e.showAddButton,expression:"showAddButton"}],staticStyle:{"margin-top":"8px"},attrs:{size:"mini",plain:""},on:{click:e.handleOptionCreate}},[e._v("+")])],1),a("el-form-item",{attrs:{label:"答案："}},[a("el-radio-group",{model:{value:e.question.currect,callback:function(t){e.$set(e.question,"currect",t)},expression:"question.currect"}},e._l(e.question.option,(function(t,n){return a("el-radio",{key:n,attrs:{label:n}},[e._v(e._s(e.currectOption[n]))])})),1)],1),a("el-form-item",[a("el-button",{attrs:{size:"medium",type:"primary",plain:""},on:{click:e.handleSubmit}},[e._v("创建")])],1)],1)],1)])},Ga=[function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"sub-header"},[a("div",{staticClass:"sub-header-title"},[e._v("基本信息")])])}],Ha={data:function(){return{loading:!0,fileList:[],stacks:[],question:{stem:"",stack_id:null,level:null,option:["","","",""],current:""},currectOption:{0:"A",1:"B",2:"C",3:"D"},levelOption:{1:"入门",2:"初阶",3:"进阶",4:"高阶"}}},computed:{showAddButton:function(){return this.question.option.length<4}},created:function(){this.getData()},methods:{getData:function(){var e=this,t={page_size:50,current_page:1};this.loading=!0,Ca.index(t).then((function(t){e.stacks=t.rows})).finally((function(){e.loading=!1}))},handleOptionCreate:function(){this.question.option.push("")},handleOptionDestory:function(e){this.question.option.splice(e,1)},handleSubmit:function(){var e=this;this.loading=!0;var t=Object(h["a"])({},this.question);t.level=Number(this.question.level),t.option=JSON.stringify(this.question.option),Fa.create(t).then((function(){e.$message.success("创建技能成功"),e.$router.push({name:"SkillQuestion"})})).finally((function(){e.loading=!1}))}}},Ka=Ha,Wa=(a("193e"),Object(s["a"])(Ka,Ja,Ga,!1,null,"2a78f9ce",null)),Xa=Wa.exports,Ya=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],staticClass:"page-content"},[a("div",{staticClass:"c-650"},[e._m(0),a("el-form",{attrs:{"label-position":"top","label-width":"80px",size:"mini"}},[a("el-form-item",{attrs:{label:"题目："}},[a("el-input",{attrs:{type:"textarea"},model:{value:e.question.stem,callback:function(t){e.$set(e.question,"stem",t)},expression:"question.stem"}})],1),a("el-row",{attrs:{gutter:20}},[a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:"技能："}},[a("el-select",{attrs:{placeholder:"请选择技能分类"},model:{value:e.question.stack_id,callback:function(t){e.$set(e.question,"stack_id",t)},expression:"question.stack_id"}},e._l(e.stacks,(function(e){return a("el-option",{key:e.id,attrs:{label:e.name,value:e.id}})})),1)],1)],1),a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:"等级："}},[a("el-select",{attrs:{placeholder:"请选择题目难度"},model:{value:e.question.level,callback:function(t){e.$set(e.question,"level",t)},expression:"question.level"}},e._l(e.levelOption,(function(e,t){return a("el-option",{key:t,attrs:{label:e,value:t}})})),1)],1)],1)],1),a("el-form-item",{attrs:{label:"选项："}},[a("el-row",{attrs:{gutter:20}},e._l(e.question.option,(function(t,n){return a("div",{key:n},[a("el-col",{staticStyle:{"margin-bottom":"8px"},attrs:{span:22}},[a("el-input",{attrs:{type:"textarea"},model:{value:e.question.option[n],callback:function(t){e.$set(e.question.option,n,t)},expression:"question.option[index]"}})],1),a("el-col",{attrs:{span:2}},[a("el-button",{attrs:{size:"mini",plain:"",type:"danger"},on:{click:function(t){return e.handleOptionDestory(n)}}},[e._v("x")])],1)],1)})),0),a("el-button",{directives:[{name:"show",rawName:"v-show",value:e.showAddButton,expression:"showAddButton"}],staticStyle:{"margin-top":"8px"},attrs:{size:"mini",plain:""},on:{click:e.handleOptionCreate}},[e._v("+")])],1),a("el-form-item",{attrs:{label:"答案："}},[a("el-radio-group",{model:{value:e.question.currect,callback:function(t){e.$set(e.question,"currect",t)},expression:"question.currect"}},e._l(e.question.option,(function(t,n){return a("el-radio",{key:n,attrs:{label:n}},[e._v(e._s(e.currectOption[n]))])})),1)],1),a("el-form-item",[a("el-button",{attrs:{size:"medium",type:"primary",plain:""},on:{click:e.handleSubmit}},[e._v("保存")])],1)],1)],1)])},en=[function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"sub-header"},[a("div",{staticClass:"sub-header-title"},[e._v("基本信息")])])}],tn=a("3835"),an={data:function(){return{loading:!0,fileList:[],stacks:[],question:{stem:"",stack_id:null,level:null,option:[],current:""},currectOption:{0:"A",1:"B",2:"C",3:"D"},levelOption:{1:"入门",2:"初阶",3:"进阶",4:"高阶"}}},computed:{showAddButton:function(){return(this.question.option||[]).length<4}},created:function(){this.getData()},methods:{getData:function(){var e=this,t={page_size:50,current_page:1};this.loading=!0;var a=this.$route.params.id;Promise.all([Ca.index(t),Fa.show(a)]).then((function(t){var a=Object(tn["a"])(t,2),n=a[0],i=a[1];e.stacks=n.rows;var r=Object(h["a"])({},i.question);r.option=r.option?JSON.parse(r.option):[],e.question=r})).finally((function(){e.loading=!1}))},handleOptionCreate:function(){this.question.option.push("")},handleOptionDestory:function(e){this.question.option.splice(e,1)},handleSubmit:function(){var e=this;this.loading=!0;var t=Object(h["a"])({},this.question);t.level=Number(this.question.level),t.option=JSON.stringify(this.question.option);var a=this.$route.params.id;Fa.edit(a,t).then((function(){e.$message.success("保存成功"),e.$router.push({name:"SkillQuestion"})})).finally((function(){e.loading=!1}))}}},nn=an,rn=(a("29c3"),Object(s["a"])(nn,Ya,en,!1,null,"00b85982",null)),sn=rn.exports,on=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"page-content"},[a("router-link",{attrs:{to:{name:"SettingRoleCreate"}}},[a("el-button",{attrs:{size:"medium",type:"primary",plain:""}},[e._v("添加角色")])],1),a("el-table",{staticClass:"mt-20",attrs:{data:e.roles}},[a("el-table-column",{attrs:{prop:"id",label:"ID",width:"60"}}),a("el-table-column",{attrs:{prop:"name",label:"姓名",width:"120"}}),a("el-table-column",{attrs:{prop:"description",label:"描述"}}),a("el-table-column",{attrs:{label:"操作",align:"right"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-dropdown",{attrs:{trigger:"hover"},on:{command:e.handleCommand}},[a("span",{staticClass:"icon-ctrl"},[a("i",{staticClass:"el-icon-more"})]),a("el-dropdown-menu",{attrs:{slot:"dropdown"},slot:"dropdown"},[a("el-dropdown-item",{attrs:{command:"edit-"+t.row.id+"-"+t.$index}},[e._v("编辑")]),a("el-dropdown-item",{attrs:{command:"delete-"+t.row.id+"-"+t.$index}},[e._v("删除")])],1)],1)]}}])})],1)],1)},ln=[],cn={create:function(e){return E.post(D.role,e)},index:function(e){return E.get(D.role,e)},show:function(e){return E.get(D.roleItem(e))},update:function(e,t){return E.put(D.roleItem(e),t)},destory:function(e){return E.delete(D.roleItem(e))},permission:function(){return E.get(D.permission)}},un=cn,dn={data:function(){return{dialogFormVisible:!1,roles:[]}},created:function(){this.getData()},methods:{getData:function(){var e=this;un.index().then((function(t){e.roles=t}))},handleCommand:function(e){var t=e.split("-")[0],a=e.split("-")[1],n=e.split("-")[2];"edit"===t?this.$router.push({name:"SettingRoleEdit",params:{id:a}}):"delete"===t&&this.delRole(n,a)},delRole:function(e,t){var a=this;this.$confirm("确认删除吗？").then((function(){return a.loading=!0,un.destory(t)})).then((function(){a.roles.splice(e,1),a.$message.success("删除成功")})).catch((function(){})).finally((function(){a.loading=!1}))}}},mn=dn,pn=Object(s["a"])(mn,on,ln,!1,null,"5e314ffc",null),hn=pn.exports,fn=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"page-content"},[a("div",{staticClass:"c-650"},[e._m(0),a("el-form",{ref:"roleRoot",attrs:{"label-position":"left","label-width":"120px",model:e.role}},[a("el-form-item",{attrs:{label:"名称：",prop:"name",rules:e.rules.name}},[a("el-input",{directives:[{name:"show",rawName:"v-show",value:e.editShow,expression:"editShow"}],model:{value:e.role.name,callback:function(t){e.$set(e.role,"name",t)},expression:"role.name"}}),a("span",{directives:[{name:"show",rawName:"v-show",value:!e.editShow,expression:"!editShow"}]},[e._v(e._s(e.role.name))])],1),a("el-form-item",{attrs:{label:"描述：",prop:"description",rules:e.rules.description}},[a("el-input",{directives:[{name:"show",rawName:"v-show",value:e.editShow,expression:"editShow"}],attrs:{type:"textarea",rows:"3",resize:"none",placeholder:"请输入描述"},model:{value:e.role.description,callback:function(t){e.$set(e.role,"description",t)},expression:"role.description"}}),a("span",{directives:[{name:"show",rawName:"v-show",value:!e.editShow,expression:"!editShow"}]},[e._v(e._s(e.role.description?e.role.description:"暂无描述"))])],1),a("div",{staticClass:"sub-header"},[a("div",{staticClass:"sub-header-title"},[e._v("权限信息")])]),e._l(e.permissions,(function(t){return[a("el-form-item",{key:t.slug,attrs:{label:t.name}},[a("el-checkbox-group",{model:{value:e.role.permissions,callback:function(t){e.$set(e.role,"permissions",t)},expression:"role.permissions"}},[e._l(t.permissions,(function(n){return[a("el-checkbox",{key:n.slug,attrs:{label:n.slug,name:t.name,disabled:!e.editShow}},[e._v(" "+e._s(n.name)+" ")])]}))],2)],1)]})),a("el-form-item",[a("el-button",{directives:[{name:"show",rawName:"v-show",value:!e.editShow,expression:"!editShow"}],attrs:{type:"primary",plain:""},on:{click:function(t){e.editShow=!0}}},[e._v("编辑")]),a("el-button",{directives:[{name:"show",rawName:"v-show",value:e.editShow,expression:"editShow"}],attrs:{type:"primary"},on:{click:e.editData}},[e._v("保存")])],1)],2)],1)])},gn=[function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"sub-header"},[a("div",{staticClass:"sub-header-title"},[e._v("基本信息")])])}],vn={index:function(){return E.get(D.permission)}},bn=vn,_n={data:function(){return{editShow:!1,permissions:[],role:{id:1,name:"",description:"",permissions:[]},rules:{name:{required:!0,message:"请输入角色名称",trigger:"blur"},description:{required:!0,message:"请输入角色描述",trigger:"blur"}}}},created:function(){this.getData()},methods:{getData:function(){var e=this,t=this.$route.params.id;Promise.all([un.show(t),bn.index()]).then((function(t){var a=Object(tn["a"])(t,2),n=a[0],i=a[1];e.role=n,e.permissions=i}))},editData:function(){var e=this,t=this.$route.params.id;this.$refs["roleRoot"].validate((function(a){a&&(e.loading=!0,un.update(t,e.role).then((function(){e.$router.push({name:"SettingRoles"}),e.$message.success("编辑成功")})).finally((function(){return e.loading=!1})))}))}}},yn=_n,kn=Object(s["a"])(yn,fn,gn,!1,null,"287068c8",null),Cn=kn.exports,wn=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"page-content"},[a("div",{staticClass:"c-650"},[e._m(0),a("el-form",{ref:"roleRoot",attrs:{"label-position":"left","label-width":"120px",model:e.role}},[a("el-form-item",{attrs:{label:"名称：",prop:"name",rules:e.rules.name}},[a("el-input",{model:{value:e.role.name,callback:function(t){e.$set(e.role,"name",t)},expression:"role.name"}})],1),a("el-form-item",{attrs:{label:"描述：",prop:"description",rules:e.rules.description}},[a("el-input",{attrs:{type:"textarea",rows:"3",resize:"none",placeholder:"请输入描述"},model:{value:e.role.description,callback:function(t){e.$set(e.role,"description",t)},expression:"role.description"}})],1),a("div",{staticClass:"sub-header"},[a("div",{staticClass:"sub-header-title"},[e._v("权限信息")])]),e._l(e.permissions,(function(t){return[a("el-form-item",{key:t.slug,attrs:{label:t.name}},[a("el-checkbox-group",{model:{value:e.role.permissions,callback:function(t){e.$set(e.role,"permissions",t)},expression:"role.permissions"}},[e._l(t.permissions,(function(n){return[a("el-checkbox",{key:n.slug,attrs:{label:n.slug,name:t.name}},[e._v(" "+e._s(n.name)+" ")])]}))],2)],1)]})),a("el-form-item",[a("el-button",{attrs:{type:"primary"},on:{click:e.handleRoleCreate}},[e._v("创建")])],1)],2)],1)])},xn=[function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"sub-header"},[a("div",{staticClass:"sub-header-title"},[e._v("基本信息")])])}],$n={data:function(){return{permissions:[],role:{id:1,name:"",description:"",permissions:[]},rules:{name:{required:!0,message:"请输入角色名称",trigger:"blur"},description:{required:!0,message:"请输入角色描述",trigger:"blur"}}}},created:function(){this.getData()},methods:{getData:function(){var e=this;Promise.all([bn.index()]).then((function(t){var a=Object(tn["a"])(t,1),n=a[0];e.permissions=n}))},handleRoleCreate:function(){var e=this;this.$refs["roleRoot"].validate((function(t){t&&(e.loading=!0,un.create(e.role).then((function(){e.$router.push({name:"SettingRoles"}),e.$message.success("创建成功")})).finally((function(){return e.loading=!1})))}))}}},Sn=$n,jn=Object(s["a"])(Sn,wn,xn,!1,null,"3223a16e",null),zn=jn.exports,En=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"page-content"},[a("router-link",{attrs:{to:{name:"SettingManagerCreate"}}},[a("el-button",{attrs:{size:"medium",type:"primary",plain:""},on:{click:function(t){e.dialogFormVisible=!0}}},[e._v("创建管理员")])],1),a("el-table",{staticClass:"mt-20",attrs:{data:e.managers}},[a("el-table-column",{attrs:{prop:"id",label:"ID"}}),a("el-table-column",{attrs:{prop:"name",label:"姓名"}}),a("el-table-column",{attrs:{prop:"phone",label:"手机号码"}}),a("el-table-column",{attrs:{label:"角色"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v(" "+e._s(t.row.role?t.row.role.name:"-")+" ")]}}])}),a("el-table-column",{attrs:{label:"操作",width:"180px",align:"right"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-dropdown",{attrs:{trigger:"hover"},on:{command:e.handleCommand}},[a("span",{staticClass:"icon-ctrl"},[a("i",{staticClass:"el-icon-more"})]),a("el-dropdown-menu",{attrs:{slot:"dropdown"},slot:"dropdown"},[a("el-dropdown-item",{attrs:{command:"edit-"+t.row.id+"-"+t.$index}},[e._v("编辑")]),a("el-dropdown-item",{attrs:{command:"delete-"+t.row.id+"-"+t.$index}},[e._v("删除")])],1)],1)]}}])})],1),a("el-pagination",{staticClass:"mt-20",attrs:{background:"",layout:"total, prev, pager, next, jumper","current-page":e.pagination.currentPage,"page-size":e.pagination.pageSize,total:e.pagination.total,"hide-on-single-page":!0},on:{"current-change":e.getData,"update:currentPage":function(t){return e.$set(e.pagination,"currentPage",t)},"update:current-page":function(t){return e.$set(e.pagination,"currentPage",t)}}})],1)},Pn=[],In={create:function(e){return E.post(D.manager,e)},index:function(e){return E.get(D.manager,e)},show:function(e){return E.get(D.managerItem(e))},update:function(e,t){return E.put(D.managerItem(e),t)},destory:function(e){return E.delete(D.managerItem(e))}},Dn=In,On={data:function(){return{managers:[],pagination:{currentPage:1,pageSize:10,total:0}}},created:function(){this.getData()},methods:{getData:function(){var e=this,t={page_size:this.pagination.pageSize,current_page:this.pagination.currentPage};this.loading=!0,Dn.index(t).then((function(t){e.managers=t.rows,e.pagination.currentPage=t.pagination.current_page,e.pagination.pageSize=t.pagination.page_size,e.pagination.total=t.pagination.total})).finally((function(){e.loading=!1}))},handleCommand:function(e){var t=e.split("-")[0],a=e.split("-")[1],n=e.split("-")[2];"edit"===t?this.$router.push({name:"SettingManagerEdit",params:{id:a}}):"delete"===t&&this.delManager(n,a)},delManager:function(e,t){var a=this;this.$confirm("确认删除吗？").then((function(){return a.loading=!0,Dn.destory(t)})).then((function(){a.managers.splice(e,1),a.$message.success("删除成功")})).catch((function(){})).finally((function(){a.loading=!1}))}}},qn=On,Mn=Object(s["a"])(qn,En,Pn,!1,null,"9c95c708",null),Tn=Mn.exports,Bn=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],staticClass:"page-content"},[a("div",{staticClass:"c-650"},[e._m(0),a("el-form",{ref:"manager",attrs:{"label-position":"left","label-width":"80px",model:e.manager}},[a("el-form-item",{attrs:{label:"名称",prop:"name",rules:e.rules.name}},[a("el-input",{model:{value:e.manager.name,callback:function(t){e.$set(e.manager,"name",t)},expression:"manager.name"}})],1),a("el-form-item",{attrs:{label:"手机号码",prop:"phone",rules:e.rules.phone}},[a("el-input",{model:{value:e.manager.phone,callback:function(t){e.$set(e.manager,"phone",e._n(t))},expression:"manager.phone"}})],1),a("el-form-item",{attrs:{label:"角色",prop:"role_id",rules:e.rules.role}},[a("el-select",{attrs:{placeholder:"请选择"},model:{value:e.manager.role_id,callback:function(t){e.$set(e.manager,"role_id",t)},expression:"manager.role_id"}},e._l(e.roles,(function(e){return a("el-option",{key:e.id,attrs:{label:e.name,value:e.id}})})),1)],1),a("el-form-item",[a("el-button",{attrs:{type:"primary"},on:{click:e.handleManagerCreate}},[e._v("创建")])],1)],1)],1)])},Vn=[function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"sub-header"},[a("div",{staticClass:"sub-header-title"},[e._v("基本信息")])])}],Nn={data:function(){return{loading:!0,roles:[],manager:{name:"",phone:"",role_id:""},rules:{name:{required:!0,message:"请输入姓名",trigger:"blur"},role:{required:!0,message:"请选择角色",trigger:"change"},phone:[{required:!0,message:"请输入手机号码",trigger:"change"},{pattern:/^1[3456789]\d{9}$/,message:"目前只支持中国大陆的手机号码",trigger:"blur"}]}}},created:function(){var e=this;Promise.all([un.index()]).then((function(t){var a=Object(tn["a"])(t,1),n=a[0];e.roles=n})).finally((function(){return e.loading=!1}))},methods:{handleManagerCreate:function(){var e=this;this.$refs["manager"].validate((function(t){t&&(e.loading=!0,e.manager.phone=String(e.manager.phone),Dn.create(e.manager).then((function(){e.$router.push({name:"SettingManager"}),e.$message.success("创建成功")})).finally((function(){return e.loading=!1})))}))}}},An=Nn,Un=Object(s["a"])(An,Bn,Vn,!1,null,"2ea89cac",null),Fn=Un.exports,Rn=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],staticClass:"page-content"},[a("div",{staticClass:"c-650"},[e._m(0),a("el-form",{ref:"manager",attrs:{"label-position":"left","label-width":"80px",model:e.manager}},[a("el-form-item",{attrs:{label:"名称",prop:"name",rules:{required:!0,message:"请输入姓名",trigger:"blur"}}},[a("el-input",{model:{value:e.manager.name,callback:function(t){e.$set(e.manager,"name",t)},expression:"manager.name"}})],1),a("el-form-item",{attrs:{label:"手机号码",prop:"phone",rules:[{required:!0,message:"请输入手机号码",trigger:"change"},{pattern:/^1[3456789]\d{9}$/,message:"目前只支持中国大陆的手机号码",trigger:"blur"}]}},[a("el-input",{model:{value:e.manager.phone,callback:function(t){e.$set(e.manager,"phone",e._n(t))},expression:"manager.phone"}})],1),a("el-form-item",{attrs:{label:"角色",prop:"role_id",rules:{required:!0,message:"请选择角色",trigger:"change"}}},[a("el-select",{attrs:{placeholder:"请选择"},model:{value:e.manager.role_id,callback:function(t){e.$set(e.manager,"role_id",t)},expression:"manager.role_id"}},e._l(e.roles,(function(e){return a("el-option",{key:e.id,attrs:{label:e.name,value:e.id}})})),1)],1),a("el-form-item",[a("el-button",{attrs:{type:"primary"},on:{click:function(t){return e.editManager()}}},[e._v("编辑")])],1)],1)],1)])},Ln=[function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"sub-header"},[a("div",{staticClass:"sub-header-title"},[e._v("基本信息")])])}],Qn={data:function(){return{loading:!0,roles:[],manager:{name:"",phone:"",password:""}}},created:function(){var e=this,t=this.$route.params.id;Promise.all([Dn.show(t),un.index()]).then((function(t){var a=Object(tn["a"])(t,2),n=a[0],i=a[1];e.manager=n,e.roles=i})).finally((function(){return e.loading=!1}))},methods:{editManager:function(){var e=this,t=this.$route.params.id;this.$refs["manager"].validate((function(a){a&&(e.loading=!0,Dn.update(t,e.manager).then((function(){e.$router.push({name:"SettingManager"}),e.$message.success("编辑成功")})).finally((function(){return e.loading=!1})))}))}}},Zn=Qn,Jn=Object(s["a"])(Zn,Rn,Ln,!1,null,"1fc0259c",null),Gn=Jn.exports,Hn=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],staticClass:"page-content"},[a("router-link",{attrs:{to:{name:"AdvertiseCreate"}}},[a("el-button",{attrs:{size:"medium",type:"primary",plain:""}},[e._v("创建广告")])],1),a("el-table",{staticClass:"mt-20",attrs:{data:e.advertises,size:"medium"}},[a("el-table-column",{attrs:{prop:"id",label:"id",width:"80px"}}),a("el-table-column",{attrs:{prop:"name",label:"名称"}}),a("el-table-column",{attrs:{prop:"slug",label:"slug"}}),a("el-table-column",{attrs:{prop:"width",label:"尺寸：宽"}}),a("el-table-column",{attrs:{prop:"height",label:"尺寸：高"}}),a("el-table-column",{attrs:{label:"操作",width:"180px",align:"right"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-dropdown",{attrs:{trigger:"hover"},on:{command:e.handleCommand}},[a("span",{staticClass:"icon-ctrl"},[a("i",{staticClass:"el-icon-more"})]),a("el-dropdown-menu",{attrs:{slot:"dropdown"},slot:"dropdown"},[a("el-dropdown-item",{attrs:{command:"edit-"+t.row.id+"-"+t.$index}},[e._v("编辑")]),a("el-dropdown-item",{attrs:{command:"delete-"+t.row.id+"-"+t.$index}},[e._v("删除")])],1)],1)]}}])})],1),a("el-pagination",{staticClass:"mt-20",attrs:{background:"",layout:"total, prev, pager, next, jumper","current-page":e.pagination.currentPage,"page-size":e.pagination.pageSize,total:e.pagination.total,"hide-on-single-page":!0},on:{"current-change":e.getData,"update:currentPage":function(t){return e.$set(e.pagination,"currentPage",t)},"update:current-page":function(t){return e.$set(e.pagination,"currentPage",t)}}})],1)},Kn=[],Wn={create:function(e){return E.post(D.advertise,e)},index:function(e){return E.get(D.advertise,e)},show:function(e){return E.get(D.advertiseItem(e))},edit:function(e,t){return E.put(D.advertiseItem(e),t)},destory:function(e){return E.delete(D.advertiseItem(e))},createMaterial:function(e){return E.post(D.advertiseMaterial,e)},destoryMaterial:function(e){return E.delete(D.advertiseMaterialItem(e))},sortMaterial:function(e){return E.post(D.advertiseMaterialSort,e)}},Xn=Wn,Yn={data:function(){return{loading:!0,advertises:[],pagination:{currentPage:1,pageSize:10,total:0}}},created:function(){this.getData()},methods:{getData:function(){var e=this,t={page_size:this.pagination.pageSize,current_page:this.pagination.currentPage};this.loading=!0,Xn.index(t).then((function(t){e.advertises=t.rows,e.pagination.currentPage=t.pagination.current_page,e.pagination.pageSize=t.pagination.page_size,e.pagination.total=t.pagination.total})).finally((function(){e.loading=!1}))},handleCommand:function(e){var t=e.split("-")[0],a=e.split("-")[1],n=e.split("-")[2];"edit"===t?this.$router.push({name:"AdvertiseEdit",params:{id:a}}):"delete"===t&&this.delAdvertises(n)},delAdvertises:function(e){var t=this,a=this.advertises[e].id;this.$confirm("确认删除吗？").then((function(){return Xn.destory(a)})).then((function(){t.$message.success("删除广告成功"),t.advertises.splice(e,1)})).catch((function(){}))}}},ei=Yn,ti=(a("fcc5"),Object(s["a"])(ei,Hn,Kn,!1,null,null,null)),ai=ti.exports,ni=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"page-content"},[a("div",{staticClass:"c-650"},[e._m(0),a("el-form",{attrs:{"label-position":"top","label-width":"80px",size:"mini"}},[a("el-form-item",{attrs:{label:"广告名称"}},[a("el-input",{model:{value:e.advertise.name,callback:function(t){e.$set(e.advertise,"name",t)},expression:"advertise.name"}})],1),a("el-form-item",{attrs:{label:"slug"}},[a("el-input",{model:{value:e.advertise.slug,callback:function(t){e.$set(e.advertise,"slug",t)},expression:"advertise.slug"}})],1),a("el-row",{attrs:{gutter:20}},[a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:"尺寸：宽"}},[a("el-input",{model:{value:e.advertise.width,callback:function(t){e.$set(e.advertise,"width",e._n(t))},expression:"advertise.width"}})],1)],1),a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:"尺寸：高"}},[a("el-input",{model:{value:e.advertise.height,callback:function(t){e.$set(e.advertise,"height",e._n(t))},expression:"advertise.height"}})],1)],1)],1),a("el-button",{attrs:{size:"medium",type:"primary",plain:""},on:{click:e.handleSubmit}},[e._v("创建广告")])],1)],1)])},ii=[function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"sub-header"},[a("div",{staticClass:"sub-header-title"},[e._v("基本信息")])])}],ri={data:function(){return{fileList:[],advertise:{name:"",slug:"",width:null,height:null}}},methods:{handleSubmit:function(){var e=this;this.loading=!0,Xn.create(this.advertise).then((function(t){e.$message.success("创建广告成功"),e.$router.push({name:"Advertise",params:{id:t.id}})})).finally((function(){e.loading=!1}))}}},si=ri,oi=(a("f30b"),Object(s["a"])(si,ni,ii,!1,null,"d2f8a75a",null)),li=oi.exports,ci=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],staticClass:"page-content"},[a("el-row",{attrs:{gutter:60}},[a("el-col",{attrs:{lg:12}},[a("div",{staticClass:"sub-header"},[a("div",{staticClass:"sub-header-title"},[e._v("基本信息")]),a("div",{staticClass:"sub-header-fd"},[a("el-button",{attrs:{size:"medium",type:e.isEdit?"primary":""},on:{click:e.handleEdit}},[e._v(" "+e._s(e.isEdit?"保存":"修改")+" ")])],1)]),a("el-form",{attrs:{"label-position":"top",size:"mini",model:e.advertise}},[a("el-form-item",{attrs:{label:"广告名称："}},[a("el-input",{attrs:{disabled:!e.isEdit},model:{value:e.advertise.name,callback:function(t){e.$set(e.advertise,"name",t)},expression:"advertise.name"}})],1),a("el-form-item",{attrs:{label:"slug："}},[a("el-input",{attrs:{disabled:!e.isEdit},model:{value:e.advertise.slug,callback:function(t){e.$set(e.advertise,"slug",t)},expression:"advertise.slug"}})],1),a("el-row",{attrs:{gutter:20}},[a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:"尺寸：宽"}},[a("el-input",{attrs:{disabled:!e.isEdit},model:{value:e.advertise.width,callback:function(t){e.$set(e.advertise,"width",e._n(t))},expression:"advertise.width"}})],1)],1),a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:"尺寸：高"}},[a("el-input",{attrs:{disabled:!e.isEdit},model:{value:e.advertise.height,callback:function(t){e.$set(e.advertise,"height",e._n(t))},expression:"advertise.height"}})],1)],1)],1)],1)],1),a("el-col",{attrs:{lg:12}},[a("div",{staticClass:"sub-header"},[a("div",{staticClass:"sub-header-title"},[e._v("广告-物料")])]),a("div",{staticClass:"material-container"},[a("draggable",{attrs:{group:"advertise_materials",handle:".material-item-draggable"},on:{change:e.handleVersionSort},model:{value:e.advertise_materials,callback:function(t){e.advertise_materials=t},expression:"advertise_materials"}},e._l(e.advertise_materials,(function(t,n){return a("div",{key:t.id,staticClass:"material-item",on:{click:function(a){return e.handleVersionCheckout(t.id,n)}}},[a("div",{staticClass:"material-item-title"},[a("i",{staticClass:"el-icon-rank material-item-draggable"}),a("span",[e._v(e._s(t.materialInfo.id)+" - "+e._s(t.materialInfo.name))]),a("div",{staticClass:"material-item-ctrl"},[a("el-dropdown",{attrs:{trigger:"hover"},on:{command:e.handleMaterialCommand}},[a("span",{staticClass:"icon-ctrl"},[a("i",{staticClass:"el-icon-more"})]),a("el-dropdown-menu",{attrs:{slot:"dropdown"},slot:"dropdown"},[a("el-dropdown-item",{attrs:{command:t.id+"-"+n}},[e._v("删除")])],1)],1)],1)])])})),0),a("div",{staticClass:"material-item-create",on:{click:e.handleMaterialCreate}},[e._v(" 添加物料 "),a("i",{staticClass:"el-icon-circle-plus"})])],1)])],1)],1)},ui=[],di={components:{draggable:Ke.a},data:function(){return{loading:!0,isEdit:!1,drawerVisible:!1,fileList:[],advertise:{id:null,name:"",slug:"",width:null,height:null},advertise_materials:[]}},created:function(){this.getData()},methods:{getData:function(){var e=this,t=this.$route.params.id;Xn.show(t).then((function(t){e.advertise=t.advertise,e.advertise_materials=t.advertise_materials})).finally((function(){e.loading=!1}))},handleEdit:function(){var e=this,t=this.$route.params.id;this.isEdit=!this.isEdit,this.isEdit||(this.loading=!0,Xn.edit(t,Object(h["a"])({},this.advertise)).then((function(){e.$message.success("编辑成功")})).finally((function(){e.loading=!1})))},handleMaterialCreate:function(){var e=this,t=Number(this.$route.params.id),a=this.advertise_materials.length+1;this.$prompt("请输入物料ID","添加关联物料",{confirmButtonText:"确定",cancelButtonText:"取消",inputPattern:/\S/,inputErrorMessage:"输入不能为空"}).then((function(n){var i=n.value;e.loading=!0,Xn.createMaterial({sort:a,advertise_id:t,material_id:Number(i)}).then((function(){e.$message.success("添加关联物料成功"),e.getData()})).finally((function(){e.loading=!1}))}))},handleVersionCheckout:function(){},handleMaterialCommand:function(e){var t=this;this.loading=!0;var a=e.split("-"),n=a[0],i=a[1];Xn.destoryMaterial(n).then((function(){t.$message.success("删除关联物料成功"),t.advertise_materials.splice(i,1)})).finally((function(){t.loading=!1}))},handleVersionSort:function(){var e=this,t=this.advertise_materials.map((function(e){return e.id}));Xn.sortMaterial({advertise_materials:t}).then((function(){e.$message.success("物料排序成功")}))}}},mi=di,pi=(a("8c34"),Object(s["a"])(mi,ci,ui,!1,null,"46b1be9f",null)),hi=pi.exports,fi=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],staticClass:"page-content"},[a("router-link",{attrs:{to:{name:"MaterialCreate"}}},[a("el-button",{attrs:{size:"medium",type:"primary",plain:""}},[e._v("创建物料")])],1),a("el-table",{staticClass:"mt-20",attrs:{data:e.materials,size:"medium"}},[a("el-table-column",{attrs:{prop:"id",label:"id",width:"80px"}}),a("el-table-column",{attrs:{prop:"name",label:"名称",width:"200px"}}),a("el-table-column",{attrs:{prop:"upload_file",label:"内容"},scopedSlots:e._u([{key:"default",fn:function(t){return[t.row.upload_file?a("img",{staticClass:"material-content",attrs:{src:t.row.upload_file,alt:""}}):e._e(),t.row.upload_file?a("div",[a("a",{attrs:{href:t.row.upload_file,target:"_blank"}},[e._v(" "+e._s(t.row.upload_file)+" ")])]):e._e()]}}])}),a("el-table-column",{attrs:{prop:"jump_url",label:"跳转链接",width:"200px"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("div",[a("a",{attrs:{href:t.row.jump_url,target:"_blank"}},[e._v(" "+e._s(t.row.jump_url)+" ")])])]}}])}),a("el-table-column",{attrs:{width:"100",label:"打开窗口",prop:"target"},scopedSlots:e._u([{key:"default",fn:function(t){return["_self"==t.row.target?a("span",[e._v(" 原窗口 ")]):e._e(),"_blank"==t.row.target?a("span",[e._v(" 新窗口 ")]):e._e()]}}])}),a("el-table-column",{attrs:{label:"操作",width:"80px",align:"right"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-dropdown",{attrs:{trigger:"hover"},on:{command:e.handleCommand}},[a("span",{staticClass:"icon-ctrl"},[a("i",{staticClass:"el-icon-more"})]),a("el-dropdown-menu",{attrs:{slot:"dropdown"},slot:"dropdown"},[a("el-dropdown-item",{attrs:{command:"edit-"+t.row.id+"-"+t.$index}},[e._v("编辑")]),a("el-dropdown-item",{attrs:{command:"delete-"+t.row.id+"-"+t.$index}},[e._v("删除")])],1)],1)]}}])})],1),a("el-pagination",{staticClass:"mt-20",attrs:{background:"",layout:"total, prev, pager, next, jumper","current-page":e.pagination.currentPage,"page-size":e.pagination.pageSize,total:e.pagination.total,"hide-on-single-page":!0},on:{"current-change":e.getData,"update:currentPage":function(t){return e.$set(e.pagination,"currentPage",t)},"update:current-page":function(t){return e.$set(e.pagination,"currentPage",t)}}})],1)},gi=[],vi={create:function(e){return E.post(D.material,e)},index:function(e){return E.get(D.material,e)},show:function(e){return E.get(D.materialItem(e))},edit:function(e,t){return E.put(D.materialItem(e),t)},destory:function(e){return E.delete(D.materialItem(e))}},bi=vi,_i={data:function(){return{loading:!0,materials:[],pagination:{currentPage:1,pageSize:10,total:0}}},created:function(){this.getData()},methods:{getData:function(){var e=this,t={page_size:this.pagination.pageSize,current_page:this.pagination.currentPage};this.loading=!0,bi.index(t).then((function(t){e.materials=t.rows,e.pagination.currentPage=t.pagination.current_page,e.pagination.pageSize=t.pagination.page_size,e.pagination.total=t.pagination.total})).finally((function(){e.loading=!1}))},handleCommand:function(e){var t=e.split("-")[0],a=e.split("-")[1],n=e.split("-")[2];"edit"===t?this.$router.push({name:"MaterialEdit",params:{id:a}}):"delete"===t&&this.delMaterials(n)},delMaterials:function(e){var t=this,a=this.materials[e].id;this.$confirm("确认删除吗？").then((function(){return bi.destory(a)})).then((function(){t.$message.success("删除物料成功"),t.materials.splice(e,1)})).catch((function(){}))}}},yi=_i,ki=(a("aa1b"),Object(s["a"])(yi,fi,gi,!1,null,"1446456e",null)),Ci=ki.exports,wi=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"page-content"},[a("div",{staticClass:"c-650"},[e._m(0),a("el-form",{attrs:{"label-position":"top","label-width":"80px",size:"mini"}},[a("el-form-item",{attrs:{label:"物料名称"}},[a("el-input",{attrs:{clearable:""},model:{value:e.material.name,callback:function(t){e.$set(e.material,"name",t)},expression:"material.name"}})],1),a("el-form-item",{attrs:{label:"跳转链接"}},[a("el-input",{attrs:{clearable:""},model:{value:e.material.jump_url,callback:function(t){e.$set(e.material,"jump_url",t)},expression:"material.jump_url"}})],1),a("el-form-item",{attrs:{label:"打开窗口",prop:"target"}},[a("el-select",{attrs:{placeholder:"请选择打开窗口",clearable:""},model:{value:e.material.target,callback:function(t){e.$set(e.material,"target",t)},expression:"material.target"}},[a("el-option",{attrs:{label:"原窗口",value:"_self"}}),a("el-option",{attrs:{label:"新窗口",value:"_blank"}})],1)],1),a("el-form-item",{attrs:{label:"物料图片："}},[a("el-upload",{ref:"upload",staticClass:"material-image-upload",attrs:{action:"",limit:1,"file-list":e.fileList,"before-upload":e.handleBeforeUpload,accept:"image/jpg, image/jpeg, image/png"}},[e.material.upload_file?e._e():a("i",{staticClass:"el-icon-plus el-uploader__icon"}),e.material.upload_file?a("img",{staticClass:"material-image-upload",attrs:{src:e.material.upload_file}}):e._e()])],1),a("el-button",{attrs:{size:"medium",type:"primary",plain:""},on:{click:e.handleSubmit}},[e._v("创建物料")])],1)],1)])},xi=[function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"sub-header"},[a("div",{staticClass:"sub-header-title"},[e._v("基本信息")])])}],$i={data:function(){return{fileList:[],material:{name:"",jump_url:"",target:"",upload_file:""}}},methods:{handleSubmit:function(){var e=this;this.loading=!0,bi.create(this.material).then((function(t){e.$message.success("创建物料成功"),e.$router.push({name:"Material",params:{id:t.id}})})).finally((function(){e.loading=!1}))},handleBeforeUpload:function(e){var t=this;return Ue.start(e).then((function(e){t.material.upload_file=e.imageUrl})),Promise.reject({})}}},Si=$i,ji=(a("d3e5"),Object(s["a"])(Si,wi,xi,!1,null,"d5031a8c",null)),zi=ji.exports,Ei=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],staticClass:"page-content"},[a("div",{staticClass:"c-650"},[a("div",{staticClass:"sub-header"},[a("div",{staticClass:"sub-header-title"},[e._v("基本信息")]),a("div",{staticClass:"sub-header-fd"},[a("el-button",{attrs:{size:"medium",type:e.isEdit?"primary":""},on:{click:e.handleEdit}},[e._v(" "+e._s(e.isEdit?"保存":"修改")+" ")])],1)]),a("el-form",{attrs:{"label-position":"top","label-width":"80px",size:"mini"}},[a("el-form-item",{attrs:{label:"物料名称"}},[a("el-input",{attrs:{disabled:!e.isEdit,clearable:""},model:{value:e.material.name,callback:function(t){e.$set(e.material,"name",t)},expression:"material.name"}})],1),a("el-form-item",{attrs:{label:"跳转链接"}},[a("el-input",{attrs:{disabled:!e.isEdit,clearable:""},model:{value:e.material.jump_url,callback:function(t){e.$set(e.material,"jump_url",t)},expression:"material.jump_url"}})],1),a("el-form-item",{attrs:{label:"打开窗口",prop:"target"}},[a("el-select",{attrs:{disabled:!e.isEdit,placeholder:"请选择打开窗口",clearable:""},model:{value:e.material.target,callback:function(t){e.$set(e.material,"target",t)},expression:"material.target"}},[a("el-option",{attrs:{label:"原窗口",value:"_self"}}),a("el-option",{attrs:{label:"新窗口",value:"_blank"}})],1)],1),a("el-form-item",{attrs:{label:"物料图片："}},[a("el-upload",{ref:"upload",staticClass:"material-image-upload",attrs:{action:"",limit:1,"file-list":e.fileList,"before-upload":e.handleBeforeUpload,accept:"image/jpg, image/jpeg, image/png",disabled:!e.isEdit}},[e.material.upload_file?e._e():a("i",{staticClass:"el-icon-plus el-uploader__icon"}),e.material.upload_file?a("img",{staticClass:"material-image-upload",attrs:{src:e.material.upload_file}}):e._e()])],1)],1)],1)])},Pi=[],Ii={data:function(){return{loading:!0,isEdit:!1,drawerVisible:!1,fileList:[],material:{id:null,name:"",jump_url:"",target:"",upload_file:""}}},created:function(){this.getData()},methods:{getData:function(){var e=this,t=this.$route.params.id;bi.show(t).then((function(t){e.material=t.material})).finally((function(){e.loading=!1}))},handleEdit:function(){var e=this,t=this.$route.params.id;this.isEdit=!this.isEdit,this.isEdit||(this.loading=!0,bi.edit(t,Object(h["a"])({},this.material)).then((function(){e.$message.success("编辑成功")})).finally((function(){e.loading=!1})))},handleBeforeUpload:function(e){var t=this;return Ue.start(e).then((function(e){t.material.upload_file=e.imageUrl})),Promise.reject({})}}},Di=Ii,Oi=(a("874b"),Object(s["a"])(Di,Ei,Pi,!1,null,"19d36bb0",null)),qi=Oi.exports,Mi=[{path:"/login",name:"AccountLogin",component:V},{path:"/",name:"Root",component:ke,redirect:{name:"Dashboard"},children:[{path:"/dashboard",name:"Dashboard",component:Me,meta:{nav:{icon:"el-icon-pie-chart",title:"概况"},breadcrumb:{title:"概况"}}},{path:"course/manager",name:"CourseManager",component:{render:function(e){return e("router-view")}},meta:{nav:{icon:"el-icon-collection",title:"职业课程"}},children:[{path:"/course",name:"CoursesRoot",permission:"course.index",component:{render:function(e){return e("router-view")}},redirect:{name:"Course"},meta:{nav:{icon:"el-icon-collection",title:"课程管理"},breadcrumb:{title:"课程",replace:!0}},children:[{path:"/course",name:"Course",component:Ee},{path:"/course/create",name:"CourseCreate",component:Qe,meta:{breadcrumb:{title:"创建"}}},{path:"/course/:id/edit",name:"CourseEdit",component:rt,meta:{breadcrumb:{title:"编辑"}}}]},{path:"/zhiye",name:"zhiyesRoot",permission:"zhiye.index",component:{render:function(e){return e("router-view")}},redirect:{name:"Zhiye"},meta:{nav:{icon:"el-icon-collection",title:"职业路径"},breadcrumb:{title:"职业",replace:!0}},children:[{path:"/zhiye",name:"Zhiye",component:pt},{path:"/zhiye/create",name:"ZhiyeCreate",component:_t,meta:{breadcrumb:{title:"创建"}}},{path:"/zhiye/:id/edit",name:"ZhiyeEdit",component:$t,meta:{breadcrumb:{title:"编辑"}}}]}]},{path:"project/manager",name:"ProjectManager",component:{render:function(e){return e("router-view")}},meta:{nav:{icon:"el-icon-collection",title:"企业项目"}},children:[{path:"/company",name:"companyRoot",permission:"company.index",component:{render:function(e){return e("router-view")}},redirect:{name:"Company"},meta:{nav:{icon:"el-icon-collection",title:"企业管理"},breadcrumb:{title:"企业",replace:!0}},children:[{path:"/company",name:"Company",component:Ot},{path:"/company/create",name:"CompanyCreate",component:Nt,meta:{breadcrumb:{title:"创建"}}},{path:"/company/:id/edit",name:"CompanyEdit",component:Qt,meta:{breadcrumb:{title:"编辑"}}}]},{path:"/project",name:"ProjectRoot",permission:"project.index",component:{render:function(e){return e("router-view")}},redirect:{name:"Project"},meta:{nav:{icon:"el-icon-collection",title:"项目管理"},breadcrumb:{title:"项目",replace:!0}},children:[{path:"/project",name:"Project",component:Yt},{path:"/project/create",name:"ProjectCreate",component:ma,meta:{breadcrumb:{title:"创建"}}},{path:"/project/:id",name:"ProjectItem",component:sa,meta:{breadcrumb:{title:"详情"}}},{path:"/project/:id/edit",name:"ProjectEdit",component:ba,meta:{breadcrumb:{title:"编辑"}}}]}]},{path:"/skill/manager",name:"SkillManager",component:{render:function(e){return e("router-view")}},meta:{nav:{icon:"el-icon-collection",title:"技能测评"}},children:[{path:"/stack",name:"StackRoot",permission:"stack.index",component:{render:function(e){return e("router-view")}},redirect:{name:"Stack"},meta:{nav:{icon:"el-icon-collection",title:"技能管理"},breadcrumb:{title:"技能",replace:!0}},children:[{path:"/stack",name:"Stack",component:Sa},{path:"/stack/create",name:"StackCreate",component:Da,meta:{breadcrumb:{title:"创建"}}},{path:"/stack/:id/edit",name:"StackEdit",component:Va,meta:{breadcrumb:{title:"编辑"}}}]},{path:"/skill/question",name:"SkillQuestionRoot",permission:"skill.index",component:{render:function(e){return e("router-view")}},redirect:{name:"SkillQuestion"},meta:{nav:{icon:"el-icon-collection",title:"题库管理"},breadcrumb:{title:"题库",replace:!0}},children:[{path:"/skill/question",name:"SkillQuestion",component:Za},{path:"/skill/question/create",name:"SkillQuestionCreate",component:Xa,meta:{breadcrumb:{title:"创建"}}},{path:"/skill/question/:id/edit",name:"SkillQuestionEdit",component:sn,meta:{breadcrumb:{title:"编辑"}}}]}]},{path:"advertise/manager",name:"AdvertiseManager",component:{render:function(e){return e("router-view")}},meta:{nav:{icon:"el-icon-s-cooperation",title:"广告物料"}},children:[{path:"/advertise",name:"AdvertiseRoot",permission:"advertise.index",component:{render:function(e){return e("router-view")}},redirect:{name:"Advertise"},meta:{nav:{icon:"el-icon-s-goods",title:"广告管理"},breadcrumb:{title:"广告管理",replace:!0}},children:[{path:"/advertise",name:"Advertise",component:ai},{path:"/advertise/create",name:"AdvertiseCreate",component:li,meta:{breadcrumb:{title:"创建"}}},{path:"/advertise/:id/edit",name:"AdvertiseEdit",component:hi,meta:{breadcrumb:{title:"编辑"}}}]},{path:"/material",name:"MaterialRoot",permission:"material.index",component:{render:function(e){return e("router-view")}},redirect:{name:"Material"},meta:{nav:{icon:"el-icon-picture",title:"物料管理"},breadcrumb:{title:"物料管理",replace:!0}},children:[{path:"/material",name:"Material",component:Ci},{path:"/material/create",name:"MaterialCreate",component:zi,meta:{breadcrumb:{title:"创建"}}},{path:"/material/:id/edit",name:"MaterialEdit",component:qi,meta:{breadcrumb:{title:"编辑"}}}]}]},{path:"/setting",name:"settingRoot",component:{render:function(e){return e("router-view")}},meta:{nav:{icon:"el-icon-setting",title:"管理设置"},breadcrumb:{title:"设置"}},children:[{path:"/setting/manager",name:"SettingManagerRoot",component:{render:function(e){return e("router-view")}},redirect:{name:"SettingManager"},meta:{nav:{icon:"el-icon-user",title:"管理员"},breadcrumb:{title:"管理员",replace:!0}},children:[{path:"/setting/manager",name:"SettingManager",component:Tn},{path:"/setting/manager/create",name:"SettingManagerCreate",component:Fn,meta:{breadcrumb:{title:"创建"}}},{path:"/setting/manager/:id/edit",name:"SettingManagerEdit",component:Gn,meta:{breadcrumb:{title:"编辑"}}}]},{path:"/setting/roles",name:"SettingRolesRoot",component:{render:function(e){return e("router-view")}},redirect:{name:"Roles"},meta:{nav:{icon:"el-icon-user-solid",title:"角色"},breadcrumb:{title:"角色"}},children:[{path:"/setting/roles",name:"SettingRoles",component:hn},{path:"/setting/roles/create",name:"SettingRoleCreate",component:zn},{path:"/setting/roles/:id",name:"SettingRoleEdit",component:Cn,meta:{breadcrumb:{title:"详情"}}}]}]}]}],Ti=Mi,Bi=a("323e"),Vi=a.n(Bi);a("a5d8");n["default"].use(d["a"]);var Ni=new d["a"]({base:"",routes:Ti});Ni.beforeEach(function(){var e=Object(u["a"])(regeneratorRuntime.mark((function e(t,a,n){var i;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(Vi.a.start(),i=x.getToken(),i||"AccountLogin"===t.name){e.next=5;break}return n({name:"AccountLogin",replace:!0}),e.abrupt("return");case 5:if(!i){e.next=9;break}if("AccountLogin"!==t.name){e.next=9;break}return n({name:"Root",replace:!0}),e.abrupt("return");case 9:n();case 10:case"end":return e.stop()}}),e)})));return function(t,a,n){return e.apply(this,arguments)}}()),Ni.afterEach((function(e,t){Vi.a.done()}));var Ai=Ni,Ui=a("2f62");n["default"].use(Ui["a"]);var Fi=new Ui["a"].Store({state:{},mutations:{},actions:{},modules:{}});a("0fae"),a("add7");n["default"].use(b.a),n["default"].config.productionTip=!1,new n["default"]({router:Ai,store:Fi,render:function(e){return e(c)}}).$mount("#app")},"571c":function(e,t,a){},"5c50":function(e,t,a){},6758:function(e,t,a){"use strict";var n=a("2f5d"),i=a.n(n);i.a},7198:function(e,t,a){"use strict";var n=a("b62c"),i=a.n(n);i.a},"759a":function(e,t,a){},7672:function(e,t,a){"use strict";var n=a("c024"),i=a.n(n);i.a},7759:function(e,t,a){},"7d3c":function(e,t,a){"use strict";var n=a("2885"),i=a.n(n);i.a},"874b":function(e,t,a){"use strict";var n=a("d27b"),i=a.n(n);i.a},"8c34":function(e,t,a){"use strict";var n=a("9132"),i=a.n(n);i.a},"8e17":function(e,t,a){"use strict";var n=a("3b41"),i=a.n(n);i.a},"908f":function(e,t,a){},9132:function(e,t,a){},9297:function(e,t,a){"use strict";var n=a("759a"),i=a.n(n);i.a},"933c":function(e,t,a){},"9b19":function(e,t,a){e.exports=a.p+"img/logo.f43b9a47.svg"},"9b22":function(e,t,a){"use strict";var n=a("908f"),i=a.n(n);i.a},"9f55":function(e,t,a){"use strict";var n=a("ed02"),i=a.n(n);i.a},a29a:function(e,t,a){},a508:function(e,t,a){"use strict";var n=a("4adc"),i=a.n(n);i.a},a67c:function(e,t,a){},a699:function(e,t,a){},aa1b:function(e,t,a){"use strict";var n=a("a29a"),i=a.n(n);i.a},aca3:function(e,t,a){},add7:function(e,t,a){},b074:function(e,t,a){},b56f:function(e,t,a){"use strict";var n=a("5c50"),i=a.n(n);i.a},b62c:function(e,t,a){},c024:function(e,t,a){},ca0b:function(e,t,a){"use strict";var n=a("0d1a"),i=a.n(n);i.a},cee0:function(e,t,a){},d27b:function(e,t,a){},d3e5:function(e,t,a){"use strict";var n=a("1876"),i=a.n(n);i.a},d4e0:function(e,t,a){},e0cc:function(e,t,a){},e0eb:function(e,t,a){},ed02:function(e,t,a){},f30b:function(e,t,a){"use strict";var n=a("f61c"),i=a.n(n);i.a},f432:function(e,t,a){"use strict";var n=a("e0eb"),i=a.n(n);i.a},f61c:function(e,t,a){},f7f7:function(e,t,a){},fcc5:function(e,t,a){"use strict";var n=a("7759"),i=a.n(n);i.a},fcd9:function(e,t,a){"use strict";var n=a("cee0"),i=a.n(n);i.a}});
//# sourceMappingURL=app.a79ee70d.js.map