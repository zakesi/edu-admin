(function(e){function t(t){for(var a,i,o=t[0],c=t[1],l=t[2],d=0,p=[];d<o.length;d++)i=o[d],Object.prototype.hasOwnProperty.call(r,i)&&r[i]&&p.push(r[i][0]),r[i]=0;for(a in c)Object.prototype.hasOwnProperty.call(c,a)&&(e[a]=c[a]);u&&u(t);while(p.length)p.shift()();return s.push.apply(s,l||[]),n()}function n(){for(var e,t=0;t<s.length;t++){for(var n=s[t],a=!0,o=1;o<n.length;o++){var c=n[o];0!==r[c]&&(a=!1)}a&&(s.splice(t--,1),e=i(i.s=n[0]))}return e}var a={},r={app:0},s=[];function i(t){if(a[t])return a[t].exports;var n=a[t]={i:t,l:!1,exports:{}};return e[t].call(n.exports,n,n.exports,i),n.l=!0,n.exports}i.m=e,i.c=a,i.d=function(e,t,n){i.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},i.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},i.t=function(e,t){if(1&t&&(e=i(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(i.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var a in e)i.d(n,a,function(t){return e[t]}.bind(null,a));return n},i.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return i.d(t,"a",t),t},i.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},i.p="";var o=window["webpackJsonp"]=window["webpackJsonp"]||[],c=o.push.bind(o);o.push=t,o=o.slice();for(var l=0;l<o.length;l++)t(o[l]);var u=c;s.push([0,"chunk-vendors"]),n()})({0:function(e,t,n){e.exports=n("56d7")},"092f":function(e,t,n){},"0d1a":function(e,t,n){},2169:function(e,t,n){"use strict";var a=n("092f"),r=n.n(a);r.a},"2f5d":function(e,t,n){},"55f0":function(e,t,n){},"56d7":function(e,t,n){"use strict";n.r(t);n("e260"),n("e6cf"),n("cca6"),n("a79d");var a=n("2b0e"),r=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{attrs:{id:"app"}},[n("router-view")],1)},s=[],i=n("2877"),o={},c=Object(i["a"])(o,r,s,!1,null,null,null),l=c.exports,u=(n("96cf"),n("1da1")),d=n("8c4f"),p=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"page-wrapper"},[n("Sider",{staticClass:"page-sider"}),n("div",{staticClass:"page-mainer"},[n("Header",{staticClass:"page-header"}),n("div",{staticClass:"page-body"},[n("router-view")],1),e._e()],1)],1)},m=[],f=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"header-section"},[n("div",{staticClass:"header-hd"},[n("Breadcrumb")],1),n("div",{staticClass:"header-bd"}),n("div",{staticClass:"header-ft"},[e._m(0),n("el-dropdown",{staticStyle:{height:"100%"},on:{command:e.handleCommand}},[n("div",{staticClass:"bar-info-container"},[n("i",{staticClass:"el-icon-user-solid userInfo-avatar"}),n("span",{staticClass:"userInfo-name"},[e._v(e._s(e.userInfo.name))]),n("i",{staticClass:"el-icon-arrow-down el-icon--right"})]),n("el-dropdown-menu",{attrs:{slot:"dropdown"},slot:"dropdown"},[n("el-dropdown-item",{attrs:{command:"Logout",icon:"el-icon-video-pause"}},[e._v("退出")])],1)],1)],1)])},h=[function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"bar-info-container"},[n("i",{staticClass:"el-icon-question"})])}],g=function(){var e=this,t=e.$createElement,n=e._self._c||t;return e.breadcrumbValue.length?n("div",{staticClass:"breadcrumb-section"},[e.breadcrumbValue.length?n("el-breadcrumb",{staticClass:"breadcrumb-list"},[e._l(e.breadcrumbValue,(function(t){return[t.to?n("el-breadcrumb-item",{key:t.name,staticClass:"breadcrumb-item",attrs:{replace:!0,to:t.to}},[e._v(e._s(t.name))]):n("el-breadcrumb-item",{key:t.name,staticClass:"breadcrumb-item"},[e._v(e._s(t.name))])]}))],2):e._e()],1):e._e()},v=[],b=(n("4de4"),n("d81d"),n("b0c0"),n("ac1f"),n("5319"),{props:{breadcrumb:{type:Array,default:function(){return[]}}},computed:{breadcrumbValue:function(){var e=this.breadcrumb;return e.length?e:this.$route.matched.filter((function(e){return e.meta&&e.meta.breadcrumb})).map((function(e){return{name:e.meta.breadcrumb.title,to:e.meta.breadcrumb.replace?{name:e.name}:void 0}}))}}}),_=b,w=(n("ca0b"),Object(i["a"])(_,g,v,!1,null,"897365ae",null)),C=w.exports,y={data:function(){return{userInfo:{}}},created:function(){},methods:{handleCommand:function(e){var t="handle".concat(e);this[t]()},handleLogout:function(){}},components:{Breadcrumb:C}},x=y,$=(n("68e3"),Object(i["a"])(x,f,h,!1,null,"1b3800f2",null)),k=$.exports,E=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("footer",{staticClass:"footer-section"},[e._v(" Copyright © 2020 ❤️ 极客学院体验技术部出品 ")])},S=[],j={},O=j,I=(n("2169"),Object(i["a"])(O,E,S,!1,null,null,null)),P=I.exports,z=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"sider-section"},[e._m(0),n("div",{staticClass:"sider-menu-body"},[n("el-scrollbar",{staticClass:"scrollbar-section"},[n("Menu",{staticClass:"menu-section"})],1)],1)])},T=[function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"sider-menu-header logo-section"},[a("img",{staticClass:"logo-img",attrs:{src:n("9b19"),alt:"logo"}})])}],B=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("el-menu",{attrs:{"default-active":e.path,router:!0}},[e._l(e.filterRoutes,(function(t){return[e.hasNavChildren(t)?n("el-submenu",{key:t.path,attrs:{index:t.path}},[n("template",{slot:"title"},[t.meta.nav.icon?n("i",{class:t.meta.nav.icon}):e._e(),n("span",{attrs:{slot:"title"},slot:"title"},[e._v(e._s(t.meta.nav.title))])]),e._l(t.children,(function(t){return n("el-menu-item",{key:t.path,attrs:{index:t.path,route:{path:t.path},id:t.name}},[t.meta.nav.icon?n("i",{class:t.meta.nav.icon}):e._e(),n("span",{attrs:{slot:"title"},slot:"title"},[e._v(e._s(t.meta.nav.title))])])}))],2):n("el-menu-item",{key:t.path,attrs:{disabled:t.disabled,index:t.path,route:{path:t.path},id:t.name}},[t.meta.nav.icon?n("i",{class:t.meta.nav.icon}):e._e(),n("span",{attrs:{slot:"title"},slot:"title"},[e._v(e._s(t.meta.nav.title))])])]}))],2)},D=[],M=(n("4160"),n("45fc"),n("159b"),{data:function(){return{path:this.$route.path,filterRoutes:[],PermissionArr:[]}},created:function(){this.getPermissions()},watch:{$route:function(e){this.path=e.path}},methods:{getPermissions:function(){this.getRoutes()},getRoutes:function(){this.filterRoutes=this.filterNavigator(He)},filterNavigator:function(e){var t=this,n=[];return e.forEach((function(e){if(e.meta&&e.meta.nav){var a={path:e.path,name:e.name,meta:e.meta};e.children&&(a.children=t.filterNavigator(e.children)),n.push(a)}else e.children&&t.filterNavigator(e.children).forEach((function(e){return n.push(e)}))})),n},hasNavChildren:function(e){var t=e.children||[];return t.some((function(e){return e.meta&&e.meta.nav}))}}}),R=M,F=(n("7198"),Object(i["a"])(R,B,D,!1,null,null,null)),V=F.exports,A={components:{Menu:V}},N=A,U=(n("9297"),Object(i["a"])(N,z,T,!1,null,null,null)),q=U.exports,L={data:function(){return{}},components:{Header:k,Footer:P,Sider:q}},H=L,J=(n("9f55"),Object(i["a"])(H,p,m,!1,null,null,null)),G=J.exports,K=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],staticClass:"page-content"},[n("router-link",{attrs:{to:{name:"CourseCreate"}}},[n("el-button",{attrs:{size:"medium",type:"primary",plain:""}},[e._v("创建课程")])],1),n("el-table",{staticClass:"mt-20",attrs:{data:e.courses,size:"medium"}},[n("el-table-column",{attrs:{prop:"id",label:"id",width:"80px"}}),n("el-table-column",{attrs:{prop:"name",label:"名称"}}),n("el-table-column",{attrs:{prop:"short_name",label:"副标题"}}),n("el-table-column",{attrs:{prop:"status",label:"状态",width:"120px",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[n("el-tag",{attrs:{type:t.row.status?"success":"danger",size:"small"}},[e._v(" "+e._s(t.row.status?"已完成":"未完成")+" ")])]}}])}),n("el-table-column",{attrs:{label:"操作",width:"180px",align:"right"},scopedSlots:e._u([{key:"default",fn:function(t){return[n("el-dropdown",{attrs:{trigger:"hover"},on:{command:e.handleCommand}},[n("span",{staticClass:"icon-ctrl"},[n("i",{staticClass:"el-icon-more"})]),n("el-dropdown-menu",{attrs:{slot:"dropdown"},slot:"dropdown"},[n("el-dropdown-item",{attrs:{command:"edit-"+t.row.id+"-"+t.$index}},[e._v("编辑")]),n("el-dropdown-item",{attrs:{command:"delete-"+t.row.id+"-"+t.$index}},[e._v("删除")])],1)],1)]}}])})],1),n("el-pagination",{staticClass:"mt-20",attrs:{background:"",layout:"total, prev, pager, next, jumper","current-page":e.pagination.currentPage,"page-size":e.pagination.pageSize,total:e.pagination.total,"hide-on-single-page":!0},on:{"current-change":e.getData,"update:currentPage":function(t){return e.$set(e.pagination,"currentPage",t)},"update:current-page":function(t){return e.$set(e.pagination,"currentPage",t)}}})],1)},Q=[],W=(n("a434"),n("d3b7"),n("1276"),n("5530")),X=n("bc3a"),Y=n.n(X),Z=n("5c96"),ee=n.n(Z),te=Y.a.create();te.defaults.timeout=2e3,te.interceptors.request.use((function(e){var t=Object(W["a"])({},e),n="xxx";return n&&(t["headers"]["Authorization"]="Bearer "+n),t}),(function(e){return Promise.reject(e)}));var ne=function(e){var t=e.response,n=t?t.status:408;if(t){var a=t.data,r=a.message||"服务器发送错误，请稍后再试";401===n?Z["Message"].error("登录状态过期，请重新登录"):403===n?Z["Message"].error("没有权限，联系管理员"):Z["Message"].error(r)}else Z["Message"].error("网络超时")},ae=function(e){switch(!0){case 0===e.data.error_code:return e.data.data;case 1===e.data.error_code:return Z["Message"].error(e.data.message),Promise.reject(e.data);default:return e.data}},re=function(e){return ne(e),Promise.reject(e)};te.interceptors.response.use(ae,re);var se={post:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return te.post(e,t,n)},put:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return te.put(e,t,n)},get:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},a=Object.assign({params:t},n);return te.get(e,a)},delete:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},a=Object.assign({params:t},n);return te.delete(e,a)}},ie="https://neon.jiker.vip",oe={qiniuToken:"".concat(ie,"/api/qiniu/token"),course:"".concat(ie,"/api/course"),chapter:"".concat(ie,"/api/chapter"),section:"".concat(ie,"/api/section"),courseItem:function(e){return"".concat(ie,"/api/course/").concat(e)},chapterItem:function(e){return"".concat(ie,"/api/chapter/").concat(e)},sectionItem:function(e){return"".concat(ie,"/api/section/").concat(e)},chapterSort:"".concat(ie,"/api/chapter/sort"),sectionSort:"".concat(ie,"/api/section/sort")},ce={create:function(e){return se.post(oe.course,e)},index:function(e){return se.get(oe.course,e)},show:function(e){return se.get(oe.courseItem(e))},edit:function(e,t){return se.put(oe.courseItem(e),t)},destory:function(e){return se.delete(oe.courseItem(e))}},le=ce,ue={data:function(){return{loading:!0,courses:[],pagination:{currentPage:1,pageSize:5,total:0}}},created:function(){this.getData()},methods:{getData:function(){var e=this,t={page_size:this.pagination.pageSize,current_page:this.pagination.currentPage};this.loading=!0,le.index(t).then((function(t){e.courses=t.rows,e.pagination.currentPage=t.pagination.current_page,e.pagination.pageSize=t.pagination.page_size,e.pagination.total=t.pagination.total})).finally((function(){e.loading=!1}))},handleCommand:function(e){var t=e.split("-")[0],n=e.split("-")[1],a=e.split("-")[2];"edit"===t?this.$router.push({name:"CourseEdit",params:{id:n}}):"delete"===t&&this.delCourses(a)},delCourses:function(e){var t=this,n=this.courses[e].id;this.$confirm("确认删除吗？").then((function(){return le.destory(n)})).then((function(){t.$message.success("删除课程成功"),t.courses.splice(e,1)})).catch((function(){}))}}},de=ue,pe=(n("9b22"),Object(i["a"])(de,K,Q,!1,null,null,null)),me=pe.exports,fe=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"login-page"},[a("div",{staticClass:"page-content"},[a("img",{staticClass:"page-logo",attrs:{src:n("cf05")}}),a("div",{staticClass:"page-form_container"},[a("el-form",{ref:"passwordFrom",staticStyle:{width:"340px"},attrs:{"status-icon":"",rules:e.passwordRules,model:e.passwordFrom}},[a("span",[e._v("账号密码登陆")]),a("el-form-item",{attrs:{prop:"phone"}},[a("el-input",{staticClass:"phone-input",attrs:{type:"number","prefix-icon":"el-icon-mobile-phone",placeholder:"请输手机号",autocomplete:"off"},model:{value:e.passwordFrom.phone,callback:function(t){e.$set(e.passwordFrom,"phone",t)},expression:"passwordFrom.phone"}})],1),a("el-form-item",{attrs:{prop:"password"}},[a("el-input",{attrs:{type:"password","prefix-icon":"el-icon-lock",placeholder:"请输入密码",autocomplete:"off","show-password":""},model:{value:e.passwordFrom.password,callback:function(t){e.$set(e.passwordFrom,"password",t)},expression:"passwordFrom.password"}})],1),a("el-form-item",[a("el-button",{staticClass:"login-btn",attrs:{type:"primary"},on:{click:e.login}},[e._v("登录")])],1)],1)],1)])])},he=[],ge={data:function(){return{passwordFrom:{phone:"",password:""},passwordRules:{phone:[{required:!0,message:"请输入手机号",trigger:"blur"},{pattern:/^1[3456789]\d{9}$/,message:"目前只支持中国大陆的手机号码",trigger:"blur"}],password:[{required:!0,message:"请输入密码",trigger:"blur"}]}}},created:function(){},methods:{login:function(){var e=this;this.$refs["passwordFrom"].validate((function(t){t&&e.$router.push({path:"/dashboard"})}))}}},ve=ge,be=(n("594e"),Object(i["a"])(ve,fe,he,!1,null,"f47376a6",null)),_e=be.exports,we=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"page-content"},[n("div",{staticClass:"c-650"},[e._m(0),n("el-form",{attrs:{"label-position":"top","label-width":"80px",size:"mini"}},[n("el-row",{attrs:{gutter:20}},[n("el-col",{attrs:{span:12}},[n("el-form-item",{attrs:{label:"课程名称："}},[n("el-input",{model:{value:e.course.name,callback:function(t){e.$set(e.course,"name",t)},expression:"course.name"}})],1)],1),n("el-col",{attrs:{span:12}},[n("el-form-item",{attrs:{label:"副标题："}},[n("el-input",{model:{value:e.course.short_name,callback:function(t){e.$set(e.course,"short_name",t)},expression:"course.short_name"}})],1)],1)],1),n("el-form-item",{attrs:{label:"课程提示："}},[n("el-input",{model:{value:e.course.tips,callback:function(t){e.$set(e.course,"tips",t)},expression:"course.tips"}})],1),n("el-form-item",{attrs:{label:"课程描述："}},[n("el-input",{attrs:{type:"textarea"},model:{value:e.course.description,callback:function(t){e.$set(e.course,"description",t)},expression:"course.description"}})],1),n("el-form-item",{attrs:{label:"课程封面："}},[n("el-upload",{ref:"upload",staticClass:"course-image-upload",attrs:{action:"",limit:1,"file-list":e.fileList,"before-upload":e.handleBeforeUpload,accept:"image/jpg, image/jpeg, image/png"}},[e.course.image_url?e._e():n("i",{staticClass:"el-icon-plus el-uploader__icon"}),e.course.image_url?n("img",{staticClass:"course-image-upload",attrs:{src:e.course.image_url}}):e._e()])],1),n("el-form-item",[n("el-button",{attrs:{size:"medium",type:"primary",plain:""},on:{click:e.handleSubmit}},[e._v("创建课程")])],1)],1)],1)])},Ce=[function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"sub-header"},[n("div",{staticClass:"sub-header-title"},[e._v("基本信息")])])}],ye=(n("99af"),n("cea2")),xe="_for_neon_project/",$e={token:function(){return se.get(oe.qiniuToken)},upload:function(e){var t=e.file,n=e.token,a=e.mimeType,r=void 0===a?null:a,s=e.params,i=void 0===s?{}:s,o=e.progressCallback;return new Promise((function(e,a){var s=t.name,c=xe+Date.now()+"_"+t.name,l={useCdnDomain:!0},u={fname:s,params:i,mimeType:r},d=ye["upload"](t,c,n,u,l);d.subscribe({next:function(e){"function"===typeof o&&o(e)},error:function(e){a(e)},complete:function(t){e(t)}})}))},start:function(){var e=Object(u["a"])(regeneratorRuntime.mark((function e(t){var n,a,r,s,i;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,$e.token();case 2:return n=e.sent,a=n.token,r=n.domain,e.next=7,$e.upload({file:t,token:a});case 7:return s=e.sent,i="https://".concat(r,"/").concat(s.key),e.abrupt("return",{imageUrl:i});case 10:case"end":return e.stop()}}),e)})));function t(t){return e.apply(this,arguments)}return t}()},ke=$e,Ee={data:function(){return{fileList:[],course:{name:"",short_name:"",tips:"",description:"",image_url:"",status:0}}},methods:{handleSubmit:function(){var e=this;this.loading=!0,le.create(this.course).then((function(t){e.$message.success("创建课程成功"),e.$router.push({name:"CourseEdit",params:{id:t.id}})})).finally((function(){e.loading=!1}))},handleBeforeUpload:function(e){var t=this;return ke.start(e).then((function(e){t.course.image_url=e.imageUrl})),Promise.reject({})}}},Se=Ee,je=(n("6758"),Object(i["a"])(Se,we,Ce,!1,null,"2182ba00",null)),Oe=je.exports,Ie=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],staticClass:"page-content"},[n("el-row",{attrs:{gutter:60}},[n("el-col",{attrs:{lg:12}},[n("div",{staticClass:"sub-header"},[n("div",{staticClass:"sub-header-title"},[e._v("基本信息")]),n("div",{staticClass:"sub-header-fd"},[n("el-button",{attrs:{size:"medium",type:e.isEdit?"primary":""},on:{click:e.handleEdit}},[e._v(" "+e._s(e.isEdit?"保存":"修改")+" ")])],1)]),n("el-form",{attrs:{"label-position":"top",size:"mini",model:e.course}},[n("el-row",{attrs:{gutter:20}},[n("el-col",{attrs:{lg:12}},[n("el-form-item",{attrs:{label:"课程名称："}},[n("el-input",{attrs:{disabled:!e.isEdit},model:{value:e.course.name,callback:function(t){e.$set(e.course,"name",t)},expression:"course.name"}})],1)],1),n("el-col",{attrs:{lg:12}},[n("el-form-item",{attrs:{label:"副标题："}},[n("el-input",{attrs:{disabled:!e.isEdit},model:{value:e.course.short_name,callback:function(t){e.$set(e.course,"short_name",t)},expression:"course.short_name"}})],1)],1)],1),n("el-form-item",{attrs:{label:"课程提示："}},[n("el-input",{attrs:{disabled:!e.isEdit},model:{value:e.course.tips,callback:function(t){e.$set(e.course,"tips",t)},expression:"course.tips"}})],1),n("el-form-item",{attrs:{label:"课程描述："}},[n("el-input",{attrs:{type:"textarea",disabled:!e.isEdit},model:{value:e.course.description,callback:function(t){e.$set(e.course,"description",t)},expression:"course.description"}})],1),n("el-row",{attrs:{gutter:20}},[n("el-col",{attrs:{lg:12}},[n("el-form-item",{attrs:{label:"课程封面："}},[e.isEdit?n("el-upload",{ref:"upload",staticClass:"course-image-upload",attrs:{action:"",limit:1,"file-list":e.fileList,"before-upload":e.handleBeforeUpload,accept:"image/jpg, image/jpeg, image/png"}},[e.course.image_url?e._e():n("i",{staticClass:"el-icon-plus el-uploader__icon"}),e.course.image_url?n("img",{staticClass:"course-image-upload",attrs:{src:e.course.image_url}}):e._e()]):e._e(),!e.isEdit&&e.course.image_url?n("img",{staticClass:"course-image-upload",attrs:{src:e.course.image_url}}):e._e(),e.isEdit||e.course.image_url?e._e():n("span",[e._v("无")])],1)],1),n("el-col",{attrs:{lg:12}},[n("el-form-item",{attrs:{label:"课程状态："}},[n("el-switch",{attrs:{disabled:!e.isEdit,"active-value":1,"inactive-value":0},model:{value:e.course.status,callback:function(t){e.$set(e.course,"status",t)},expression:"course.status"}})],1)],1)],1)],1)],1),n("el-col",{attrs:{lg:12}},[n("div",{staticClass:"sub-header"},[n("div",{staticClass:"sub-header-title"},[e._v("课程章节")])]),n("div",{staticClass:"chapter-container"},[n("draggable",{attrs:{group:"chapter",handle:".chapter-item-draggable"},on:{change:e.handleChapterSort},model:{value:e.course.chapters,callback:function(t){e.$set(e.course,"chapters",t)},expression:"course.chapters"}},e._l(e.course.chapters,(function(t,a){return n("div",{key:t.id,staticClass:"chapter-item"},[n("div",{staticClass:"chapter-item-title"},[n("i",{staticClass:"el-icon-rank chapter-item-draggable"}),n("span",[e._v(e._s(t.name))]),n("div",{staticClass:"chapter-item-ctrl"},[n("el-dropdown",{attrs:{trigger:"hover"},on:{command:e.handleChapter}},[n("span",{staticClass:"icon-ctrl"},[n("i",{staticClass:"el-icon-more"})]),n("el-dropdown-menu",{attrs:{slot:"dropdown"},slot:"dropdown"},[n("el-dropdown-item",{attrs:{command:"1-"+a}},[e._v("编辑")]),n("el-dropdown-item",{attrs:{command:"0-"+a}},[e._v("删除")])],1)],1)],1)]),n("div",{staticClass:"chapter-item-section"},[n("draggable",{attrs:{handle:".section-item-draggable",group:"section"},on:{change:function(t){return e.handleSectionSort(t,a)}},model:{value:t.sections,callback:function(n){e.$set(t,"sections",n)},expression:"chapter.sections"}},e._l(t.sections,(function(t,r){return n("div",{key:t.id,staticClass:"section-item"},[n("div",{staticClass:"section-item-text"},[n("i",{staticClass:"el-icon-rank section-item-draggable"}),n("span",[e._v(e._s(t.name))]),n("div",{staticClass:"section-item-ctrl"},[n("el-dropdown",{attrs:{trigger:"hover"},on:{command:e.handleSection}},[n("span",{staticClass:"icon-ctrl"},[n("i",{staticClass:"el-icon-more"})]),n("el-dropdown-menu",{attrs:{slot:"dropdown"},slot:"dropdown"},[n("el-dropdown-item",{attrs:{command:"2-"+a+"-"+r}},[e._v("内容")]),n("el-dropdown-item",{attrs:{command:"1-"+a+"-"+r}},[e._v("编辑")]),n("el-dropdown-item",{attrs:{command:"0-"+a+"-"+r}},[e._v("删除")])],1)],1)],1)])])})),0),n("div",{staticClass:"section-item",on:{click:function(t){return e.handleAddSection(a)}}},[n("div",{staticClass:"section-item-create"},[e._v(" 添加节 "),n("i",{staticClass:"el-icon-circle-plus"})])])],1)])})),0),n("div",{staticClass:"chapter-item-create",on:{click:e.handleAddChapter}},[e._v(" 添加章 "),n("i",{staticClass:"el-icon-circle-plus"})])],1)])],1),n("el-drawer",{attrs:{visible:e.drawerVisible,direction:"rtl",size:"50%","before-close":e.handleCloseDrawer},on:{"update:visible":function(t){e.drawerVisible=t}}},[n("div",{staticClass:"section-content"},[n("el-form",{attrs:{"label-position":"top",size:"mini",model:e.course}},[n("el-form-item",{attrs:{label:"小节名称："}},[n("div",{staticClass:"section-title"},[e._v(e._s(e.sectionInfo.name))])]),n("el-form-item",{attrs:{label:"视频地址："}},[n("el-input",{model:{value:e.sectionInfo.video_url,callback:function(t){e.$set(e.sectionInfo,"video_url",t)},expression:"sectionInfo.video_url"}})],1),n("el-form-item",{attrs:{label:"课程内容："}},[n("mavon-editor",{ref:"md",staticClass:"md",attrs:{toolbars:e.markdownOption,subfield:!1},on:{imgAdd:e.handleImgAdd},model:{value:e.sectionInfo.content,callback:function(t){e.$set(e.sectionInfo,"content",t)},expression:"sectionInfo.content"}})],1),n("el-form-item",[n("el-button",{attrs:{size:"medium",type:"primary"},on:{click:e.handleSaveSection}},[e._v("保存")])],1)],1)],1)])],1)},Pe=[],ze=(n("a9e3"),n("b2d8")),Te=(n("64e1"),n("310e")),Be=n.n(Te),De={create:function(e){return se.post(oe.chapter,e)},edit:function(e,t){return se.put(oe.chapterItem(e),t)},destory:function(e){return se.delete(oe.chapterItem(e))},sort:function(e){return se.post(oe.chapterSort,e)}},Me=De,Re={create:function(e){return se.post(oe.section,e)},edit:function(e,t){return se.put(oe.sectionItem(e),t)},destory:function(e){return se.delete(oe.sectionItem(e))},sort:function(e){return se.post(oe.sectionSort,e)},show:function(e){return se.get(oe.sectionItem(e))}},Fe=Re,Ve={bold:!0,mark:!0,quote:!0,ol:!0,ul:!0,link:!0,imagelink:!0,code:!0,table:!0},Ae={data:function(){return{loading:!0,markdownOption:Ve,isEdit:!1,drawerVisible:!1,fileList:[],course:{id:null,name:"",short_name:"",tips:"",description:"",status:0,image_url:"",chapters:[]},sectionInfo:{name:"",video_url:"",content:"",id:null}}},created:function(){this.getData()},methods:{getData:function(){var e=this,t=this.$route.params.id;le.show(t).then((function(t){e.course=t.course})).finally((function(){e.loading=!1}))},handleEdit:function(){var e=this,t=this.$route.params.id;this.isEdit=!this.isEdit,this.isEdit||(this.loading=!0,le.edit(t,Object(W["a"])({},this.course)).then((function(){e.$message.success("编辑成功")})).finally((function(){e.loading=!1})))},handleBeforeUpload:function(e){var t=this;return ke.start(e).then((function(e){t.course.image_url=e.imageUrl})),Promise.reject({})},handleAddChapter:function(){var e=this,t=Number(this.$route.params.id),n=this.course.chapters.length+1;this.$prompt("请输入章节名称","新增章",{confirmButtonText:"确定",cancelButtonText:"取消",inputPattern:/\S/,inputErrorMessage:"输入不能为空"}).then((function(a){var r=a.value;e.loading=!0,Me.create({sort:n,course_id:t,name:r}).then((function(t){e.$message.success("添加章节成功"),e.course.chapters.push({id:t.id,name:r,sections:[],sort:n})})).finally((function(){e.loading=!1}))}))},handleAddSection:function(e){var t=this,n=this.course.chapters[e],a=n.sections.length+1;this.$prompt("请输入节名称",n.name,{confirmButtonText:"确定",cancelButtonText:"取消",inputPattern:/\S/,inputErrorMessage:"输入不能为空"}).then((function(r){var s=r.value;t.loading=!0,Fe.create({sort:a,chapter_id:n.id,name:s}).then((function(n){t.$message.success("添加节成功"),t.course.chapters[e].sections.push({id:n.id,name:s,sort:a})})).finally((function(){t.loading=!1}))}))},handleChapter:function(e){var t=this,n=e.split("-"),a=n[0],r=n[1],s=this.course.chapters[r];"1"===a?this.$prompt("请编辑章名称","编辑章",{confirmButtonText:"确定",cancelButtonText:"取消",inputPattern:/\S/,inputErrorMessage:"输入不能为空",inputValue:s.name}).then((function(e){var n=e.value;t.loading=!0,Me.edit(s.id,{name:n}).then((function(){t.$message.success("编辑章节成功"),s.name=n})).finally((function(){t.loading=!1}))})):(this.loading=!0,this.$confirm("确认删除「"+s.name+"」吗？").then((function(){return Me.destory(s.id)})).then((function(){t.course.chapters.splice(r,1)})).finally((function(){t.loading=!1})))},handleSection:function(e){var t=e.split("-"),n=t[0],a=t[1],r=t[2];"1"===n?this.handleEditSection(a,r):"2"===n?this.handleOpenDrawer(a,r):this.handleDelSection(a,r)},handleEditSection:function(e,t){var n=this,a=this.course.chapters[e],r=a.sections[t];this.$prompt("请编辑节名称",a.name,{confirmButtonText:"确定",cancelButtonText:"取消",inputPattern:/\S/,inputErrorMessage:"输入不能为空",inputValue:r.name}).then((function(e){var t=e.value;n.loading=!0,Fe.edit(r.id,{name:t}).then((function(){n.$message.success("编辑节成功"),r.name=t})).finally((function(){n.loading=!1}))}))},handleDelSection:function(e,t){var n=this.course.chapters[e],a=n.sections[t].name,r=n.sections[t].id;this.$confirm("确认删除「"+a+"」吗？").then((function(){return Fe.destory(r)})).then((function(){n.sections.splice(t,1)}))},handleChapterSort:function(){var e=this,t=this.course.chapters.map((function(e){return e.id}));Me.sort({chapters:t}).then((function(){e.$message.success("章节排序成功")}))},handleSectionSort:function(e,t){var n=this;if(e.added||e.moved){var a=this.course.chapters[t].sections.map((function(e){return e.id})),r=this.course.chapters[t].id;Fe.sort({sections:a,chapter_id:r}).then((function(){n.$message.success("节排序成功")}))}},handleOpenDrawer:function(e,t){var n=this,a=this.course.chapters[e],r=a.sections[t].name,s=a.sections[t].id;this.drawerVisible=!0,this.drawerTitle=r,this.loading=!0,Fe.show(s).then((function(e){n.sectionInfo=e.section})).finally((function(){n.loading=!1}))},handleSaveSection:function(){var e=this,t=this.sectionInfo,n=t.id,a=t.name,r=t.video_url,s=t.content;this.loading=!0,Fe.edit(n,{name:a,video_url:r,content:s}).then((function(){e.$message.success("保存成功"),e.drawerVisible=!1})).finally((function(){e.loading=!1}))},handleCloseDrawer:function(e){this.$confirm("确认关闭？").then((function(){e()})).catch((function(){}))},handleImgAdd:function(e,t){var n=this;ke.start(t).then((function(t){n.$refs.md.$img2Url(e,t.imageUrl)}))}},components:{draggable:Be.a,mavonEditor:ze["mavonEditor"]}},Ne=Ae,Ue=(n("f432"),Object(i["a"])(Ne,Ie,Pe,!1,null,"5730bfc5",null)),qe=Ue.exports,Le=[{path:"/",name:"Root",component:G,redirect:{name:"Dashboard"},children:[{path:"/dashboard",name:"Dashboard",redirect:{name:"Course"},meta:{}},{path:"/course",name:"CoursesRoot",component:{render:function(e){return e("router-view")}},redirect:{name:"Course"},meta:{nav:{icon:"el-icon-collection",title:"课程"},breadcrumb:{title:"课程",replace:!0}},children:[{path:"/course",name:"Course",component:me},{path:"/course/create",name:"CourseCreate",component:Oe,meta:{breadcrumb:{title:"创建"}}},{path:"/course/:id/edit",name:"CourseEdit",component:qe,meta:{breadcrumb:{title:"编辑"}}}]}]},{path:"/login",name:"login",component:_e,meta:{breadcrumb:{title:"登陆页面"}}}],He=Le,Je=n("323e"),Ge=n.n(Je);n("a5d8");a["default"].use(d["a"]);var Ke=new d["a"]({base:"",routes:He});Ke.beforeEach(function(){var e=Object(u["a"])(regeneratorRuntime.mark((function e(t,n,a){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:Ge.a.start(),a();case 2:case"end":return e.stop()}}),e)})));return function(t,n,a){return e.apply(this,arguments)}}()),Ke.afterEach((function(e,t){Ge.a.done()}));var Qe=Ke,We=n("2f62");a["default"].use(We["a"]);var Xe=new We["a"].Store({state:{},mutations:{},actions:{},modules:{}});n("0fae"),n("add7");a["default"].use(ee.a),a["default"].config.productionTip=!1,new a["default"]({router:Qe,store:Xe,render:function(e){return e(l)}}).$mount("#app")},"594e":function(e,t,n){"use strict";var a=n("c56d"),r=n.n(a);r.a},6758:function(e,t,n){"use strict";var a=n("2f5d"),r=n.n(a);r.a},"68e3":function(e,t,n){"use strict";var a=n("55f0"),r=n.n(a);r.a},7198:function(e,t,n){"use strict";var a=n("b62c"),r=n.n(a);r.a},"759a":function(e,t,n){},"908f":function(e,t,n){},9297:function(e,t,n){"use strict";var a=n("759a"),r=n.n(a);r.a},"9b19":function(e,t,n){e.exports=n.p+"img/logo.f43b9a47.svg"},"9b22":function(e,t,n){"use strict";var a=n("908f"),r=n.n(a);r.a},"9f55":function(e,t,n){"use strict";var a=n("ed02"),r=n.n(a);r.a},add7:function(e,t,n){},b62c:function(e,t,n){},c56d:function(e,t,n){},ca0b:function(e,t,n){"use strict";var a=n("0d1a"),r=n.n(a);r.a},cf05:function(e,t,n){e.exports=n.p+"img/logo.82b9c7a5.png"},e0eb:function(e,t,n){},ed02:function(e,t,n){},f432:function(e,t,n){"use strict";var a=n("e0eb"),r=n.n(a);r.a}});
//# sourceMappingURL=app.5d5a0ae0.js.map