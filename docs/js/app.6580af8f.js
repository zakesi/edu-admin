(function(t){function e(e){for(var i,r,o=e[0],c=e[1],l=e[2],d=0,m=[];d<o.length;d++)r=o[d],Object.prototype.hasOwnProperty.call(n,r)&&n[r]&&m.push(n[r][0]),n[r]=0;for(i in c)Object.prototype.hasOwnProperty.call(c,i)&&(t[i]=c[i]);u&&u(e);while(m.length)m.shift()();return s.push.apply(s,l||[]),a()}function a(){for(var t,e=0;e<s.length;e++){for(var a=s[e],i=!0,o=1;o<a.length;o++){var c=a[o];0!==n[c]&&(i=!1)}i&&(s.splice(e--,1),t=r(r.s=a[0]))}return t}var i={},n={app:0},s=[];function r(e){if(i[e])return i[e].exports;var a=i[e]={i:e,l:!1,exports:{}};return t[e].call(a.exports,a,a.exports,r),a.l=!0,a.exports}r.m=t,r.c=i,r.d=function(t,e,a){r.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:a})},r.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},r.t=function(t,e){if(1&e&&(t=r(t)),8&e)return t;if(4&e&&"object"===typeof t&&t&&t.__esModule)return t;var a=Object.create(null);if(r.r(a),Object.defineProperty(a,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var i in t)r.d(a,i,function(e){return t[e]}.bind(null,i));return a},r.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return r.d(e,"a",e),e},r.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},r.p="";var o=window["webpackJsonp"]=window["webpackJsonp"]||[],c=o.push.bind(o);o.push=e,o=o.slice();for(var l=0;l<o.length;l++)e(o[l]);var u=c;s.push([0,"chunk-vendors"]),a()})({0:function(t,e,a){t.exports=a("56d7")},"092f":function(t,e,a){},"0d1a":function(t,e,a){},2169:function(t,e,a){"use strict";var i=a("092f"),n=a.n(i);n.a},"2f5d":function(t,e,a){},"3b41":function(t,e,a){},4701:function(t,e,a){"use strict";var i=a("4885"),n=a.n(i);n.a},4885:function(t,e,a){},"55f0":function(t,e,a){},"56d7":function(t,e,a){"use strict";a.r(e);a("e260"),a("e6cf"),a("cca6"),a("a79d");var i=a("2b0e"),n=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{attrs:{id:"app"}},[a("router-view")],1)},s=[],r=a("2877"),o={},c=Object(r["a"])(o,n,s,!1,null,null,null),l=c.exports,u=(a("96cf"),a("1da1")),d=a("8c4f"),m=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"page-wrapper"},[a("Sider",{staticClass:"page-sider"}),a("div",{staticClass:"page-mainer"},[a("Header",{staticClass:"page-header"}),a("div",{staticClass:"page-body"},[a("router-view")],1),t._e()],1)],1)},p=[],h=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"header-section"},[a("div",{staticClass:"header-hd"},[a("Breadcrumb")],1),a("div",{staticClass:"header-bd"}),a("div",{staticClass:"header-ft"},[t._m(0),a("el-dropdown",{staticStyle:{height:"100%"},on:{command:t.handleCommand}},[a("div",{staticClass:"bar-info-container"},[a("i",{staticClass:"el-icon-user-solid userInfo-avatar"}),a("span",{staticClass:"userInfo-name"},[t._v(t._s(t.userInfo.name))]),a("i",{staticClass:"el-icon-arrow-down el-icon--right"})]),a("el-dropdown-menu",{attrs:{slot:"dropdown"},slot:"dropdown"},[a("el-dropdown-item",{attrs:{command:"Logout",icon:"el-icon-video-pause"}},[t._v("退出")])],1)],1)],1)])},f=[function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"bar-info-container"},[a("i",{staticClass:"el-icon-question"})])}],g=function(){var t=this,e=t.$createElement,a=t._self._c||e;return t.breadcrumbValue.length?a("div",{staticClass:"breadcrumb-section"},[t.breadcrumbValue.length?a("el-breadcrumb",{staticClass:"breadcrumb-list"},[t._l(t.breadcrumbValue,(function(e){return[e.to?a("el-breadcrumb-item",{key:e.name,staticClass:"breadcrumb-item",attrs:{replace:!0,to:e.to}},[t._v(t._s(e.name))]):a("el-breadcrumb-item",{key:e.name,staticClass:"breadcrumb-item"},[t._v(t._s(e.name))])]}))],2):t._e()],1):t._e()},v=[],b=(a("4de4"),a("d81d"),a("b0c0"),a("ac1f"),a("5319"),{props:{breadcrumb:{type:Array,default:function(){return[]}}},computed:{breadcrumbValue:function(){var t=this.breadcrumb;return t.length?t:this.$route.matched.filter((function(t){return t.meta&&t.meta.breadcrumb})).map((function(t){return{name:t.meta.breadcrumb.title,to:t.meta.breadcrumb.replace?{name:t.name}:void 0}}))}}}),_=b,y=(a("ca0b"),Object(r["a"])(_,g,v,!1,null,"897365ae",null)),C=y.exports,w={data:function(){return{userInfo:{}}},created:function(){},methods:{handleCommand:function(t){var e="handle".concat(t);this[e]()},handleLogout:function(){}},components:{Breadcrumb:C}},z=w,x=(a("68e3"),Object(r["a"])(z,h,f,!1,null,"1b3800f2",null)),$=x.exports,k=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("footer",{staticClass:"footer-section"},[t._v(" Copyright © 2020 ❤️ 极客学院体验技术部出品 ")])},E=[],P={},S=P,j=(a("2169"),Object(r["a"])(S,k,E,!1,null,null,null)),F=j.exports,I=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"sider-section"},[t._m(0),a("div",{staticClass:"sider-menu-body"},[a("el-scrollbar",{staticClass:"scrollbar-section"},[a("Menu",{staticClass:"menu-section"})],1)],1)])},O=[function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"sider-menu-header logo-section"},[i("img",{staticClass:"logo-img",attrs:{src:a("9b19"),alt:"logo"}})])}],D=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("el-menu",{attrs:{"default-active":t.path,router:!0}},[t._l(t.filterRoutes,(function(e){return[t.hasNavChildren(e)?a("el-submenu",{key:e.path,attrs:{index:e.path}},[a("template",{slot:"title"},[e.meta.nav.icon?a("i",{class:e.meta.nav.icon}):t._e(),a("span",{attrs:{slot:"title"},slot:"title"},[t._v(t._s(e.meta.nav.title))])]),t._l(e.children,(function(e){return a("el-menu-item",{key:e.path,attrs:{index:e.path,route:{path:e.path},id:e.name}},[e.meta.nav.icon?a("i",{class:e.meta.nav.icon}):t._e(),a("span",{attrs:{slot:"title"},slot:"title"},[t._v(t._s(e.meta.nav.title))])])}))],2):a("el-menu-item",{key:e.path,attrs:{disabled:e.disabled,index:e.path,route:{path:e.path},id:e.name}},[e.meta.nav.icon?a("i",{class:e.meta.nav.icon}):t._e(),a("span",{attrs:{slot:"title"},slot:"title"},[t._v(t._s(e.meta.nav.title))])])]}))],2)},T=[],B=(a("4160"),a("45fc"),a("159b"),{data:function(){return{path:this.$route.path,filterRoutes:[],PermissionArr:[]}},created:function(){this.getPermissions()},watch:{$route:function(t){this.path=t.path}},methods:{getPermissions:function(){this.getRoutes()},getRoutes:function(){this.filterRoutes=this.filterNavigator(de)},filterNavigator:function(t){var e=this,a=[];return t.forEach((function(t){if(t.meta&&t.meta.nav){var i={path:t.path,name:t.name,meta:t.meta};t.children&&(i.children=e.filterNavigator(t.children)),a.push(i)}else t.children&&e.filterNavigator(t.children).forEach((function(t){return a.push(t)}))})),a},hasNavChildren:function(t){var e=t.children||[];return e.some((function(t){return t.meta&&t.meta.nav}))}}}),V=B,U=(a("7198"),Object(r["a"])(V,D,T,!1,null,null,null)),M=U.exports,N={components:{Menu:M}},R=N,A=(a("9297"),Object(r["a"])(R,I,O,!1,null,null,null)),Z=A.exports,L={data:function(){return{}},components:{Header:$,Footer:F,Sider:Z}},q=L,H=(a("9f55"),Object(r["a"])(q,m,p,!1,null,null,null)),J=H.exports,G=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"login-page"},[i("div",{staticClass:"page-content"},[i("img",{staticClass:"page-logo",attrs:{src:a("cf05")}}),i("div",{staticClass:"page-form_container"},[i("el-form",{ref:"passwordFrom",staticStyle:{width:"340px"},attrs:{"status-icon":"",rules:t.passwordRules,model:t.passwordFrom}},[i("span",[t._v("账号密码登陆")]),i("el-form-item",{attrs:{prop:"phone"}},[i("el-input",{staticClass:"phone-input",attrs:{type:"number","prefix-icon":"el-icon-mobile-phone",placeholder:"请输手机号",autocomplete:"off"},model:{value:t.passwordFrom.phone,callback:function(e){t.$set(t.passwordFrom,"phone",e)},expression:"passwordFrom.phone"}})],1),i("el-form-item",{attrs:{prop:"password"}},[i("el-input",{attrs:{type:"password","prefix-icon":"el-icon-lock",placeholder:"请输入密码",autocomplete:"off","show-password":""},model:{value:t.passwordFrom.password,callback:function(e){t.$set(t.passwordFrom,"password",e)},expression:"passwordFrom.password"}})],1),i("el-form-item",[i("el-button",{staticClass:"login-btn",attrs:{type:"primary"},on:{click:t.login}},[t._v("登录")])],1)],1)],1)])])},K=[],Q={data:function(){return{passwordFrom:{phone:"",password:""},passwordRules:{phone:[{required:!0,message:"请输入手机号",trigger:"blur"},{pattern:/^1[3456789]\d{9}$/,message:"目前只支持中国大陆的手机号码",trigger:"blur"}],password:[{required:!0,message:"请输入密码",trigger:"blur"}]}}},created:function(){},methods:{login:function(){var t=this;this.$refs["passwordFrom"].validate((function(e){e&&t.$router.push({path:"/dashboard"})}))}}},W=Q,X=(a("594e"),Object(r["a"])(W,G,K,!1,null,"f47376a6",null)),Y=X.exports,tt=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{directives:[{name:"loading",rawName:"v-loading",value:t.loading,expression:"loading"}],staticClass:"page-content"},[a("router-link",{attrs:{to:{name:"CourseCreate"}}},[a("el-button",{attrs:{size:"medium",type:"primary",plain:""}},[t._v("创建课程")])],1),a("el-table",{staticClass:"mt-20",attrs:{data:t.courses,size:"medium"}},[a("el-table-column",{attrs:{prop:"id",label:"id",width:"80px"}}),a("el-table-column",{attrs:{prop:"name",label:"名称"}}),a("el-table-column",{attrs:{prop:"short_name",label:"副标题"}}),a("el-table-column",{attrs:{prop:"status",label:"状态",width:"120px",align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("el-tag",{attrs:{type:e.row.status?"success":"danger",size:"small"}},[t._v(" "+t._s(e.row.status?"已完成":"未完成")+" ")])]}}])}),a("el-table-column",{attrs:{label:"操作",width:"180px",align:"right"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("el-dropdown",{attrs:{trigger:"hover"},on:{command:t.handleCommand}},[a("span",{staticClass:"icon-ctrl"},[a("i",{staticClass:"el-icon-more"})]),a("el-dropdown-menu",{attrs:{slot:"dropdown"},slot:"dropdown"},[a("el-dropdown-item",{attrs:{command:"edit-"+e.row.id+"-"+e.$index}},[t._v("编辑")]),a("el-dropdown-item",{attrs:{command:"delete-"+e.row.id+"-"+e.$index}},[t._v("删除")])],1)],1)]}}])})],1),a("el-pagination",{staticClass:"mt-20",attrs:{background:"",layout:"total, prev, pager, next, jumper","current-page":t.pagination.currentPage,"page-size":t.pagination.pageSize,total:t.pagination.total,"hide-on-single-page":!0},on:{"current-change":t.getData,"update:currentPage":function(e){return t.$set(t.pagination,"currentPage",e)},"update:current-page":function(e){return t.$set(t.pagination,"currentPage",e)}}})],1)},et=[],at=(a("a434"),a("d3b7"),a("1276"),a("5530")),it=a("bc3a"),nt=a.n(it),st=a("5c96"),rt=a.n(st),ot=nt.a.create();ot.defaults.timeout=2e3,ot.interceptors.request.use((function(t){var e=Object(at["a"])({},t),a="xxx";return a&&(e["headers"]["Authorization"]="Bearer "+a),e}),(function(t){return Promise.reject(t)}));var ct=function(t){var e=t.response,a=e?e.status:408;if(e){var i=e.data,n=i.message||"服务器发送错误，请稍后再试";401===a?st["Message"].error("登录状态过期，请重新登录"):403===a?st["Message"].error("没有权限，联系管理员"):st["Message"].error(n)}else st["Message"].error("网络超时")},lt=function(t){switch(!0){case 0===t.data.error_code:return t.data.data;case 1===t.data.error_code:return st["Message"].error(t.data.message),Promise.reject(t.data);default:return t.data}},ut=function(t){return ct(t),Promise.reject(t)};ot.interceptors.response.use(lt,ut);var dt={post:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return ot.post(t,e,a)},put:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return ot.put(t,e,a)},get:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},i=Object.assign({params:e},a);return ot.get(t,i)},delete:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},i=Object.assign({params:e},a);return ot.delete(t,i)}},mt="https://neon.jiker.vip",pt={qiniuToken:"".concat(mt,"/api/qiniu/token"),course:"".concat(mt,"/api/course"),chapter:"".concat(mt,"/api/chapter"),section:"".concat(mt,"/api/section"),courseItem:function(t){return"".concat(mt,"/api/course/").concat(t)},chapterItem:function(t){return"".concat(mt,"/api/chapter/").concat(t)},sectionItem:function(t){return"".concat(mt,"/api/section/").concat(t)},chapterSort:"".concat(mt,"/api/chapter/sort"),sectionSort:"".concat(mt,"/api/section/sort"),zhiye:"".concat(mt,"/api/zhiye"),zhiyeItem:function(t){return"".concat(mt,"/api/zhiye/").concat(t)},zhiyePath:"".concat(mt,"/api/zhiye/path"),zhiyePathItem:function(t){return"".concat(mt,"/api/zhiye/path/").concat(t)},zhiyePathSort:"".concat(mt,"/api/zhiye/path/sort"),zhiyeCourse:"".concat(mt,"/api/zhiye/course"),zhiyeCourseItem:function(t){return"".concat(mt,"/api/zhiye/course/").concat(t)},zhiyeCourseSort:"".concat(mt,"/api/zhiye/course/sort")},ht={create:function(t){return dt.post(pt.course,t)},index:function(t){return dt.get(pt.course,t)},show:function(t){return dt.get(pt.courseItem(t))},edit:function(t,e){return dt.put(pt.courseItem(t),e)},destory:function(t){return dt.delete(pt.courseItem(t))}},ft=ht,gt={data:function(){return{loading:!0,courses:[],pagination:{currentPage:1,pageSize:10,total:0}}},created:function(){this.getData()},methods:{getData:function(){var t=this,e={page_size:this.pagination.pageSize,current_page:this.pagination.currentPage};this.loading=!0,ft.index(e).then((function(e){t.courses=e.rows,t.pagination.currentPage=e.pagination.current_page,t.pagination.pageSize=e.pagination.page_size,t.pagination.total=e.pagination.total})).finally((function(){t.loading=!1}))},handleCommand:function(t){var e=t.split("-")[0],a=t.split("-")[1],i=t.split("-")[2];"edit"===e?this.$router.push({name:"CourseEdit",params:{id:a}}):"delete"===e&&this.delCourses(i)},delCourses:function(t){var e=this,a=this.courses[t].id;this.$confirm("确认删除吗？").then((function(){return ft.destory(a)})).then((function(){e.$message.success("删除课程成功"),e.courses.splice(t,1)})).catch((function(){}))}}},vt=gt,bt=(a("9b22"),Object(r["a"])(vt,tt,et,!1,null,null,null)),_t=bt.exports,yt=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"page-content"},[a("div",{staticClass:"c-650"},[t._m(0),a("el-form",{attrs:{"label-position":"top","label-width":"80px",size:"mini"}},[a("el-row",{attrs:{gutter:20}},[a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:"课程名称："}},[a("el-input",{model:{value:t.course.name,callback:function(e){t.$set(t.course,"name",e)},expression:"course.name"}})],1)],1),a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:"副标题："}},[a("el-input",{model:{value:t.course.short_name,callback:function(e){t.$set(t.course,"short_name",e)},expression:"course.short_name"}})],1)],1)],1),a("el-form-item",{attrs:{label:"课程提示："}},[a("el-input",{model:{value:t.course.tips,callback:function(e){t.$set(t.course,"tips",e)},expression:"course.tips"}})],1),a("el-form-item",{attrs:{label:"课程描述："}},[a("el-input",{attrs:{type:"textarea"},model:{value:t.course.description,callback:function(e){t.$set(t.course,"description",e)},expression:"course.description"}})],1),a("el-form-item",{attrs:{label:"课程封面："}},[a("el-upload",{ref:"upload",staticClass:"course-image-upload",attrs:{action:"",limit:1,"file-list":t.fileList,"before-upload":t.handleBeforeUpload,accept:"image/jpg, image/jpeg, image/png"}},[t.course.image_url?t._e():a("i",{staticClass:"el-icon-plus el-uploader__icon"}),t.course.image_url?a("img",{staticClass:"course-image-upload",attrs:{src:t.course.image_url}}):t._e()])],1),a("el-form-item",[a("el-button",{attrs:{size:"medium",type:"primary",plain:""},on:{click:t.handleSubmit}},[t._v("创建课程")])],1)],1)],1)])},Ct=[function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"sub-header"},[a("div",{staticClass:"sub-header-title"},[t._v("基本信息")])])}],wt=(a("99af"),a("cea2")),zt="_for_neon_project/",xt={token:function(){return dt.get(pt.qiniuToken)},upload:function(t){var e=t.file,a=t.token,i=t.mimeType,n=void 0===i?null:i,s=t.params,r=void 0===s?{}:s,o=t.progressCallback;return new Promise((function(t,i){var s=e.name,c=zt+Date.now()+"_"+e.name,l={useCdnDomain:!0},u={fname:s,params:r,mimeType:n},d=wt["upload"](e,c,a,u,l);d.subscribe({next:function(t){"function"===typeof o&&o(t)},error:function(t){i(t)},complete:function(e){t(e)}})}))},start:function(){var t=Object(u["a"])(regeneratorRuntime.mark((function t(e){var a,i,n,s,r;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,xt.token();case 2:return a=t.sent,i=a.token,n=a.domain,t.next=7,xt.upload({file:e,token:i});case 7:return s=t.sent,r="https://".concat(n,"/").concat(s.key),t.abrupt("return",{imageUrl:r});case 10:case"end":return t.stop()}}),t)})));function e(e){return t.apply(this,arguments)}return e}()},$t=xt,kt={data:function(){return{fileList:[],course:{name:"",short_name:"",tips:"",description:"",image_url:"",status:0}}},methods:{handleSubmit:function(){var t=this;this.loading=!0,ft.create(this.course).then((function(e){t.$message.success("创建课程成功"),t.$router.push({name:"CourseEdit",params:{id:e.id}})})).finally((function(){t.loading=!1}))},handleBeforeUpload:function(t){var e=this;return $t.start(t).then((function(t){e.course.image_url=t.imageUrl})),Promise.reject({})}}},Et=kt,Pt=(a("6758"),Object(r["a"])(Et,yt,Ct,!1,null,"2182ba00",null)),St=Pt.exports,jt=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{directives:[{name:"loading",rawName:"v-loading",value:t.loading,expression:"loading"}],staticClass:"page-content"},[a("el-row",{attrs:{gutter:60}},[a("el-col",{attrs:{lg:12}},[a("div",{staticClass:"sub-header"},[a("div",{staticClass:"sub-header-title"},[t._v("基本信息")]),a("div",{staticClass:"sub-header-fd"},[a("el-button",{attrs:{size:"medium",type:t.isEdit?"primary":""},on:{click:t.handleEdit}},[t._v(" "+t._s(t.isEdit?"保存":"修改")+" ")])],1)]),a("el-form",{attrs:{"label-position":"top",size:"mini",model:t.course}},[a("el-row",{attrs:{gutter:20}},[a("el-col",{attrs:{lg:12}},[a("el-form-item",{attrs:{label:"课程名称："}},[a("el-input",{attrs:{disabled:!t.isEdit},model:{value:t.course.name,callback:function(e){t.$set(t.course,"name",e)},expression:"course.name"}})],1)],1),a("el-col",{attrs:{lg:12}},[a("el-form-item",{attrs:{label:"副标题："}},[a("el-input",{attrs:{disabled:!t.isEdit},model:{value:t.course.short_name,callback:function(e){t.$set(t.course,"short_name",e)},expression:"course.short_name"}})],1)],1)],1),a("el-form-item",{attrs:{label:"课程提示："}},[a("el-input",{attrs:{disabled:!t.isEdit},model:{value:t.course.tips,callback:function(e){t.$set(t.course,"tips",e)},expression:"course.tips"}})],1),a("el-form-item",{attrs:{label:"课程描述："}},[a("el-input",{attrs:{type:"textarea",disabled:!t.isEdit},model:{value:t.course.description,callback:function(e){t.$set(t.course,"description",e)},expression:"course.description"}})],1),a("el-row",{attrs:{gutter:20}},[a("el-col",{attrs:{lg:12}},[a("el-form-item",{attrs:{label:"课程封面："}},[t.isEdit?a("el-upload",{ref:"upload",staticClass:"course-image-upload",attrs:{action:"",limit:1,"file-list":t.fileList,"before-upload":t.handleBeforeUpload,accept:"image/jpg, image/jpeg, image/png"}},[t.course.image_url?t._e():a("i",{staticClass:"el-icon-plus el-uploader__icon"}),t.course.image_url?a("img",{staticClass:"course-image-upload",attrs:{src:t.course.image_url}}):t._e()]):t._e(),!t.isEdit&&t.course.image_url?a("img",{staticClass:"course-image-upload",attrs:{src:t.course.image_url}}):t._e(),t.isEdit||t.course.image_url?t._e():a("span",[t._v("无")])],1)],1),a("el-col",{attrs:{lg:12}},[a("el-form-item",{attrs:{label:"课程状态："}},[a("el-switch",{attrs:{disabled:!t.isEdit,"active-value":1,"inactive-value":0},model:{value:t.course.status,callback:function(e){t.$set(t.course,"status",e)},expression:"course.status"}})],1)],1)],1)],1)],1),a("el-col",{attrs:{lg:12}},[a("div",{staticClass:"sub-header"},[a("div",{staticClass:"sub-header-title"},[t._v("课程章节")])]),a("div",{staticClass:"chapter-container"},[a("draggable",{attrs:{group:"chapter",handle:".chapter-item-draggable"},on:{change:t.handleChapterSort},model:{value:t.course.chapters,callback:function(e){t.$set(t.course,"chapters",e)},expression:"course.chapters"}},t._l(t.course.chapters,(function(e,i){return a("div",{key:e.id,staticClass:"chapter-item"},[a("div",{staticClass:"chapter-item-title"},[a("i",{staticClass:"el-icon-rank chapter-item-draggable"}),a("span",[t._v(t._s(e.name))]),a("div",{staticClass:"chapter-item-ctrl"},[a("el-dropdown",{attrs:{trigger:"hover"},on:{command:t.handleChapter}},[a("span",{staticClass:"icon-ctrl"},[a("i",{staticClass:"el-icon-more"})]),a("el-dropdown-menu",{attrs:{slot:"dropdown"},slot:"dropdown"},[a("el-dropdown-item",{attrs:{command:"1-"+i}},[t._v("编辑")]),a("el-dropdown-item",{attrs:{command:"0-"+i}},[t._v("删除")])],1)],1)],1)]),a("div",{staticClass:"chapter-item-section"},[a("draggable",{attrs:{handle:".section-item-draggable",group:"section"},on:{change:function(e){return t.handleSectionSort(e,i)}},model:{value:e.sections,callback:function(a){t.$set(e,"sections",a)},expression:"chapter.sections"}},t._l(e.sections,(function(e,n){return a("div",{key:e.id,staticClass:"section-item"},[a("div",{staticClass:"section-item-text"},[a("i",{staticClass:"el-icon-rank section-item-draggable"}),a("span",[t._v(t._s(e.name))]),a("div",{staticClass:"section-item-ctrl"},[a("el-dropdown",{attrs:{trigger:"hover"},on:{command:t.handleSection}},[a("span",{staticClass:"icon-ctrl"},[a("i",{staticClass:"el-icon-more"})]),a("el-dropdown-menu",{attrs:{slot:"dropdown"},slot:"dropdown"},[a("el-dropdown-item",{attrs:{command:"2-"+i+"-"+n}},[t._v("内容")]),a("el-dropdown-item",{attrs:{command:"1-"+i+"-"+n}},[t._v("编辑")]),a("el-dropdown-item",{attrs:{command:"0-"+i+"-"+n}},[t._v("删除")])],1)],1)],1)])])})),0),a("div",{staticClass:"section-item",on:{click:function(e){return t.handleAddSection(i)}}},[a("div",{staticClass:"section-item-create"},[t._v(" 添加节 "),a("i",{staticClass:"el-icon-circle-plus"})])])],1)])})),0),a("div",{staticClass:"chapter-item-create",on:{click:t.handleAddChapter}},[t._v(" 添加章 "),a("i",{staticClass:"el-icon-circle-plus"})])],1)])],1),a("el-drawer",{attrs:{visible:t.drawerVisible,direction:"rtl",size:"50%","before-close":t.handleCloseDrawer},on:{"update:visible":function(e){t.drawerVisible=e}}},[a("div",{staticClass:"section-content"},[a("el-form",{attrs:{"label-position":"top",size:"mini",model:t.course}},[a("el-form-item",{attrs:{label:"小节名称："}},[a("div",{staticClass:"section-title"},[t._v(t._s(t.sectionInfo.name))])]),a("el-form-item",{attrs:{label:"视频地址："}},[a("el-input",{model:{value:t.sectionInfo.video_url,callback:function(e){t.$set(t.sectionInfo,"video_url",e)},expression:"sectionInfo.video_url"}})],1),a("el-form-item",{attrs:{label:"课程内容："}},[a("mavon-editor",{ref:"md",staticClass:"md",attrs:{toolbars:t.markdownOption,subfield:!1},on:{imgAdd:t.handleImgAdd},model:{value:t.sectionInfo.content,callback:function(e){t.$set(t.sectionInfo,"content",e)},expression:"sectionInfo.content"}})],1),a("el-form-item",[a("el-button",{attrs:{size:"medium",type:"primary"},on:{click:t.handleSaveSection}},[t._v("保存")])],1)],1)],1)])],1)},Ft=[],It=(a("a9e3"),a("b2d8")),Ot=(a("64e1"),a("310e")),Dt=a.n(Ot),Tt={create:function(t){return dt.post(pt.chapter,t)},edit:function(t,e){return dt.put(pt.chapterItem(t),e)},destory:function(t){return dt.delete(pt.chapterItem(t))},sort:function(t){return dt.post(pt.chapterSort,t)}},Bt=Tt,Vt={create:function(t){return dt.post(pt.section,t)},edit:function(t,e){return dt.put(pt.sectionItem(t),e)},destory:function(t){return dt.delete(pt.sectionItem(t))},sort:function(t){return dt.post(pt.sectionSort,t)},show:function(t){return dt.get(pt.sectionItem(t))}},Ut=Vt,Mt={bold:!0,mark:!0,quote:!0,ol:!0,ul:!0,link:!0,imagelink:!0,code:!0,table:!0},Nt={data:function(){return{loading:!0,markdownOption:Mt,isEdit:!1,drawerVisible:!1,fileList:[],course:{id:null,name:"",short_name:"",tips:"",description:"",status:0,image_url:"",chapters:[]},sectionInfo:{name:"",video_url:"",content:"",id:null}}},created:function(){this.getData()},methods:{getData:function(){var t=this,e=this.$route.params.id;ft.show(e).then((function(e){t.course=e.course})).finally((function(){t.loading=!1}))},handleEdit:function(){var t=this,e=this.$route.params.id;this.isEdit=!this.isEdit,this.isEdit||(this.loading=!0,ft.edit(e,Object(at["a"])({},this.course)).then((function(){t.$message.success("编辑成功")})).finally((function(){t.loading=!1})))},handleBeforeUpload:function(t){var e=this;return $t.start(t).then((function(t){e.course.image_url=t.imageUrl})),Promise.reject({})},handleAddChapter:function(){var t=this,e=Number(this.$route.params.id),a=this.course.chapters.length+1;this.$prompt("请输入章节名称","新增章",{confirmButtonText:"确定",cancelButtonText:"取消",inputPattern:/\S/,inputErrorMessage:"输入不能为空"}).then((function(i){var n=i.value;t.loading=!0,Bt.create({sort:a,course_id:e,name:n}).then((function(e){t.$message.success("添加章节成功"),t.course.chapters.push({id:e.id,name:n,sections:[],sort:a})})).finally((function(){t.loading=!1}))}))},handleAddSection:function(t){var e=this,a=this.course.chapters[t],i=a.sections.length+1;this.$prompt("请输入节名称",a.name,{confirmButtonText:"确定",cancelButtonText:"取消",inputPattern:/\S/,inputErrorMessage:"输入不能为空"}).then((function(n){var s=n.value;e.loading=!0,Ut.create({sort:i,chapter_id:a.id,name:s}).then((function(a){e.$message.success("添加节成功"),e.course.chapters[t].sections.push({id:a.id,name:s,sort:i})})).finally((function(){e.loading=!1}))}))},handleChapter:function(t){var e=this,a=t.split("-"),i=a[0],n=a[1],s=this.course.chapters[n];"1"===i?this.$prompt("请编辑章名称","编辑章",{confirmButtonText:"确定",cancelButtonText:"取消",inputPattern:/\S/,inputErrorMessage:"输入不能为空",inputValue:s.name}).then((function(t){var a=t.value;e.loading=!0,Bt.edit(s.id,{name:a}).then((function(){e.$message.success("编辑章节成功"),s.name=a})).finally((function(){e.loading=!1}))})):(this.loading=!0,this.$confirm("确认删除「"+s.name+"」吗？").then((function(){return Bt.destory(s.id)})).then((function(){e.course.chapters.splice(n,1)})).finally((function(){e.loading=!1})))},handleSection:function(t){var e=t.split("-"),a=e[0],i=e[1],n=e[2];"1"===a?this.handleEditSection(i,n):"2"===a?this.handleOpenDrawer(i,n):this.handleDelSection(i,n)},handleEditSection:function(t,e){var a=this,i=this.course.chapters[t],n=i.sections[e];this.$prompt("请编辑节名称",i.name,{confirmButtonText:"确定",cancelButtonText:"取消",inputPattern:/\S/,inputErrorMessage:"输入不能为空",inputValue:n.name}).then((function(t){var e=t.value;a.loading=!0,Ut.edit(n.id,{name:e}).then((function(){a.$message.success("编辑节成功"),n.name=e})).finally((function(){a.loading=!1}))}))},handleDelSection:function(t,e){var a=this.course.chapters[t],i=a.sections[e].name,n=a.sections[e].id;this.$confirm("确认删除「"+i+"」吗？").then((function(){return Ut.destory(n)})).then((function(){a.sections.splice(e,1)}))},handleChapterSort:function(){var t=this,e=this.course.chapters.map((function(t){return t.id}));Bt.sort({chapters:e}).then((function(){t.$message.success("章节排序成功")}))},handleSectionSort:function(t,e){var a=this;if(t.added||t.moved){var i=this.course.chapters[e].sections.map((function(t){return t.id})),n=this.course.chapters[e].id;Ut.sort({sections:i,chapter_id:n}).then((function(){a.$message.success("节排序成功")}))}},handleOpenDrawer:function(t,e){var a=this,i=this.course.chapters[t],n=i.sections[e].name,s=i.sections[e].id;this.drawerVisible=!0,this.drawerTitle=n,this.loading=!0,Ut.show(s).then((function(t){a.sectionInfo=t.section})).finally((function(){a.loading=!1}))},handleSaveSection:function(){var t=this,e=this.sectionInfo,a=e.id,i=e.name,n=e.video_url,s=e.content;this.loading=!0,Ut.edit(a,{name:i,video_url:n,content:s}).then((function(){t.$message.success("保存成功"),t.drawerVisible=!1})).finally((function(){t.loading=!1}))},handleCloseDrawer:function(t){this.$confirm("确认关闭？").then((function(){t()})).catch((function(){}))},handleImgAdd:function(t,e){var a=this;$t.start(e).then((function(e){a.$refs.md.$img2Url(t,e.imageUrl)}))}},components:{draggable:Dt.a,mavonEditor:It["mavonEditor"]}},Rt=Nt,At=(a("f432"),Object(r["a"])(Rt,jt,Ft,!1,null,"5730bfc5",null)),Zt=At.exports,Lt=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{directives:[{name:"loading",rawName:"v-loading",value:t.loading,expression:"loading"}],staticClass:"page-content"},[a("router-link",{attrs:{to:{name:"ZhiyeCreate"}}},[a("el-button",{attrs:{size:"medium",type:"primary",plain:""}},[t._v("创建职业")])],1),a("el-table",{staticClass:"mt-20",attrs:{data:t.zhiyes,size:"medium"}},[a("el-table-column",{attrs:{prop:"id",label:"id",width:"80px"}}),a("el-table-column",{attrs:{prop:"name",label:"名称"}}),a("el-table-column",{attrs:{prop:"status",label:"状态",width:"120px",align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("el-tag",{attrs:{type:e.row.status?"success":"danger",size:"small"}},[t._v(" "+t._s(e.row.status?"已完成":"未完成")+" ")])]}}])}),a("el-table-column",{attrs:{label:"操作",width:"180px",align:"right"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("el-dropdown",{attrs:{trigger:"hover"},on:{command:t.handleCommand}},[a("span",{staticClass:"icon-ctrl"},[a("i",{staticClass:"el-icon-more"})]),a("el-dropdown-menu",{attrs:{slot:"dropdown"},slot:"dropdown"},[a("el-dropdown-item",{attrs:{command:"edit-"+e.row.id+"-"+e.$index}},[t._v("编辑")]),a("el-dropdown-item",{attrs:{command:"delete-"+e.row.id+"-"+e.$index}},[t._v("删除")])],1)],1)]}}])})],1),a("el-pagination",{staticClass:"mt-20",attrs:{background:"",layout:"total, prev, pager, next, jumper","current-page":t.pagination.currentPage,"page-size":t.pagination.pageSize,total:t.pagination.total,"hide-on-single-page":!0},on:{"current-change":t.getData,"update:currentPage":function(e){return t.$set(t.pagination,"currentPage",e)},"update:current-page":function(e){return t.$set(t.pagination,"currentPage",e)}}})],1)},qt=[],Ht={create:function(t){return dt.post(pt.zhiye,t)},index:function(t){return dt.get(pt.zhiye,t)},show:function(t){return dt.get(pt.zhiyeItem(t))},edit:function(t,e){return dt.put(pt.zhiyeItem(t),e)},destory:function(t){return dt.delete(pt.zhiyeItem(t))},createPath:function(t){return dt.post(pt.zhiyePath,t)},editPath:function(t,e){return dt.put(pt.zhiyePathItem(t),e)},destoryPath:function(t){return dt.delete(pt.zhiyePathItem(t))},sortPath:function(t){return dt.post(pt.zhiyePathSort,t)},createCourse:function(t){return dt.post(pt.zhiyeCourse,t)},destoryCourse:function(t){return dt.delete(pt.zhiyeCourseItem(t))},sortCourse:function(t){return dt.post(pt.zhiyeCourseSort,t)}},Jt=Ht,Gt={data:function(){return{loading:!0,zhiyes:[],pagination:{currentPage:1,pageSize:10,total:0}}},created:function(){this.getData()},methods:{getData:function(){var t=this,e={page_size:this.pagination.pageSize,current_page:this.pagination.currentPage};this.loading=!0,Jt.index(e).then((function(e){t.zhiyes=e.rows,t.pagination.currentPage=e.pagination.current_page,t.pagination.pageSize=e.pagination.page_size,t.pagination.total=e.pagination.total})).finally((function(){t.loading=!1}))},handleCommand:function(t){var e=t.split("-")[0],a=t.split("-")[1],i=t.split("-")[2];"edit"===e?this.$router.push({name:"ZhiyeEdit",params:{id:a}}):"delete"===e&&this.delZhiyes(i)},delZhiyes:function(t){var e=this,a=this.zhiyes[t].id;this.$confirm("确认删除吗？").then((function(){return Jt.destory(a)})).then((function(){e.$message.success("删除课程成功"),e.zhiyes.splice(t,1)})).catch((function(){}))}}},Kt=Gt,Qt=(a("4701"),Object(r["a"])(Kt,Lt,qt,!1,null,null,null)),Wt=Qt.exports,Xt=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"page-content"},[a("div",{staticClass:"c-650"},[t._m(0),a("el-form",{attrs:{"label-position":"top","label-width":"80px",size:"mini"}},[a("el-form-item",{attrs:{label:"职业名称："}},[a("el-input",{model:{value:t.zhiye.name,callback:function(e){t.$set(t.zhiye,"name",e)},expression:"zhiye.name"}})],1),a("el-form-item",{attrs:{label:"职业描述："}},[a("el-input",{attrs:{type:"textarea"},model:{value:t.zhiye.description,callback:function(e){t.$set(t.zhiye,"description",e)},expression:"zhiye.description"}})],1),a("el-form-item",{attrs:{label:"职业封面："}},[a("el-upload",{ref:"upload",staticClass:"zhiye-image-upload",attrs:{action:"",limit:1,"file-list":t.fileList,"before-upload":t.handleBeforeUpload,accept:"image/jpg, image/jpeg, image/png"}},[t.zhiye.image_url?t._e():a("i",{staticClass:"el-icon-plus el-uploader__icon"}),t.zhiye.image_url?a("img",{staticClass:"zhiye-image-upload",attrs:{src:t.zhiye.image_url}}):t._e()])],1),a("el-form-item",[a("el-button",{attrs:{size:"medium",type:"primary",plain:""},on:{click:t.handleSubmit}},[t._v("创建职业")])],1)],1)],1)])},Yt=[function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"sub-header"},[a("div",{staticClass:"sub-header-title"},[t._v("基本信息")])])}],te={data:function(){return{fileList:[],zhiye:{name:"",description:"",image_url:"",status:0}}},methods:{handleSubmit:function(){var t=this;this.loading=!0,Jt.create(this.zhiye).then((function(e){t.$message.success("创建职业成功"),t.$router.push({name:"ZhiyeEdit",params:{id:e.id}})})).finally((function(){t.loading=!1}))},handleBeforeUpload:function(t){var e=this;return $t.start(t).then((function(t){e.zhiye.image_url=t.imageUrl})),Promise.reject({})}}},ee=te,ae=(a("8e17"),Object(r["a"])(ee,Xt,Yt,!1,null,"c0e31e66",null)),ie=ae.exports,ne=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{directives:[{name:"loading",rawName:"v-loading",value:t.loading,expression:"loading"}],staticClass:"page-content"},[a("el-row",{attrs:{gutter:60}},[a("el-col",{attrs:{lg:12}},[a("div",{staticClass:"sub-header"},[a("div",{staticClass:"sub-header-title"},[t._v("基本信息")]),a("div",{staticClass:"sub-header-fd"},[a("el-button",{attrs:{size:"medium",type:t.isEdit?"primary":""},on:{click:t.handleZhiyeEdit}},[t._v(" "+t._s(t.isEdit?"保存":"修改")+" ")])],1)]),a("el-form",{attrs:{"label-position":"top",size:"mini",model:t.zhiye}},[a("el-form-item",{attrs:{label:"课程名称："}},[a("el-input",{attrs:{disabled:!t.isEdit},model:{value:t.zhiye.name,callback:function(e){t.$set(t.zhiye,"name",e)},expression:"zhiye.name"}})],1),a("el-form-item",{attrs:{label:"课程描述："}},[a("el-input",{attrs:{type:"textarea",disabled:!t.isEdit},model:{value:t.zhiye.description,callback:function(e){t.$set(t.zhiye,"description",e)},expression:"zhiye.description"}})],1),a("el-row",{attrs:{gutter:20}},[a("el-col",{attrs:{lg:12}},[a("el-form-item",{attrs:{label:"课程封面："}},[t.isEdit?a("el-upload",{ref:"upload",staticClass:"el-image-upload",attrs:{action:"",limit:1,"file-list":t.fileList,"before-upload":t.handleBeforeUpload,accept:"image/jpg, image/jpeg, image/png"}},[t.zhiye.image_url?t._e():a("i",{staticClass:"el-icon-plus el-uploader__icon"}),t.zhiye.image_url?a("img",{staticClass:"el-image-upload",attrs:{src:t.zhiye.image_url}}):t._e()]):t._e(),!t.isEdit&&t.zhiye.image_url?a("img",{staticClass:"el-image-upload",attrs:{src:t.zhiye.image_url}}):t._e(),t.isEdit||t.zhiye.image_url?t._e():a("span",[t._v("无")])],1)],1),a("el-col",{attrs:{lg:12}},[a("el-form-item",{attrs:{label:"课程状态："}},[a("el-switch",{attrs:{disabled:!t.isEdit,"active-value":1,"inactive-value":0},model:{value:t.zhiye.status,callback:function(e){t.$set(t.zhiye,"status",e)},expression:"zhiye.status"}})],1)],1)],1)],1)],1),a("el-col",{attrs:{lg:12}},[a("div",{staticClass:"sub-header"},[a("div",{staticClass:"sub-header-title"},[t._v("职业路径")])]),a("div",{staticClass:"path-container"},[a("draggable",{attrs:{group:"path",handle:".path-item-draggable"},on:{change:t.handleSortPath},model:{value:t.paths,callback:function(e){t.paths=e},expression:"paths"}},t._l(t.paths,(function(e,i){return a("div",{key:e.id,staticClass:"path-item"},[a("div",{staticClass:"path-item-title"},[a("i",{staticClass:"el-icon-rank path-item-draggable"}),a("span",[t._v(t._s(e.name))]),a("div",{staticClass:"path-item-ctrl"},[a("el-dropdown",{attrs:{trigger:"hover"},on:{command:t.handleCommandPath}},[a("span",{staticClass:"icon-ctrl"},[a("i",{staticClass:"el-icon-more"})]),a("el-dropdown-menu",{attrs:{slot:"dropdown"},slot:"dropdown"},[a("el-dropdown-item",{attrs:{command:"1-"+i}},[t._v("编辑")]),a("el-dropdown-item",{attrs:{command:"0-"+i}},[t._v("删除")])],1)],1)],1)]),a("div",{staticClass:"path-item-course"},[a("draggable",{attrs:{handle:".course-item-draggable",group:"course"},on:{change:function(e){return t.handleSortCourse(e,i)}},model:{value:e.courses,callback:function(a){t.$set(e,"courses",a)},expression:"path.courses"}},t._l(e.courses,(function(e,n){return a("div",{key:n,staticClass:"course-item"},[a("div",{staticClass:"course-item-text"},[a("i",{staticClass:"el-icon-rank course-item-draggable"}),a("span",[t._v(t._s(e.name))]),a("div",{staticClass:"course-item-ctrl"},[a("el-dropdown",{attrs:{trigger:"hover"},on:{command:t.handleCommandCourse}},[a("span",{staticClass:"icon-ctrl"},[a("i",{staticClass:"el-icon-more"})]),a("el-dropdown-menu",{attrs:{slot:"dropdown"},slot:"dropdown"},[a("el-dropdown-item",{attrs:{command:"0-"+i+"-"+n}},[t._v("删除")])],1)],1)],1)])])})),0),a("div",{staticClass:"course-item",on:{click:function(e){return t.handleAddCourse(i)}}},[a("div",{staticClass:"course-item-create"},[t._v(" 添加关联课程 "),a("i",{staticClass:"el-icon-circle-plus"})])])],1)])})),0),a("div",{staticClass:"path-item-create",on:{click:t.handletoCreatePath}},[t._v(" 添加路径 "),a("i",{staticClass:"el-icon-circle-plus"})])],1)])],1),a("el-dialog",{attrs:{title:"create"===t.dialogFormType?"添加职业路径":"修改职业路径",visible:t.dialogFormVisible},on:{"update:visible":function(e){t.dialogFormVisible=e}}},[a("el-form",{attrs:{model:t.dialogForm}},[a("el-form-item",{attrs:{label:"路径名称"}},[a("el-input",{model:{value:t.dialogForm.name,callback:function(e){t.$set(t.dialogForm,"name",e)},expression:"dialogForm.name"}})],1),a("el-form-item",{attrs:{label:"路径描述"}},[a("el-input",{attrs:{type:"textarea"},model:{value:t.dialogForm.description,callback:function(e){t.$set(t.dialogForm,"description",e)},expression:"dialogForm.description"}})],1)],1),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(e){t.dialogFormVisible=!1}}},[t._v("取 消")]),a("el-button",{attrs:{type:"primary"},on:{click:t.handlePathSubimt}},[t._v("确 定")])],1)],1)],1)},se=[],re=(a("a4d3"),a("e01a"),{data:function(){return{loading:!0,isEdit:!1,dialogFormType:"create",dialogFormVisible:!1,dialogForm:{id:null,name:"",description:"",pathIndex:null},drawerVisible:!1,fileList:[],zhiye:{id:null,name:"",description:"",status:0,image_url:""},paths:[]}},created:function(){this.getData()},methods:{getData:function(){var t=this,e=this.$route.params.id;Jt.show(e).then((function(e){t.zhiye=e.zhiye,t.paths=e.zhiye.zhiye_paths})).finally((function(){t.loading=!1}))},handleZhiyeEdit:function(){var t=this,e=this.$route.params.id;this.isEdit=!this.isEdit,this.isEdit||(this.loading=!0,Jt.edit(e,Object(at["a"])({},this.zhiye)).then((function(){t.$message.success("编辑成功")})).finally((function(){t.loading=!1})))},handleBeforeUpload:function(t){var e=this;return $t.start(t).then((function(t){e.zhiye.image_url=t.imageUrl})),Promise.reject({})},handletoCreatePath:function(){this.dialogFormType="create",this.dialogFormVisible=!0,this.dialogForm.id="",this.dialogForm.name="",this.dialogForm.description="",this.dialogForm.pathIndex=""},handlePathSubimt:function(){"create"===this.dialogFormType?this.handleCreatePath():this.handleEditPath()},handleCreatePath:function(){var t=this,e=Number(this.$route.params.id),a=this.paths.length+1,i=this.dialogForm.name,n=this.dialogForm.description;this.loading=!0,Jt.createPath({sort:a,zhiye_id:e,name:i,description:n}).then((function(e){t.$message.success("添加路径成功"),t.paths.push({id:e.id,name:i,description:n,sort:a,courses:[]})})).finally((function(){t.loading=!1,t.dialogFormVisible=!1}))},handleEditPath:function(){var t=this,e=Number(this.$route.params.id),a=this.dialogForm.id,i=this.dialogForm.name,n=this.dialogForm.description,s=this.dialogForm.pathIndex;this.loading=!0,Jt.editPath(a,{zhiye_id:e,name:i,description:n}).then((function(){t.$message.success("编辑成功"),t.paths[s].name=i,t.paths[s].description=n})).finally((function(){t.loading=!1,t.dialogFormVisible=!1}))},handleDestoryPath:function(t){var e=this,a=this.paths[t];this.loading=!0,this.$confirm("确认删除「"+a.name+"」吗？").then((function(){return Jt.destoryPath(a.id)})).then((function(){e.paths.splice(t,1)})).finally((function(){e.loading=!1}))},handleCommandPath:function(t){var e=t.split("-"),a=e[0],i=e[1],n=this.paths[i];"1"===a?(this.dialogFormType="edit",this.dialogFormVisible=!0,this.dialogForm.name=n.name,this.dialogForm.description=n.description,this.dialogForm.id=n.id,this.dialogForm.pathIndex=i):this.handleDestoryPath(i)},handleSortPath:function(){var t=this,e=this.paths.map((function(t){return t.id}));Jt.sortPath({paths:e}).then((function(){t.$message.success("路径排序成功")}))},handleSortCourse:function(t,e){var a=this;if(t.added||t.moved){var i=this.paths[e].courses.map((function(t){return t.zhiye_course.id})),n=this.paths[e].id;Jt.sortCourse({courses:i,path_id:n}).then((function(){a.$message.success("关联课程排序成功")}))}},handleImgAdd:function(t,e){var a=this;$t.start(e).then((function(e){a.$refs.md.$img2Url(t,e.imageUrl)}))},handleAddCourse:function(t){var e=this,a=this.paths[t].id,i=Number(this.$route.params.id),n=this.paths[t].courses.length+1;this.$prompt("请输入课程 ID","关联课程",{confirmButtonText:"确定",cancelButtonText:"取消",inputPattern:/^\d+$/,inputErrorMessage:"输入课程 ID，课程 ID 为数字"}).then((function(t){var s=t.value;e.loading=!0,Jt.createCourse({path_id:a,zhiye_id:i,sort:n,course_id:Number(s)}).then((function(){e.$message.success("添加课程成功"),e.getData()})).finally((function(){e.loading=!1}))}))},handleCommandCourse:function(t){var e=this,a=t.split("-"),i=Number(a[0]),n=a[1],s=a[2],r=this.paths[n],o=r.courses[s],c=o.zhiye_course.id;i||(this.loading=!0,this.$confirm("确认删除「"+o.name+"」吗？").then((function(){return Jt.destoryCourse(c)})).then((function(){e.paths[n].courses.splice(s,1)})).finally((function(){e.loading=!1})))}},components:{draggable:Dt.a}}),oe=re,ce=(a("f5b2"),Object(r["a"])(oe,ne,se,!1,null,"25f98a8d",null)),le=ce.exports,ue=[{path:"/",name:"Root",component:J,redirect:{name:"Dashboard"},children:[{path:"/dashboard",name:"Dashboard",redirect:{name:"Course"},meta:{}},{path:"/course",name:"CoursesRoot",component:{render:function(t){return t("router-view")}},redirect:{name:"Course"},meta:{nav:{icon:"el-icon-collection",title:"课程管理"},breadcrumb:{title:"课程",replace:!0}},children:[{path:"/course",name:"Course",component:_t},{path:"/course/create",name:"CourseCreate",component:St,meta:{breadcrumb:{title:"创建"}}},{path:"/course/:id/edit",name:"CourseEdit",component:Zt,meta:{breadcrumb:{title:"编辑"}}}]},{path:"/zhiye",name:"zhiyesRoot",component:{render:function(t){return t("router-view")}},redirect:{name:"Zhiye"},meta:{nav:{icon:"el-icon-collection",title:"职业路径"},breadcrumb:{title:"职业",replace:!0}},children:[{path:"/zhiye",name:"Zhiye",component:Wt},{path:"/zhiye/create",name:"ZhiyeCreate",component:ie,meta:{breadcrumb:{title:"创建"}}},{path:"/zhiye/:id/edit",name:"ZhiyeEdit",component:le,meta:{breadcrumb:{title:"编辑"}}}]}]},{path:"/login",name:"login",component:Y,meta:{breadcrumb:{title:"登陆页面"}}}],de=ue,me=a("323e"),pe=a.n(me);a("a5d8");i["default"].use(d["a"]);var he=new d["a"]({base:"",routes:de});he.beforeEach(function(){var t=Object(u["a"])(regeneratorRuntime.mark((function t(e,a,i){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:pe.a.start(),i();case 2:case"end":return t.stop()}}),t)})));return function(e,a,i){return t.apply(this,arguments)}}()),he.afterEach((function(t,e){pe.a.done()}));var fe=he,ge=a("2f62");i["default"].use(ge["a"]);var ve=new ge["a"].Store({state:{},mutations:{},actions:{},modules:{}});a("0fae"),a("add7");i["default"].use(rt.a),i["default"].config.productionTip=!1,new i["default"]({router:fe,store:ve,render:function(t){return t(l)}}).$mount("#app")},"594e":function(t,e,a){"use strict";var i=a("c56d"),n=a.n(i);n.a},6758:function(t,e,a){"use strict";var i=a("2f5d"),n=a.n(i);n.a},"68e3":function(t,e,a){"use strict";var i=a("55f0"),n=a.n(i);n.a},7198:function(t,e,a){"use strict";var i=a("b62c"),n=a.n(i);n.a},"759a":function(t,e,a){},"8e17":function(t,e,a){"use strict";var i=a("3b41"),n=a.n(i);n.a},"908f":function(t,e,a){},9297:function(t,e,a){"use strict";var i=a("759a"),n=a.n(i);n.a},"9b19":function(t,e,a){t.exports=a.p+"img/logo.f43b9a47.svg"},"9b22":function(t,e,a){"use strict";var i=a("908f"),n=a.n(i);n.a},"9f55":function(t,e,a){"use strict";var i=a("ed02"),n=a.n(i);n.a},add7:function(t,e,a){},b62c:function(t,e,a){},c56d:function(t,e,a){},ca0b:function(t,e,a){"use strict";var i=a("0d1a"),n=a.n(i);n.a},cf05:function(t,e,a){t.exports=a.p+"img/logo.82b9c7a5.png"},e0eb:function(t,e,a){},ed02:function(t,e,a){},f432:function(t,e,a){"use strict";var i=a("e0eb"),n=a.n(i);n.a},f5b2:function(t,e,a){"use strict";var i=a("f669"),n=a.n(i);n.a},f669:function(t,e,a){}});
//# sourceMappingURL=app.6580af8f.js.map